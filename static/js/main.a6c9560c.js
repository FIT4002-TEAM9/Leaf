(()=>{"use strict";var e={8911:(e,t,n)=>{n.r(t),n.d(t,{default:()=>yo});var r=n(5861),i=n(4942),o=n(9439),a=n(8083),l=n(9880),c=n(9526),s=n(1133),u=n(3615),d=n(5911),f=n(3144),g=n(5671),p=n(136),h=n(2963),v=n(1120),y=n(8664);function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,v.default)(e);if(t){var i=(0,v.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,h.default)(this,n)}}var m=function(e){(0,p.default)(n,e);var t=b(n);function n(e){return(0,g.default)(this,n),t.call(this,"[UNREACHABLE CASE ERROR] Unreachable case '"+JSON.stringify(e)+"'")}return(0,f.default)(n)}((0,y.default)(Error)),S=n(4500);const w=function(){function e(){(0,g.default)(this,e),this.slice=(0,S.createSlice)({name:"LeafPublisher",initialState:{value:0},reducers:{newForm:function(e){e.value=(e.value+1)%10}}}),this.publisher=(0,S.configureStore)({reducer:this.slice.reducer})}return(0,f.default)(e,[{key:"subscribe",value:function(e){return this.publisher.subscribe(e)}},{key:"publish",value:function(){this.publisher.dispatch(this.slice.actions.newForm())}}]),e}();const x=function(){function e(t){(0,g.default)(this,e),this.slice=(0,S.createSlice)({name:"LeafValuePublisher",initialState:{value:t},reducers:{publishAction:function(e,t){e.value=t.payload}}}),this.publisher=(0,S.configureStore)({reducer:this.slice.reducer})}return(0,f.default)(e,[{key:"subscribe",value:function(e){return this.publisher.subscribe(e)}},{key:"publish",value:function(e){this.publisher.dispatch(this.slice.actions.publishAction(e))}},{key:"read",value:function(){return this.publisher.getState().value}}]),e}();var j=function(e){return e[e.Worker=0]="Worker",e[e.Leader=1]="Leader",e[e.Admin=2]="Admin",e[e.LoggedOut=3]="LoggedOut",e}({}),k=(0,f.default)((function e(){(0,g.default)(this,e)}));k.loginStatus=new x(j.LoggedOut),k.workersFetched=new w,k.leadersFetched=new w,k.patientsFetched=new w,k.activePatientChanged=new w,k.activeWorkerChanged=new w,k.activeLeaderChanged=new w,k.contentWidth=new x(0),k.clearAllInputs=new w,k.patientUpdated=new w,k.reallocationOccurred=new w;const O=k;var C=n(743);function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,v.default)(e);if(t){var i=(0,v.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,h.default)(this,n)}}var D=function(e){(0,p.default)(n,e);var t=P(n);function n(e){return(0,g.default)(this,n),t.call(this,"[ASSERTION ERROR] "+e)}return(0,f.default)(n)}((0,y.default)(Error));function A(e,t){if(!e)throw new D(t)}var T={en:{appName:"Intake",unknown:"Unknown","navigation.noScreen":"No item selected","emergency.phoneNumber":"000","tabBar.worker.yourPatients":"Home","tabBar.worker.newTriage":"Triage","tabBar.worker.events":"Dashboard","tabBar.worker.account":"Account","tabBar.admin.nurses":"Nurses","tabBar.admin.leaders":"Leaders","tabBar.admin.new":"New","tabBar.admin.export":"Export","tabBar.leader.viewNurses":"Nurses","tabBar.leader.viewPatients":"Patients","tabBar.leader.account":"Account","header.worker.newTriage":"New Triage","header.worker.events":"Events Dashboard","header.worker.patients":"Patients","header.worker.account":"Your Account","header.worker.addEvent":"Add Event","header.worker.view1Param":"{0} History","header.worker.actions1Param":"Code {0} Responses","header.worker.edit1Param":"Edit {0}","header.worker.changelog1Param":"{0} Changelog","header.admin.manageNurses":"Home","header.admin.viewNurses":"Nurses","header.admin.viewLeaders":"Leaders","header.admin.newAccount":"New Account","header.admin.exportPatient":"Export Patient","header.leader.viewNurses":"Nurses","header.leader.viewPatients":"Patients","header.leader.allocatePatient":"Allocate Patient","header.leader.nurses":"Nurses","header.leader.allocateTo":"Allocate Nurse To {0}","header.leader.account":"Your Account","button.login":"Login","button.logout":"Logout","button.done":"Done","button.markDone":"Mark Done","button.cancel":"Cancel","button.newAllocation":"New Allocation","button.allocate":"Allocate","button.allocated":"Allocated","button.edit":"Edit","button.deleteAccount":"Remove Account","button.createAccount":"Create Account","button.viewPatient":"View","button.patientActions":"Actions","button.editPatient":"Edit","button.morning":"Morning","button.noon":"Noon","button.afternoon":"Afternoon","button.none":"None","button.code.1":"1","button.code.2":"2","button.code.3":"3","button.code.4":"4","button.code.5":"5","button.selectAnOption":"Select an option","button.deallocate":"DEALLOCATE","button.deletePatient":"Delete","button.activateAccount":"Activate Account","button.activate":"Activate","button.clear":"Clear","button.submit":"Submit","button.addEvent":"Add Event","button.exportPatient":"Export Patient","button.resetPassword":"Forgot Password?","button.reset":"Reset","button.changelog":"Changelog","button.removeAccount":"Remove","login.title":"Login","login.activateAccount":"Activate Account","login.resetPassword":"Reset Password","operation.removeAccount":"This will remove this account and all associated data","operation.activeAccount":"To activate the account and set the password, select 'Activate Account' on the login page.","operation.selectAll":"Select All","operation.deselectAll":"Deselect All","label.id":"ID: ","label.date":"Date: ","label.lastAllocated":"Last Allocated: {0} Shift","label.notAllocated":"Last Allocated: None","label.loading":"Loading","label.details":"Details","label.viewPatient":"View patient information and medical history.","label.patientActions":"View immediate actions relevant to triage.","label.editPatient":"Edit patient information and triage.","label.removePatient":"Delete patient from the system.","label.addEvent":"Add a scheduled event for the patient.","label.done":"Exit patient options.","label.patientAllocateToNurse":"Select patients to allocate to","label.allocateToPatient":"Allocate nurse to","label.hospital":"Hospital","label.rememberMe":"Remember Me","label.editHospital":"Edit hospital","label.editName":"Edit name","label.editEmail":"Edit email","label.enterPassword":"Enter password","label.allocated":"Allocated","label.all":"All","label.category":"Category","label.selectRole":"Select Role","label.enterName":"Enter Name","label.accountCreated":"Account Created","label.anErrorOccurred":"An error occurred","label.noEvents":"No Events","label.accountCreated1Param":"{0} Account Created","label.noPatientSelected":"No patient selected","label.patientSelected":"patient selected","label.changelog":"View the edit history of the patient.","label.triageCode2Param":"CODE {0}  \u2022  {1}","label.removeAccountWarning":"Are you sure you want to remove this account? This action is irreversible.","label.createdAt1Param":"Created {0}","inputLabel.username":"Username","inputLabel.providedUsername":"Assigned Username","inputLabel.password":"Password","inputLabel.setPassword":"Set Password","inputLabel.confirmPassword":"Confirm Password","inputLabel.newPassword":"New Password","inputLabel.confirmNewPassword":"Confirm New Password","inputLabel.givenName":"Name","inputLabel.surname":"Surname","inputLabel.mrn":"MRN","inputLabel.postcode":"Postcode","inputLabel.email":"Email","inputLabel.setEmail":"Set Email","inputLabel.triageCode":"Triage Code","inputLabel.triageDescription":"Triage Description","inputLabel.dob":"Date of Birth","inputLabel.dateFormat":"DD/MM/YYYY","inputLabel.timeFormat":"HH:MM - 24hr","inputLabel.hospital":"Hospital Site","inputLabel.ward":"Ward","inputLabel.medicalUnit":"Medical Unit","inputLabel.required":"Required","inputLabel.sex":"Sex","inputLabel.phone":"Phone Number","inputLabel.title":"Title","inputLabel.description":"Description","inputLabel.triggerTime":"Trigger Time","inputLabel.category":"Category","triageForm.title.identity":"Patient Identity","triageForm.title.triage":"Triage","triageForm.title.hospitalisation":"Hospitalisation","triageForm.title.end":"End of Form","patientHistory.title.identity":"Identity","patientHistory.title.bio":"Bio","patientHistory.title.triage":"Triage Case","patientHistory.title.events":"Events","patientHistory.descriptor.name":"Name","patientHistory.descriptor.mrn":"MRN","patientHistory.descriptor.postcode":"Postcode","patientHistory.descriptor.dob":"Date of Birth","patientHistory.descriptor.sex":"Sex","patientHistory.descriptor.code":"Code","patientHistory.descriptor.triageText":"Description","patientHistory.descriptor.arrivalDate":"Arrival date","patientHistory.descriptor.arrivalWard":"Arrival ward","patientHistory.descriptor.dischargeDate":"Discharge date","patientHistory.descriptor.dischargeWard":"Discharge ward","patientHistory.descriptor.hospital":"Hospital","patientHistory.descriptor.medicalUnit":"Medical Unit","patientHistory.descriptor.category":"Category","patientHistory.descriptor.triggerTime":"Time","actions.call":"Call","actions.department":"Department","actions.removeLeader":"Remove Leader","actions.removeNurse":"Remove Nurse","actions.removePatient":"Delete Patient {0}?","actions.emergency":"000","actions.callEmergency":"Call emergency services","actions.callPatient":"Call {0}","actions.steps":"Your next steps","actions.arrivalWard":"Arrival ward","search.underlying":"Search","triageCode.none":"None","triageCode.1":"Immediate","triageCode.2":"Emergency","triageCode.3":"Urgent","triageCode.4":"Semi-Urgent","triageCode.5":"Non-Urgent","searchBarFilter.time":"Time","searchBarFilter.triageCode":"Code","workerCard.numPatients":"{0} Allocated","workerCard.id":"ID: {0}","allocateToNurseCard.id":"ID: {0}","allocateToNurseCard.date":"Date: {0}","allocateToNurseCard.session":"Allocated: {0}","triageCodeSteps.immediate.1":"Alert medical staff immediately","triageCodeSteps.immediate.2":"Ensure constant visual surveillance","triageCodeSteps.immediate.3":"Ensure adequate personnel to provide restraint","triageCodeSteps.immediate.4":"Call security and/or police IF staff or patient safety is compromised","triageCodeSteps.emergency.1":"Alert medical staff immediately","triageCodeSteps.emergency.2":"Ensure constant visual surveillance","triageCodeSteps.emergency.3":"Ensure security in attendance to provide detention if necessary until patient is sedated","triageCodeSteps.emergency.4":"If defusing techniques are unsuccessful, escalate to Code {0}","triageCodeSteps.urgent.1":"Close observation (regular observation at maximum of 10 minute intervals)","triageCodeSteps.urgent.2":"Do not leave patient in waiting room without support staff","triageCodeSteps.urgent.3":"Ensure safe environment for patient and others","triageCodeSteps.urgent.4":"Inform security that patient is in department","triageCodeSteps.urgent.5":"Re-triage if evidence of increasing behavioural disturbance","triageCodeSteps.semiUrgent.1":"Intermittent observation (routine waiting room check at maximum of 1 hour intervals)","triageCodeSteps.semiUrgent.2":"Discuss with mental health staff","triageCodeSteps.semiUrgent.3":"Re-triage if evidence of increasing behavioural disturbance","triageCodeSteps.nonUrgent.1":"Intermittent observation (routine waiting room check at maximum of 1 hour intervals)","triageCodeSteps.nonUrgent.2":"Discuss with mental health staff","role.admin":"Admin","role.leader":"Leader","role.worker":"Nurse","shiftTime.morning":"Morning","shiftTime.afternoon":"Afternoon","shiftTime.night":"Night","shiftTime.none":"None","nurseAllocationScreen.subtitle":"Patients Allocated","patientEventCategory.medication":"Drug Exposure","patientEventCategory.visit":"Visit Occurrence","patientEventCategory.condition":"Condition Occurrence","patientEventCategory.procedure":"Procedure Occurrence","patientEventCategory.device":"Device Exposure","patientEventCategory.measurement":"Measurement","patientEventCategory.observation":"Observation","patientEventCategory.episode":"Episode","patientEventCategory.note":"Note","sex.male":"Male","sex.female":"Female","sex.other":"Other","error.missingName":"Please enter both name and surname","error.missingRole":"Please select the role","error.hospitalExists":"Hospital does not exist","error.incorrectPassword":"Incorrect password","error.invalidDate":"Invalid date","error.invalidTime":"Invalid time","changelog.creation":"Entered system","changelog.eventCreation3Param":'Event "{0}" created by {1} ({2})',"changelog.eventCompletion3Param":'Event "{0}" marked COMPLETED by {1} ({2})',"changelog.eventIncompletion3Param":'Event "{0}" marked INCOMPLETE by {1} ({2})',"changelog.allocation4Param":"Allocated by {0} ({1}) to nurse {2} ({3})","changelog.edit2Param":"Record edited by {0} ({1})","feedback.error":"Error","feedback.success":"Success","feedback.invalidInputs":"Invalid inputs","feedback.noUnactiviatedAccount":"Unactivated account could not be found","feedback.accountActivated":"Account activated","feedback.eventCreated":"Event created","feedback.incorrectUsernamePassword":"Incorrect username or password","feedback.triageCreated":"Triage created","feedback.patientEdited":"Patient edited","feedback.triageNotCreated":"Triage creation failed","feedback.patientNotEdited":"Patient edit failed","feedback.successDeleteAccount":"Account deleted","feedback.accountNotExist":"The account does not exist","feedback.failDeleteNurseAccount":"Nurse has patient(s) assigned","feedback.successExportPatient":"Patient exported","feedback.updatedPassword":"Password updated"}},E=T[C.locale.split("-")[0]]||T.en;function I(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=E[e];return A(void 0!=i,"Invalid string path provided: "+e),i.replace(/{(\d+)}/g,(function(e,t){return"undefined"!=typeof n[t]?n[t]:e}))}const N=function(){function e(){(0,g.default)(this,e),this._sections=[]}return(0,f.default)(e,[{key:"sections",get:function(){return this._sections}},{key:"addSection",value:function(e){return this.sections.push(e),this}}]),e}();const B=function(){function e(t){(0,g.default)(this,e),this._code=t}return(0,f.default)(e,[{key:"toString",value:function(){return this._code}}]),e}();var W=n(7385);function L(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,v.default)(e);if(t){var i=(0,v.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,h.default)(this,n)}}const M=function(e){(0,p.default)(n,e);var t=L(n);function n(e){return(0,g.default)(this,n),t.call(this,e)}return(0,f.default)(n,[{key:"matches",value:function(e){return this.toString()==e.toString()}}],[{key:"generate",value:function(){return new n(W.default.v4())}}]),n}(B);const U=function(){function e(t,n,r,i,o,a){(0,g.default)(this,e),this.id=t,this._firstName=n,this._lastName=r,this._email=i,this._currentHospital=o,this._accountActivated=a}return(0,f.default)(e,[{key:"firstName",get:function(){return this._firstName}},{key:"lastName",get:function(){return this._lastName}},{key:"email",get:function(){return this._email},set:function(e){this._email=e}},{key:"currentHospital",get:function(){return this._currentHospital}},{key:"accountActivated",get:function(){return this._accountActivated}},{key:"fullName",get:function(){return this.firstName+" "+this.lastName}},{key:"setFirstName",value:function(e){this._firstName=e}},{key:"setLastName",value:function(e){this._lastName=e}},{key:"setEmail",value:function(e){this._email=e}},{key:"setHospital",value:function(e){this._currentHospital=e}},{key:"setAccountActivated",value:function(e){this._accountActivated=e}}]),e}();var _=function(){function e(t){(0,g.default)(this,e),this.id=t.toUpperCase()}return(0,f.default)(e,[{key:"matches",value:function(e){return this.id==e.id}},{key:"toString",value:function(){return this.matches(e.worker)?I("role.worker"):this.matches(e.leader)?I("role.leader"):this.matches(e.admin)?I("role.admin"):I("unknown")}}]),e}();function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,v.default)(e);if(t){var i=(0,v.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,h.default)(this,n)}}_.worker=new _("WORKER"),_.leader=new _("LEADER"),_.admin=new _("ADMIN"),_.unknown=new _("UNKNOWN");const R=function(e){(0,p.default)(n,e);var t=F(n);function n(e){return(0,g.default)(this,n),t.call(this,e)}return(0,f.default)(n,[{key:"matches",value:function(e){return this.toString()==e.toString()}}],[{key:"generate",value:function(){var e=Math.pow(10,6)-1;return new n(Math.floor(Math.random()*(e+1)).toString().padStart(6,"0"))}}]),n}(B);function H(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,v.default)(e);if(t){var i=(0,v.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,h.default)(this,n)}}const z=function(e){(0,p.default)(n,e);var t=H(n);function n(e,r,i,o,a,l){var c;return(0,g.default)(this,n),(c=t.call(this,e,r,i,o,a,l)).role=_.worker,c}return(0,f.default)(n,null,[{key:"new",value:function(e,t,r){return new n(R.generate(),e,t,null,r,!1)}}]),n}(U);function V(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,v.default)(e);if(t){var i=(0,v.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,h.default)(this,n)}}const G=function(e){(0,p.default)(n,e);var t=V(n);function n(){var e;(0,g.default)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).role=_.admin,e}return(0,f.default)(n,null,[{key:"new",value:function(e,t){return new n(R.generate(),e,t,null,null,!1)}}]),n}(U);const q=function(){function e(t,n,r){(0,g.default)(this,e),this.id=t,this.code=n,this.name=r,this._wards={},this._medicalUnits={}}return(0,f.default)(e,[{key:"addWard",value:function(e,t){this._wards[e]=t}},{key:"addMedUnit",value:function(e,t){this._medicalUnits[e]=t}},{key:"wards",get:function(){return this._wards}},{key:"medUnits",get:function(){return this._medicalUnits}},{key:"wardsAsArray",get:function(){var e=this;return Object.keys(this._wards).map((function(t){return e._wards[t]}))}},{key:"medUnitsAsArray",get:function(){var e=this;return Object.keys(this._medicalUnits).map((function(t){return e._medicalUnits[t]}))}},{key:"getWardFromId",value:function(e){return this._wards[e]}},{key:"getMedUnitFromId",value:function(e){return this._medicalUnits[e]}}]),e}();const J=(0,f.default)((function e(t,n,r){(0,g.default)(this,e),this.id=t,this.hospitalCode=n,this.name=r}));const Y=(0,f.default)((function e(t,n,r){(0,g.default)(this,e),this.id=t,this.name=n,this.group=r}));var $=new q("H1","STA","St Care A");$.addWard("W1",new J("W1","STA","EMER STA")),$.addWard("W2",new J("W2","STA","SSU STA")),$.addWard("W3",new J("W3","STA","CDU STA")),$.addWard("W4",new J("W4","STA","2E STA")),$.addWard("W5",new J("W5","STA","SSUP STA")),$.addWard("W6",new J("W6","STA","1 WEST STA")),$.addWard("W7",new J("W7","STA","CDUP STA")),$.addWard("W8",new J("W8","STA","4E STA")),$.addWard("W9",new J("W9","STA","2 WEST STA")),$.addWard("W10",new J("W10","STA","1 NORTH STA")),$.addWard("W11",new J("W11","STA","TL STA")),$.addWard("W12",new J("W12","STA","3E STA")),$.addMedUnit("M1",new Y("M1","Gynaecology STA","Women & Children")),$.addMedUnit("M2",new Y("M2","Obstetrics STA","Women & Children")),$.addMedUnit("M3",new Y("M3","Acute Care OP STA","Emergency and General Medicine")),$.addMedUnit("M4",new Y("M4","Clinical Decision Unit STA","Emergency and General Medicine")),$.addMedUnit("M5",new Y("M5","Acute Medical A1 STA","Emergency and General Medicine")),$.addMedUnit("M6",new Y("M6","Paediatrics STA","Women & Children")),$.addMedUnit("M7",new Y("M7","Short Stay Unit STA","Emergency and General Medicine")),$.addMedUnit("M8",new Y("M8","Gen Surg STA","Surgery")),$.addMedUnit("M9",new Y("M9","GEM 1W STA","Continuing Care"));var K=new q("H2","STB","St Care B");K.addWard("W1",new J("W1","STB","Emergency STB")),K.addWard("W2",new J("W2","STB","4.1 STB")),K.addWard("W3",new J("W3","STB","ADOL IPU STB")),K.addWard("W4",new J("W4","STB","3.4 STB")),K.addWard("W5",new J("W5","STB","2.2 STB")),K.addWard("W6",new J("W6","STB","3.1 STB")),K.addWard("W7",new J("W7","STB","9.2 STB")),K.addWard("W8",new J("W8","STB","8.1 STB")),K.addWard("W9",new J("W9","STB","6.2 STB")),K.addWard("W10",new J("W10","STB","7.1 STB")),K.addWard("W11",new J("W11","STB","2.1 STB")),K.addWard("W12",new J("W12","STB","5.1 STB")),K.addWard("W13",new J("W13","STB","7.2 STB")),K.addWard("W14",new J("W14","STB","CDU STB")),K.addWard("W15",new J("W15","STB","6.1 STB")),K.addWard("W16",new J("W16","STB","SSU STB")),K.addWard("W17",new J("W17","STB","9.1 STB")),K.addWard("W18",new J("W18","STB","5.3 STB")),K.addWard("W19",new J("W19","STB","8.2 STB")),K.addWard("W20",new J("W20","STB","UPT HOUSE STB")),K.addWard("W21",new J("W21","STB","3.3 STB")),K.addWard("W22",new J("W22","STB","HITH STB")),K.addWard("W23",new J("W23","STB","Surg Admit STB")),K.addWard("W24",new J("W24","STB","5.2 STB")),K.addWard("W25",new J("W25","STB","Emergency Admissions STB")),K.addWard("W26",new J("W26","STB","2.3 STB")),K.addWard("W27",new J("W27","STB","4.3 STB")),K.addMedUnit("M1",new Y("M1","Short Stay Unit MA STB","Emergency and General Medicine")),K.addMedUnit("M2",new Y("M2","Renal Dialysis PJ STB","Speciality Medicine")),K.addMedUnit("M3",new Y("M3","Haemostasis - Thrombosis STB","Speciality Medicine")),K.addMedUnit("M4",new Y("M4","Rheumatology STB","Speciality Medicine")),K.addMedUnit("M5",new Y("M5","Maternity STB","Women & Children")),K.addMedUnit("M6",new Y("M6","Oncology STB","Speciality Medicine")),K.addMedUnit("M7",new Y("M7","COVID1 suspected STB","Speciality Medicine")),K.addMedUnit("M8",new Y("M8","ENT STB","Surgery")),K.addMedUnit("M9",new Y("M9","Clinical Decision Unit STB","Emergency and General Medicine")),K.addMedUnit("M10",new Y("M10","Psych - Adult STB","Mental Health/Turning Point/Alcohol&Drug")),K.addMedUnit("M11",new Y("M11","Orthopaedic Surgery 2 STB","Surgery")),K.addMedUnit("M12",new Y("M12","Neurology STB","Speciality Medicine")),K.addMedUnit("M13",new Y("M13","COVID - HIT STB","Speciality Medicine")),K.addMedUnit("M14",new Y("M14","COVID1 confirmed STB","Speciality Medicine")),K.addMedUnit("M15",new Y("M15","CV-Acute Medical 1 STB","Emergency and General Medicine")),K.addMedUnit("M16",new Y("M16","Thoracic Surgery STB","Surgery")),K.addMedUnit("M17",new Y("M17","Short Stay Unit STB","Emergency and General Medicine")),K.addMedUnit("M18",new Y("M18","HIT STB","Continuing Care")),K.addMedUnit("M19",new Y("M19","Paediatric Surgery STB","Surgery")),K.addMedUnit("M20",new Y("M20","Orthopaedic Surgery 1 STB","Surgery")),K.addMedUnit("M21",new Y("M21","Gen Surg A STB","Surgery")),K.addMedUnit("M22",new Y("M22","Gen Surg D STB","Surgery")),K.addMedUnit("M23",new Y("M23","Obs & Gynae STB","Women & Children")),K.addMedUnit("M24",new Y("M24","Psych - Adult Upton House STB","Mental Health/Turning Point/Alcohol&Drug")),K.addMedUnit("M25",new Y("M25","Endocrinology STB","Speciality Medicine")),K.addMedUnit("M26",new Y("M26","Haemostasis/Thromb/Lymphoma STB","Speciality Medicine")),K.addMedUnit("M27",new Y("M27","Vascular Surgery STB","Surgery")),K.addMedUnit("M28",new Y("M28","Plastic Surgery STB","Surgery")),K.addMedUnit("M29",new Y("M29","Urology STB","Surgery")),K.addMedUnit("M30",new Y("M30","Adolescent IPU STB","Mental Health/Turning Point/Alcohol&Drug")),K.addMedUnit("M31",new Y("M31","Acute Medical B2 STB","Emergency and General Medicine")),K.addMedUnit("M32",new Y("M32","Renal STB","Speciality Medicine")),K.addMedUnit("M33",new Y("M33","Respiratory STB","Speciality Medicine")),K.addMedUnit("M34",new Y("M34","Gastroenterology STB","Speciality Medicine")),K.addMedUnit("M35",new Y("M35","Acute Medical B1 STB","Emergency and General Medicine")),K.addMedUnit("M36",new Y("M36","Gen Surg C STB","Surgery")),K.addMedUnit("M37",new Y("M37","Gen Surg B STB","Surgery")),K.addMedUnit("M38",new Y("M38","Oncology 4.1 STB","Speciality Medicine")),K.addMedUnit("M39",new Y("M39","Haematology STB","Speciality Medicine")),K.addMedUnit("M40",new Y("M40","Paediatrics STB","Women & Children")),K.addMedUnit("M41",new Y("M41","Oncology 5.1 STB","Speciality Medicine")),K.addMedUnit("M42",new Y("M42","Stroke STB","Speciality Medicine")),K.addMedUnit("M43",new Y("M43","Acute Medical B3 STB","Emergency and General Medicine")),K.addMedUnit("M44",new Y("M44","Cardiology STB","Speciality Medicine"));var Q=[$,K],X=Q.reduce((function(e,t){return e[t.id]=t,e}),{});const Z=function(){function e(){(0,g.default)(this,e),this.json={}}return(0,f.default)(e,[{key:"data",get:function(){return this.json}},{key:"str",get:function(){return JSON.stringify(this.json)}},{key:"addString",value:function(e,t){return this.json[e]=null!=t?t:null,this}},{key:"addNumber",value:function(e,t){return this.json[e]=null!=t?t:null,this}},{key:"addBoolean",value:function(e,t){return this.json[e]=null!=t?t:null,this}},{key:"addDate",value:function(e,t){var n;return this.json[e]=null!=(n=null==t?void 0:t.toISOString())?n:null,this}},{key:"addObject",value:function(e,t){var n;return this.json[e]=null!=(n=null==t?void 0:t.json)?n:null,this}},{key:"addStringArray",value:function(e,t){var n;return this.json[e]=null!=(n=null==t?void 0:t.map((function(e){return null!=e?e:null})))?n:null,this}},{key:"addNumberArray",value:function(e,t){var n;return this.json[e]=null!=(n=null==t?void 0:t.map((function(e){return null!=e?e:null})))?n:null,this}},{key:"addBooleanArray",value:function(e,t){var n;return this.json[e]=null!=(n=null==t?void 0:t.map((function(e){return null!=e?e:null})))?n:null,this}},{key:"addDateArray",value:function(e,t){var n;return this.json[e]=null!=(n=null==t?void 0:t.map((function(e){var t;return null!=(t=null==e?void 0:e.toISOString())?t:null})))?n:null,this}},{key:"addObjectArray",value:function(e,t){var n;return this.json[e]=null!=(n=null==t?void 0:t.map((function(e){var t;return null!=(t=null==e?void 0:e.json)?t:null})))?n:null,this}},{key:"getStringOrNull",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.json[e];for(var i of n){if(void 0!=r)break;r=this.json[i]}return void 0===r||"string"!==typeof r?t:r}},{key:"getString",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return null!=(t=this.getStringOrNull(e,n,r))?t:n}},{key:"getNumberOrNull",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.json[e];for(var i of n){if(void 0!=r)break;r=this.json[i]}return void 0===r||"number"!==typeof r?t:r}},{key:"getNumber",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return null!=(n=this.getNumberOrNull(e,t,r))?n:t}},{key:"getBooleanOrNull",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.json[e];for(var i of n){if(void 0!=r)break;r=this.json[i]}return void 0===r||"boolean"!==typeof r?t:r}},{key:"getBoolean",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return null!=(n=this.getBooleanOrNull(e,t,r))?n:t}},{key:"getDateOrNull",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.json[e];for(var i of n){if(void 0!==r)break;r=this.json[i]}return void 0===r?t:null===r?null:new Date(r)}},{key:"getDate",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return null!=(n=this.getDateOrNull(e,t,r))?n:t}},{key:"getStringArrayOrNull",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.json[e];for(var i of n){if(void 0!==r)break;r=this.json[i]}return void 0!==r&&Array.isArray(r)?r:t}},{key:"getStringArray",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return null!=(t=this.getStringArrayOrNull(e,n,r))?t:n}},{key:"getNumberArrayOrNull",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.json[e];for(var i of n){if(void 0!==r)break;r=this.json[i]}return void 0!==r&&Array.isArray(r)?r:t}},{key:"getNumberArray",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return null!=(t=this.getNumberArrayOrNull(e,n,r))?t:n}},{key:"getBooleanArrayOrNull",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.json[e];for(var i of n){if(void 0!==r)break;r=this.json[i]}return void 0!==r&&Array.isArray(r)?r:t}},{key:"getBooleanArray",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return null!=(t=this.getBooleanArrayOrNull(e,n,r))?t:n}},{key:"getDateArrayOrNull",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.json[e];for(var i of n){if(void 0!==r)break;r=this.json[i]}return void 0!==r&&Array.isArray(r)?r.map((function(e){return new Date(e)})):t}},{key:"getDateArray",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return null!=(t=this.getDateArrayOrNull(e,n,r))?t:n}},{key:"getDataObject",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.json[t];for(var i of n){if(void 0!==r)break;r=this.json[i]}return void 0===r||r instanceof e?new e:e.fromJSON(r)}},{key:"getDataObjectArray",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.json[t];for(var i of n){if(void 0!==r)break;r=this.json[i]}return void 0!==r&&Array.isArray(r)?r.map((function(t){return e.fromJSON(t)})):[]}}],[{key:"fromJSON",value:function(t){var n=new e;return n.json=t,n}}]),e}();var ee=function(e){return e.ID="id",e.FirstName="firstName",e.LastName="lastName",e.Email="email",e.CurrentHospitalID="currentHospitalId",e.AccountActivated="accountActivated",e}({});const te=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,null,[{key:"create",value:function(e){var t,n;return(new Z).addString(ee.ID,e.id.toString()).addString(ee.FirstName,e.firstName).addString(ee.LastName,e.lastName).addString(ee.Email,e.email).addString(ee.CurrentHospitalID,null==(t=e.currentHospital)||null==(n=t.id)?void 0:n.toString()).addBoolean(ee.AccountActivated,e.accountActivated)}},{key:"restore",value:function(e){var t=e.getStringOrNull(ee.ID),n=e.getStringOrNull(ee.FirstName),r=e.getStringOrNull(ee.LastName),i=e.getStringOrNull(ee.Email),o=e.getStringOrNull(ee.CurrentHospitalID),a=e.getBooleanOrNull(ee.AccountActivated);return t&&n&&r&&null!=a?new G(new R(t),n,r,i,null==o?null:X[o],a):(console.error("[AdminDataObject] Failed to restore Admin"),null)}}]),e}();var ne=function(e){return e.Patients="patients",e.Leaders="leaders",e.Workers="workers",e.Admins="admins",e.Accounts="accounts",e}({}),re=n(3433),ie=n(1402),oe=(0,n(1844).initializeApp)({apiKey:"AIzaSyD9cKsA2JghkrDHNhOvBmqOUPa8_jx-Dg4",authDomain:"leaf-f184f.firebaseapp.com",projectId:"leaf-f184f",storageBucket:"leaf-f184f.appspot.com",messagingSenderId:"958929199285",appId:"1:958929199285:web:473b2d7be90466e3659efc",measurementId:"G-49C9WMRJM1"}),ae=(0,ie.getFirestore)(oe),le=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,[{key:"insertOne",value:function(){var e=(0,r.default)((function*(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;try{if(void 0===n)yield(0,ie.addDoc)((0,ie.collection)(ae,e),t);else{var r=(0,ie.doc)(ae,e,n);yield(0,ie.setDoc)(r,t)}return console.log("[DATABASE SESSION] Inserted 1 document"),!0}catch(i){return console.error("[DATABASE SESSION] Document insertion failed: "+i),!1}}));return function(t,n){return e.apply(this,arguments)}}()},{key:"insertMany",value:function(){var e=(0,r.default)((function*(e,t){try{var n=(0,ie.writeBatch)(ae);return t.forEach((function(t){var r=(0,ie.doc)((0,ie.collection)(ae,e));n.set(r,t)})),yield n.commit(),console.log("[DATABASE SESSION] Inserted "+t.length+" documents"),!0}catch(r){return console.error("[DATABASE SESSION] Multiple document insertion failed: "+r),!1}}));return function(t,n){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=(0,r.default)((function*(e,t){try{var n=(0,ie.doc)(ae,e,t),r=yield(0,ie.getDoc)(n);return r.exists()?(console.log("[DATABASE SESSION] Read 1 document"),Z.fromJSON(r.data())):(console.log("[DATABASE SESSION] No matching document found"),null)}catch(i){return console.error("[DATABASE SESSION] Failed to fetch document: "+i),null}}));return function(t,n){return e.apply(this,arguments)}}()},{key:"readCollection",value:function(){var e=(0,r.default)((function*(e){try{var t=yield(0,ie.getDocs)((0,ie.collection)(ae,e)),n=[];return t.forEach((function(e){n.push(e)})),console.log("[DATABASE SESSION] Retrieved "+n.length+" documents from "+e),n.map((function(e){return Z.fromJSON(e.data())}))}catch(r){return console.error("[DATABASE SESSION] Failed to get documents from collection "+e+": "+r),[]}}));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=(0,r.default)((function*(e,t,n){try{var r=(0,ie.doc)(ae,e,t);return yield(0,ie.updateDoc)(r,n),console.log("[DATABASE SESSION] Document updated"),!0}catch(i){return console.error("[DATABASE SESSION] Failed to update document: "+i),!1}}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"addUniqueToArray",value:function(){var e=(0,r.default)((function*(e,t,n,r){try{var o=(0,ie.doc)(ae,e,t);return yield(0,ie.updateDoc)(o,(0,i.default)({},n,(0,ie.arrayUnion)(r))),console.log("[DATABASE SESSION] Object added to array"),!0}catch(a){return console.error("[DATABASE SESSION] Failed to add object to array: "+a),!1}}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"addToArray",value:function(){var e=(0,r.default)((function*(e,t,n,r){try{var o=(0,ie.doc)(ae,e,t),a=yield(0,ie.getDoc)(o);if(!a.exists())throw new Error("[DATABASE SESSION] Document "+t+" in collection "+e+" doesn't exist");var l=a.data()[n]||[],c=[].concat((0,re.default)(l),[r]);return yield(0,ie.updateDoc)(o,(0,i.default)({},n,c)),console.log("[DATABASE SESSION] Object added to array (allowing duplicates)"),!0}catch(s){return console.error("[DATABASE SESSION] Failed to add object to array: "+s),!1}}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,r.default)((function*(e,t){try{var n=(0,ie.doc)(ae,e,t);return yield(0,ie.deleteDoc)(n),console.log("[DATABASE SESSION] Document deleted"),!0}catch(r){return console.error("[DATABASE SESSION] Failed to delete document: "+r),!1}}));return function(t,n){return e.apply(this,arguments)}}()},{key:"query",value:function(){var e=(0,r.default)((function*(e,t,n,r){try{var i=(0,ie.query)((0,ie.collection)(ae,e),(0,ie.where)(t,n,r)),o=yield(0,ie.getDocs)(i),a=[];return o.forEach((function(e){a.push(e)})),console.log("[DATABASE SESSION] Found "+a.length+" documents"),a.map((function(e){return Z.fromJSON(e.data())}))}catch(l){return console.error("[DATABASE SESSION] Failed to perform query: "+l),[]}}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"subscribe",value:function(e,t){var n=(0,ie.collection)(ae,e);return(0,ie.onSnapshot)(n,(function(e){var n=[];e.forEach((function(e){n.push(e)})),t(n.map((function(e){return Z.fromJSON(e.data())})))}))}},{key:"deleteCollection",value:function(){var e=(0,r.default)((function*(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=(0,ie.collection)(ae,e),r=yield(0,ie.getDocs)(n);if(r.empty)return console.log("[DATABASE SESSION] No documents found in collection "+e+"."),!0;var i=(0,ie.writeBatch)(ae),o=0;return r.forEach((function(e){i.delete(e.ref),++o===t&&(i.commit(),o=0)})),o>0&&(yield i.commit()),console.log("[DATABASE SESSION] Deleted entire collection "+e),!0}));return function(t){return e.apply(this,arguments)}}()}]),e}();le.inst=new le;const ce=le;function se(e,t){return e.map(t).filter((function(e){return null!==e}))}var ue=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,[{key:"getAdmins",value:function(){var e=(0,r.default)((function*(){return se(yield ce.inst.readCollection(ne.Admins),(function(e){return te.restore(e)}))}));return function(){return e.apply(this,arguments)}}()},{key:"getAdmin",value:function(){var e=(0,r.default)((function*(e){var t=yield ce.inst.read(ne.Admins,e.toString());return t?te.restore(t):null}));return function(t){return e.apply(this,arguments)}}()},{key:"updateAdmin",value:function(){var e=(0,r.default)((function*(e){var t=te.create(e);return ce.inst.update(ne.Admins,e.id.toString(),t.data)}));return function(t){return e.apply(this,arguments)}}()}]),e}();ue.inst=new ue;const de=ue;function fe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,v.default)(e);if(t){var i=(0,v.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,h.default)(this,n)}}const ge=function(e){(0,p.default)(n,e);var t=fe(n);function n(){var e;(0,g.default)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).role=_.leader,e}return(0,f.default)(n,null,[{key:"new",value:function(e,t,r){return new n(R.generate(),e,t,null,r,!1)}}]),n}(U);var pe=function(e){return e.ID="id",e.FirstName="firstName",e.LastName="lastName",e.Email="email",e.CurrentHospitalID="currentHospitalId",e.AccountActivated="accountActivated",e}({});const he=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,null,[{key:"create",value:function(e){var t,n;return(new Z).addString(pe.ID,e.id.toString()).addString(pe.FirstName,e.firstName).addString(pe.LastName,e.lastName).addString(pe.Email,e.email).addString(pe.CurrentHospitalID,null==(t=e.currentHospital)||null==(n=t.id)?void 0:n.toString()).addBoolean(pe.AccountActivated,e.accountActivated)}},{key:"restore",value:function(e){var t=e.getStringOrNull(pe.ID),n=e.getStringOrNull(pe.FirstName),r=e.getStringOrNull(pe.LastName),i=e.getStringOrNull(pe.Email),o=e.getStringOrNull(pe.CurrentHospitalID),a=e.getBooleanOrNull(pe.AccountActivated);return t&&n&&r&&null!=a?new ge(new R(t),n,r,i,null==o?null:X[o],a):(console.error("[LeaderDataObject] Failed to restore Leader"),null)}}]),e}();var ve=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,[{key:"getLeaders",value:function(){var e=(0,r.default)((function*(){return se(yield ce.inst.readCollection(ne.Leaders),(function(e){return he.restore(e)}))}));return function(){return e.apply(this,arguments)}}()},{key:"getLeader",value:function(){var e=(0,r.default)((function*(e){var t=yield ce.inst.read(ne.Leaders,e.toString());return t?he.restore(t):null}));return function(t){return e.apply(this,arguments)}}()},{key:"updateLeader",value:function(){var e=(0,r.default)((function*(e){var t=he.create(e);return ce.inst.update(ne.Leaders,e.id.toString(),t.data)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteLeader",value:function(){var e=(0,r.default)((function*(e){return ce.inst.delete(ne.Leaders,e.id.toString())}));return function(t){return e.apply(this,arguments)}}()}]),e}();ve.inst=new ve;const ye=ve;function be(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,v.default)(e);if(t){var i=(0,v.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,h.default)(this,n)}}const me=function(e){(0,p.default)(n,e);var t=be(n);function n(e){return(0,g.default)(this,n),t.call(this,e)}return(0,f.default)(n,[{key:"matches",value:function(e){return this.toString()==e.toString()}}]),n}(B);var Se=function(){function e(t){(0,g.default)(this,e),this.id=t.toUpperCase()}return(0,f.default)(e,[{key:"matches",value:function(e){return this.id==e.id}},{key:"toString",value:function(){return this.matches(e.morning)?I("shiftTime.morning"):this.matches(e.afternoon)?I("shiftTime.afternoon"):this.matches(e.night)?I("shiftTime.night"):this.matches(e.none)?I("shiftTime.none"):I("unknown")}}],[{key:"getCurrent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;if(null==t)return e.none;var n=t.getHours();return n>=7&&n<15?e.morning:n>=15&&n<23?e.afternoon:e.night}}]),e}();Se.morning=new Se("MORNING"),Se.afternoon=new Se("AFTERNOON"),Se.night=new Se("NIGHT"),Se.none=new Se("NONE");const we=function(){function e(t,n,r,i,o,a,l,c,s){(0,g.default)(this,e),this.id=t,this._arrivalDate=n,this._dischargeDate=r,this._arrivalWard=i,this._dischargeWard=o,this._hospital=a,this._medicalUnit=l,this._triageText=c,this._triageCode=s}return(0,f.default)(e,[{key:"arrivalDate",get:function(){return this._arrivalDate}},{key:"dischargeDate",get:function(){return this._dischargeDate}},{key:"arrivalWard",get:function(){return this._arrivalWard}},{key:"dischargeWard",get:function(){return this._dischargeWard}},{key:"hospital",get:function(){return this._hospital}},{key:"medicalUnit",get:function(){return this._medicalUnit}},{key:"triageText",get:function(){return this._triageText}},{key:"triageCode",get:function(){return this._triageCode}}],[{key:"new",value:function(t,n,r,i,o){return new e(M.generate(),new Date,null,t,null,n,r,i,o)}}]),e}();const xe=function(){function e(t,n,r){(0,g.default)(this,e),this.date=t,this.description=n,this.id=r}return(0,f.default)(e,[{key:"dateDescription",get:function(){return this.date.toLocaleTimeString("en-AU",{hour:"numeric",minute:"numeric",hour12:!0}).toUpperCase()+"\n"+this.date.toDateString()}}],[{key:"new",value:function(t,n){return new e(t,n,M.generate())}}]),e}();const je=function(){function e(t,n,r,i,o){(0,g.default)(this,e),this._creationDate=t,this._eventCreations=n,this._eventCompletions=r,this._allocations=i,this._edits=o}return(0,f.default)(e,[{key:"creationDate",get:function(){return this._creationDate}},{key:"eventCreations",get:function(){return this._eventCreations}},{key:"eventCompletions",get:function(){return this._eventCompletions}},{key:"allocations",get:function(){return this._allocations}},{key:"edits",get:function(){return this._edits}},{key:"logEventCreation",value:function(e,t){this.eventCreations.push({date:new Date,eventID:e,nurseID:t})}},{key:"logEventCompletion",value:function(e,t,n){this._eventCompletions.push({date:new Date,eventID:e,nurseID:t,completed:n})}},{key:"logAllocation",value:function(e,t){this._allocations.push({date:new Date,employeeID:e,nurseID:t})}},{key:"logEdit",value:function(e){this._edits.push({date:new Date,nurseID:e})}},{key:"generateTimeline",value:function(){var e=(0,r.default)((function*(e,t,n){var r=this.formPatientEventDict(e),i=[this.generateCreationDatePoint()].concat((0,re.default)(this.generateEventCreationsPoints(r,t)),(0,re.default)(this.generateEventCompletionsPoints(r,t)),(0,re.default)(this.generateAllocationsPoints(t,n)),(0,re.default)(this.generateEditsPoints(t)));return i.sort((function(e,t){return e.date.getTime()-t.date.getTime()})),i}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"generateCreationDatePoint",value:function(){return xe.new(this._creationDate,I("changelog.creation"))}},{key:"generateEventCreationsPoints",value:function(e,t){return this._eventCreations.map((function(n){var r=e[n.eventID.toString()];if(!r)return null;var i=t[n.nurseID.toString()];return i?xe.new(n.date,I("changelog.eventCreation3Param",r.title,i.fullName,i.id.toString())):null})).filter((function(e){return null!==e}))}},{key:"generateEventCompletionsPoints",value:function(e,t){return this._eventCompletions.map((function(n){var r=e[n.eventID.toString()];if(!r)return null;var i=t[n.nurseID.toString()];return i?n.completed?xe.new(n.date,I("changelog.eventCompletion3Param",r.title,i.fullName,i.id.toString())):xe.new(n.date,I("changelog.eventIncompletion3Param",r.title,i.fullName,i.id.toString())):null})).filter((function(e){return null!==e}))}},{key:"generateAllocationsPoints",value:function(e,t){return this._allocations.map((function(n){var r=e[n.employeeID.toString()];if(r||(r=t[n.employeeID.toString()]),!r)return null;var i=e[n.nurseID.toString()];return i?xe.new(n.date,I("changelog.allocation4Param",r.fullName,r.id.toString(),i.fullName,i.id.toString())):null})).filter((function(e){return null!==e}))}},{key:"generateEditsPoints",value:function(e){return this._edits.map((function(t){var n=e[t.nurseID.toString()];return n?xe.new(t.date,I("changelog.edit2Param",n.fullName,n.id.toString())):null})).filter((function(e){return null!==e}))}},{key:"formPatientEventDict",value:function(e){return e.reduce((function(e,t){return e[t.id.toString()]=t,e}),{})}}],[{key:"new",value:function(){return new e(new Date,[],[],[],[])}}]),e}();const ke=function(){function e(t,n,r,i,o,a,l,c,s,u,d,f){(0,g.default)(this,e),this._mrn=t,this._dob=n,this._firstName=r,this._lastName=i,this._sex=o,this._phoneNumber=a,this._triageCase=l,this._postCode=c,this._timeLastAllocated=s,this._allocatedTo=u,this._events=d,this._changelog=f}return(0,f.default)(e,[{key:"mrn",get:function(){return this._mrn}},{key:"dob",get:function(){return this._dob}},{key:"firstName",get:function(){return this._firstName}},{key:"lastName",get:function(){return this._lastName}},{key:"fullName",get:function(){return this._firstName+" "+this._lastName}},{key:"sex",get:function(){return this._sex}},{key:"phoneNumber",get:function(){return this._phoneNumber}},{key:"triageCase",get:function(){return this._triageCase}},{key:"postCode",get:function(){return this._postCode}},{key:"timeLastAllocated",get:function(){return this._timeLastAllocated}},{key:"idAllocatedTo",get:function(){return this._allocatedTo}},{key:"events",get:function(){return this._events}},{key:"sessionAllocated",get:function(){return Se.getCurrent(this._timeLastAllocated)}},{key:"changelog",get:function(){return this._changelog}},{key:"addEvent",value:function(e){this._events.push(e)}},{key:"allocateTo",value:function(e){this._allocatedTo=e,this._timeLastAllocated=new Date}},{key:"deallocate",value:function(){this._allocatedTo=null}},{key:"editTriage",value:function(e,t,n,r,i){this._triageCase=we.new(e,t,n,r,i)}}],[{key:"new",value:function(t,n,r,i,o,a,l,c,s){return new e(t,n,r,i,o,a,l,c,new Date,s,[],je.new())}}]),e}();var Oe=function(){function e(t){(0,g.default)(this,e),this.id=t.toUpperCase()}return(0,f.default)(e,[{key:"matches",value:function(e){return this.id==e.id}},{key:"toString",value:function(){return this.matches(e.male)?I("sex.male"):this.matches(e.female)?I("sex.female"):this.matches(e.other)?I("sex.other"):I("unknown")}}]),e}();Oe.male=new Oe("MALE"),Oe.female=new Oe("FEMALE"),Oe.other=new Oe("OTHER");var Ce=function(e){return e.CreationDate="creationDate",e.EventCreations="eventCreations",e.EventCompletions="eventCompletions",e.Allocations="allocations",e.Edits="edits",e.Date="date",e.EventID="eventId",e.NurseID="nurseId",e.EmployeeID="allocatedById",e.Completed="completed",e}({});const Pe=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,null,[{key:"create",value:function(e){return(new Z).addDate(Ce.CreationDate,e.creationDate).addObjectArray(Ce.EventCreations,e.eventCreations.map((function(e){return(new Z).addDate(Ce.Date,e.date).addString(Ce.EventID,e.eventID.toString()).addString(Ce.NurseID,e.nurseID.toString())}))).addObjectArray(Ce.EventCompletions,e.eventCompletions.map((function(e){return(new Z).addDate(Ce.Date,e.date).addString(Ce.EventID,e.eventID.toString()).addString(Ce.NurseID,e.nurseID.toString()).addBoolean(Ce.Completed,e.completed)}))).addObjectArray(Ce.Allocations,e.allocations.map((function(e){return(new Z).addDate(Ce.Date,e.date).addString(Ce.EmployeeID,e.employeeID.toString()).addString(Ce.NurseID,e.nurseID.toString())}))).addObjectArray(Ce.Edits,e.edits.map((function(e){return(new Z).addDate(Ce.Date,e.date).addString(Ce.NurseID,e.nurseID.toString())})))}},{key:"restore",value:function(e){var t=e.getDateOrNull(Ce.CreationDate),n=e.getDataObjectArray(Ce.EventCreations),r=e.getDataObjectArray(Ce.EventCompletions),i=e.getDataObjectArray(Ce.Allocations),o=e.getDataObjectArray(Ce.Edits);if(!t)return console.error("[PatientChangelogDataObject] Failed to restore PatientChangelog"),null;var a=n.map((function(e){return{date:e.getDateOrNull(Ce.Date),eventID:e.getStringOrNull(Ce.EventID),nurseID:e.getStringOrNull(Ce.NurseID)}})).filter((function(e){return e.date&&e.eventID&&e.nurseID})).map((function(e){return{date:e.date,eventID:new M(e.eventID),nurseID:new R(e.nurseID)}})),l=r.map((function(e){return{date:e.getDateOrNull(Ce.Date),eventID:e.getStringOrNull(Ce.EventID),nurseID:e.getStringOrNull(Ce.NurseID),completed:e.getBooleanOrNull(Ce.Completed)}})).filter((function(e){return e.date&&e.eventID&&e.nurseID&&null!=e.completed})).map((function(e){return{date:e.date,eventID:new M(e.eventID),nurseID:new R(e.nurseID),completed:e.completed}})),c=i.map((function(e){return{date:e.getDateOrNull(Ce.Date),employeeID:e.getStringOrNull(Ce.EmployeeID),nurseID:e.getStringOrNull(Ce.NurseID)}})).filter((function(e){return e.date&&e.employeeID&&e.nurseID})).map((function(e){return{date:e.date,employeeID:new R(e.employeeID),nurseID:new R(e.nurseID)}})),s=o.map((function(e){return{date:e.getDateOrNull(Ce.Date),nurseID:e.getStringOrNull(Ce.NurseID)}})).filter((function(e){return e.date&&e.nurseID})).map((function(e){return{date:e.date,nurseID:new R(e.nurseID)}}));return new je(t,a,l,c,s)}}]),e}();const De=function(){function e(t,n,r,i,o,a,l){(0,g.default)(this,e),this.id=t,this.createdAt=n,this.triggerTime=r,this.title=i,this.description=o,this.category=a,this._lastCompleted=l}return(0,f.default)(e,[{key:"lastCompleted",get:function(){return this._lastCompleted}},{key:"createdAtDescription",get:function(){var e=this.createdAt.toLocaleTimeString("en-AU",{hour:"numeric",minute:"numeric",hour12:!0}).toUpperCase();return this.createdAt.toDateString()+" "+e}},{key:"triggerTimeDescription",get:function(){return this.triggerTime.toLocaleTimeString("en-AU",{hour:"numeric",minute:"numeric",hour12:!0}).toUpperCase()}},{key:"markCompleted",value:function(){this._lastCompleted=new Date}},{key:"markIncomplete",value:function(){this._lastCompleted=new Date(0)}},{key:"occursAfter",value:function(e){return 60*this.triggerTime.getHours()+this.triggerTime.getMinutes()>60*e.getHours()+e.getMinutes()}},{key:"completedToday",value:function(){var e=new Date;return e.getFullYear()===this.lastCompleted.getFullYear()&&e.getMonth()===this.lastCompleted.getMonth()&&e.getDate()===this.lastCompleted.getDate()}},{key:"getExportSummary",value:function(){return("ID:"+this.id+" TriggerTime:"+this.triggerTimeDescription+" Title:"+this.title+" Description:"+this.description+" Category:"+this.category+" LastCompleted:"+this.lastCompleted).replace(/,|\n/g," ")}}],[{key:"new",value:function(t,n,r,i){return new e(M.generate(),new Date,t,n,r,i,new Date(0))}}]),e}();var Ae=function(){function e(t){(0,g.default)(this,e),this.id=t.toUpperCase()}return(0,f.default)(e,[{key:"matches",value:function(e){return this.id==e.id}},{key:"toString",value:function(){return this.matches(e.medication)?I("patientEventCategory.medication"):this.matches(e.visit)?I("patientEventCategory.visit"):this.matches(e.condition)?I("patientEventCategory.condition"):this.matches(e.procedure)?I("patientEventCategory.procedure"):this.matches(e.device)?I("patientEventCategory.device"):this.matches(e.measurement)?I("patientEventCategory.measurement"):this.matches(e.observation)?I("patientEventCategory.observation"):this.matches(e.episode)?I("patientEventCategory.episode"):this.matches(e.note)?I("patientEventCategory.note"):I("unknown")}}]),e}();Ae.medication=new Ae("DRUG EXPOSURE"),Ae.visit=new Ae("VISIT OCCURRENCE"),Ae.condition=new Ae("CONDITION OCCURRENCE"),Ae.procedure=new Ae("PROCEDURE OCCURRENCE"),Ae.device=new Ae("DEVICE EXPOSURE"),Ae.measurement=new Ae("MEASUREMENT"),Ae.observation=new Ae("OBSERVATION"),Ae.episode=new Ae("EPISODE"),Ae.note=new Ae("NOTE");var Te=function(e){return e.ID="id",e.CreatedAt="createdAt",e.TriggerTime="triggerTime",e.Title="title",e.Description="description",e.Category="category",e.LastCompleted="lastCompleted",e}({});const Ee=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,null,[{key:"create",value:function(e){return(new Z).addString(Te.ID,e.id.toString()).addDate(Te.CreatedAt,e.createdAt).addDate(Te.TriggerTime,e.triggerTime).addString(Te.Title,e.title).addString(Te.Description,e.description).addString(Te.Category,e.category.id).addDate(Te.LastCompleted,e.lastCompleted)}},{key:"restore",value:function(e){var t=e.getStringOrNull(Te.ID),n=e.getDateOrNull(Te.CreatedAt),r=e.getDateOrNull(Te.TriggerTime),i=e.getStringOrNull(Te.Title),o=e.getStringOrNull(Te.Description),a=e.getStringOrNull(Te.Category),l=e.getDateOrNull(Te.LastCompleted);return t&&n&&r&&i&&o&&a&&null!=l?new De(new M(t),n,r,i,o,new Ae(a),l):(console.error("[PatientEventDataObject] Failed to restore PatientEvent"),null)}}]),e}();var Ie=function(){function e(t){(0,g.default)(this,e),this.id=t}return(0,f.default)(e,[{key:"code",get:function(){return this.id}},{key:"matches",value:function(e){return this.id==e.id}},{key:"toString",value:function(){return this.matches(e.immediate)?I("triageCode.1"):this.matches(e.emergency)?I("triageCode.2"):this.matches(e.urgent)?I("triageCode.3"):this.matches(e.semiUrgent)?I("triageCode.4"):this.matches(e.nonUrgent)?I("triageCode.5"):I("unknown")}},{key:"getSteps",value:function(){return this.matches(e.immediate)?[I("triageCodeSteps.immediate.1"),I("triageCodeSteps.immediate.2"),I("triageCodeSteps.immediate.3"),I("triageCodeSteps.immediate.4")]:this.matches(e.emergency)?[I("triageCodeSteps.emergency.1"),I("triageCodeSteps.emergency.2"),I("triageCodeSteps.emergency.3"),I("triageCodeSteps.emergency.4",e.immediate.code.toString())]:this.matches(e.urgent)?[I("triageCodeSteps.urgent.1"),I("triageCodeSteps.urgent.2"),I("triageCodeSteps.urgent.3"),I("triageCodeSteps.urgent.4"),I("triageCodeSteps.urgent.5")]:this.matches(e.semiUrgent)?[I("triageCodeSteps.semiUrgent.1"),I("triageCodeSteps.semiUrgent.2"),I("triageCodeSteps.semiUrgent.3")]:this.matches(e.nonUrgent)?[I("triageCodeSteps.nonUrgent.1"),I("triageCodeSteps.nonUrgent.2")]:[]}}]),e}();Ie.immediate=new Ie(1),Ie.emergency=new Ie(2),Ie.urgent=new Ie(3),Ie.semiUrgent=new Ie(4),Ie.nonUrgent=new Ie(5);var Ne=function(e){return e.ID="id",e.ArrivalDate="arrivalDate",e.DischargeDate="dischargeDate",e.ArrivalWardID="arrivalWardId",e.DischargeWardID="dischargeWardId",e.HospitalID="hospitalId",e.MedicalUnitID="medicalUnitId",e.TriageText="triageText",e.TriageCode="triageCode",e}({});const Be=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,null,[{key:"create",value:function(e){var t,n;return(new Z).addString(Ne.ID,e.id.toString()).addDate(Ne.ArrivalDate,e.arrivalDate).addDate(Ne.DischargeDate,e.dischargeDate).addString(Ne.ArrivalWardID,e.arrivalWard.id.toString()).addString(Ne.DischargeWardID,null==(t=e.dischargeWard)||null==(n=t.id)?void 0:n.toString()).addString(Ne.HospitalID,e.hospital.id.toString()).addString(Ne.MedicalUnitID,e.medicalUnit.id.toString()).addString(Ne.TriageText,e.triageText).addNumber(Ne.TriageCode,e.triageCode.id)}},{key:"restore",value:function(e){var t,n,r,i,o=e.getStringOrNull(Ne.ID),a=e.getDateOrNull(Ne.ArrivalDate),l=e.getDateOrNull(Ne.DischargeDate),c=e.getStringOrNull(Ne.ArrivalWardID),s=e.getStringOrNull(Ne.DischargeWardID),u=e.getStringOrNull(Ne.HospitalID),d=e.getStringOrNull(Ne.MedicalUnitID),f=e.getStringOrNull(Ne.TriageText),g=e.getNumberOrNull(Ne.TriageCode);if(!o)return console.error("[TriageCaseDataObject] Failed to restore TriageCase id"),null;if(!a)return console.error("[TriageCaseDataObject] Failed to restore TriageCase arrivalDate"),null;if(!c)return console.error("[TriageCaseDataObject] Failed to restore TriageCase arrivalWardId"),null;if(!u)return console.error("[TriageCaseDataObject] Failed to restore TriageCase hospitalId"),null;if(!d)return console.error("[TriageCaseDataObject] Failed to restore TriageCase medicalUnitId"),null;if(!f)return console.error("[TriageCaseDataObject] Failed to restore TriageCase triageText"),null;if(!g)return console.error("[TriageCaseDataObject] Failed to restore TriageCase triageCode"),null;var p=null==(t=X[u])?void 0:t.getWardFromId(c),h=null==s?null:null!=(n=null==(r=X[u])?void 0:r.getWardFromId(s))?n:null,v=X[u],y=null==(i=X[u])?void 0:i.getMedUnitFromId(d);return p?v?y?new we(new M(o),a,l,p,h,v,y,f,new Ie(g)):(console.error("[TriageCaseDataObject] Failed to restore TriageCase medicalUnit"),null):(console.error("[TriageCaseDataObject] Failed to restore TriageCase hosptial"),null):(console.error("[TriageCaseDataObject] Failed to restore TriageCase arrivalWard"),null)}}]),e}();var We=function(e){return e.MRN="mrn",e.DOB="dob",e.FirstName="firstName",e.LastName="lastName",e.Sex="sex",e.PhoneNumber="phoneNumber",e.TriageCase="triageCase",e.PostCode="postCode",e.TimeLastAllocated="timeLastAllocated",e.IDAllocatedTo="idAllocatedTo",e.Events="events",e.Changelog="changelog",e}({});const Le=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,null,[{key:"create",value:function(e){var t,n=Be.create(e.triageCase),r=e.events.map((function(e){return Ee.create(e)})),i=Pe.create(e.changelog);return(new Z).addString(We.MRN,e.mrn.toString()).addDate(We.DOB,e.dob).addString(We.FirstName,e.firstName).addString(We.LastName,e.lastName).addString(We.Sex,e.sex.id).addString(We.PhoneNumber,e.phoneNumber).addObject(We.TriageCase,n).addString(We.PostCode,e.postCode).addDate(We.TimeLastAllocated,e.timeLastAllocated).addString(We.IDAllocatedTo,null==(t=e.idAllocatedTo)?void 0:t.toString()).addObjectArray(We.Events,r).addObject(We.Changelog,i)}},{key:"restore",value:function(e){var t=e.getStringOrNull(We.MRN),n=e.getDateOrNull(We.DOB),r=e.getStringOrNull(We.FirstName),i=e.getStringOrNull(We.LastName),o=e.getStringOrNull(We.Sex),a=e.getStringOrNull(We.PhoneNumber),l=e.getDataObject(We.TriageCase),c=e.getDataObject(We.Changelog),s=e.getStringOrNull(We.PostCode),u=e.getDateOrNull(We.TimeLastAllocated),d=e.getStringOrNull(We.IDAllocatedTo),f=e.getDataObjectArray(We.Events),g=Be.restore(l),p=Pe.restore(c);return t&&n&&r&&i&&o&&a&&s&&g&&p?new ke(new me(t),n,r,i,new Oe(o),a,g,s,u,null==d?null:new R(d),se(f,(function(e){return Ee.restore(e)})),p):(console.error("[PatientDataObject] Failed to restore Patient "+(null!=t?t:"(missing MRN!!!)")),null)}}]),e}();var Me=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,[{key:"getPatients",value:function(){var e=(0,r.default)((function*(){return se(yield ce.inst.readCollection(ne.Patients),(function(e){return Le.restore(e)}))}));return function(){return e.apply(this,arguments)}}()},{key:"getPatientsAllocatedTo",value:function(){var e=(0,r.default)((function*(e){return se(yield ce.inst.query(ne.Patients,We.IDAllocatedTo,"==",e.id.toString()),(function(e){return Le.restore(e)}))}));return function(t){return e.apply(this,arguments)}}()},{key:"getPatient",value:function(){var e=(0,r.default)((function*(e){var t=yield ce.inst.read(ne.Patients,e.toString());return t?Le.restore(t):null}));return function(t){return e.apply(this,arguments)}}()},{key:"updatePatient",value:function(){var e=(0,r.default)((function*(e){var t=Le.create(e);return ce.inst.update(ne.Patients,e.mrn.toString(),t.data)}));return function(t){return e.apply(this,arguments)}}()},{key:"deletePatient",value:function(){var e=(0,r.default)((function*(e){return ce.inst.delete(ne.Patients,e.mrn.toString())}));return function(t){return e.apply(this,arguments)}}()}]),e}();Me.inst=new Me;const Ue=Me;var _e=function(e){return e.ID="id",e.FirstName="firstName",e.LastName="lastName",e.Email="email",e.CurrentHospitalID="currentHospitalId",e.AccountActivated="accountActivated",e}({});const Fe=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,null,[{key:"create",value:function(e){var t,n;return(new Z).addString(_e.ID,e.id.toString()).addString(_e.FirstName,e.firstName).addString(_e.LastName,e.lastName).addString(_e.Email,e.email).addString(_e.CurrentHospitalID,null==(t=e.currentHospital)||null==(n=t.id)?void 0:n.toString()).addBoolean(_e.AccountActivated,e.accountActivated)}},{key:"restore",value:function(e){var t=e.getStringOrNull(_e.ID),n=e.getStringOrNull(_e.FirstName),r=e.getStringOrNull(_e.LastName),i=e.getStringOrNull(_e.Email),o=e.getStringOrNull(_e.CurrentHospitalID),a=e.getBooleanOrNull(_e.AccountActivated);return t&&n&&r&&null!=a?new z(new R(t),n,r,i,null==o?null:X[o],a):(console.error("[WorkerDataObject] Failed to restore Worker"),null)}}]),e}();var Re=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,[{key:"getWorkers",value:function(){var e=(0,r.default)((function*(){return se(yield ce.inst.readCollection(ne.Workers),(function(e){return Fe.restore(e)}))}));return function(){return e.apply(this,arguments)}}()},{key:"getWorker",value:function(){var e=(0,r.default)((function*(e){var t=yield ce.inst.read(ne.Workers,e.toString());return t?Fe.restore(t):null}));return function(t){return e.apply(this,arguments)}}()},{key:"updateWorker",value:function(){var e=(0,r.default)((function*(e){var t=Fe.create(e);return ce.inst.update(ne.Workers,e.id.toString(),t.data)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteWorker",value:function(){var e=(0,r.default)((function*(e){return ce.inst.delete(ne.Workers,e.id.toString())}));return function(t){return e.apply(this,arguments)}}()}]),e}();Re.inst=new Re;const He=Re;var ze=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,[{key:"newWorkerCreated",value:function(){var e=(0,r.default)((function*(e){var t=Fe.create(e);return ce.inst.insertOne(ne.Workers,t.data,e.id.toString())}));return function(t){return e.apply(this,arguments)}}()},{key:"newAdminCreated",value:function(){var e=(0,r.default)((function*(e){var t=te.create(e);return ce.inst.insertOne(ne.Admins,t.data,e.id.toString())}));return function(t){return e.apply(this,arguments)}}()},{key:"newLeaderCreated",value:function(){var e=(0,r.default)((function*(e){var t=he.create(e);return ce.inst.insertOne(ne.Leaders,t.data,e.id.toString())}));return function(t){return e.apply(this,arguments)}}()}]),e}();ze.inst=new ze;const Ve=ze;var Ge=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,[{key:"newTriageSubmitted",value:function(){var e=(0,r.default)((function*(e){var t=Le.create(e);return ce.inst.insertOne(ne.Patients,t.data,e.mrn.toString())}));return function(t){return e.apply(this,arguments)}}()}]),e}();Ge.inst=new Ge;const qe=Ge;const Je=function(){function e(t,n){(0,g.default)(this,e),this.id=t,this._password=n}return(0,f.default)(e,[{key:"password",get:function(){return this._password}},{key:"setPassword",value:function(e){this._password=e}}]),e}();var Ye=function(e){return e.ID="id",e.Password="password",e}({});const $e=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,null,[{key:"create",value:function(e){return(new Z).addString(Ye.ID,e.id.toString()).addString(Ye.Password,e.password)}},{key:"restore",value:function(e){var t=e.getStringOrNull(Ye.ID),n=e.getStringOrNull(Ye.Password);return t&&null!=n?new Je(new R(t),n):(console.error("[AccountDataObject] Failed to restore Admin"),null)}}]),e}();var Ke=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,[{key:"getAccount",value:function(){var e=(0,r.default)((function*(e){var t=yield ce.inst.read(ne.Accounts,e.toString());return t?$e.restore(t):null}));return function(t){return e.apply(this,arguments)}}()},{key:"newAccountCreated",value:function(){var e=(0,r.default)((function*(e){var t=$e.create(e);return ce.inst.insertOne(ne.Accounts,t.data,e.id.toString())}));return function(t){return e.apply(this,arguments)}}()},{key:"updateAccount",value:function(){var e=(0,r.default)((function*(e){var t=$e.create(e);return ce.inst.update(ne.Accounts,e.id.toString(),t.data)}));return function(t){return e.apply(this,arguments)}}()}]),e}();Ke.inst=new Ke;const Qe=Ke;function Xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var et=function(){function e(){(0,g.default)(this,e),this._loggedInAccount=null,this._workerStore={},this._patientStore={},this._leaderStore={},this._activePatientMRN=null,this._activeWorkerID=null,this._activeLeaderID=null}return(0,f.default)(e,[{key:"loggedInAccount",get:function(){return null==this._loggedInAccount?(O.loginStatus.publish(j.LoggedOut),z.new("","",null)):this._loggedInAccount}},{key:"submitTriage",value:function(){var e=(0,r.default)((function*(e){return e.changelog.logAllocation(this.loggedInAccount.id,this.loggedInAccount.id),qe.inst.newTriageSubmitted(e)}));return function(t){return e.apply(this,arguments)}}()},{key:"submitPatientEvent",value:function(){var e=(0,r.default)((function*(e){if(!this._activePatientMRN)return console.error("[SESSION] Failed to submit patient event - active patient is null"),!1;var t=this.getActivePatient();if(null==t)return!1;t.addEvent(e),t.changelog.logEventCreation(e.id,this.loggedInAccount.id);var n=yield Ue.inst.updatePatient(t);return n&&this.fetchPatient(t.mrn),n}));return function(t){return e.apply(this,arguments)}}()},{key:"markPatientEvent",value:function(){var e=(0,r.default)((function*(e,t,n){n?t.markCompleted():t.markIncomplete(),e.changelog.logEventCompletion(t.id,this.loggedInAccount.id,n);var r=yield Ue.inst.updatePatient(e);return r&&this.fetchPatient(e.mrn),r}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"allocatePatient",value:function(){var e=(0,r.default)((function*(e,t){var n=this.getAllocatedPatientsTo(t);for(var r of n)if(r.mrn.matches(e.mrn))return!1;e.allocateTo(t.id),e.changelog.logAllocation(this.loggedInAccount.id,t.id);var i=yield this.updatePatient(e);return!!i&&(yield this.fetchAllocatedPatientsTo(t),i)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"unallocatePatient",value:function(){var e=(0,r.default)((function*(e,t){e.deallocate();var n=yield this.updatePatient(e);return!!n&&(yield this.fetchAllocatedPatientsTo(t),n)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"editPatient",value:function(){var e=(0,r.default)((function*(e){return e.changelog.logEdit(this.loggedInAccount.id),this.updatePatient(e)}));return function(t){return e.apply(this,arguments)}}()},{key:"submitNewWorker",value:function(){var e=(0,r.default)((function*(e){return Ve.inst.newWorkerCreated(e)}));return function(t){return e.apply(this,arguments)}}()},{key:"submitNewAdmin",value:function(){var e=(0,r.default)((function*(e){return Ve.inst.newAdminCreated(e)}));return function(t){return e.apply(this,arguments)}}()},{key:"submitNewLeader",value:function(){var e=(0,r.default)((function*(e){return Ve.inst.newLeaderCreated(e)}));return function(t){return e.apply(this,arguments)}}()},{key:"updatePatient",value:function(){var e=(0,r.default)((function*(e){var t=yield Ue.inst.updatePatient(e);return t&&O.patientUpdated.publish(),t}));return function(t){return e.apply(this,arguments)}}()},{key:"updateWorker",value:function(){var e=(0,r.default)((function*(e){return He.inst.updateWorker(e)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateAdmin",value:function(){var e=(0,r.default)((function*(e){return de.inst.updateAdmin(e)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateLeader",value:function(){var e=(0,r.default)((function*(e){return ye.inst.updateLeader(e)}));return function(t){return e.apply(this,arguments)}}()},{key:"deletePatient",value:function(){var e=(0,r.default)((function*(e){var t=yield Ue.inst.deletePatient(e);return t&&(delete this._patientStore[e.mrn.toString()],O.patientsFetched.publish()),t}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteWorker",value:function(){var e=(0,r.default)((function*(e){var t=yield He.inst.deleteWorker(e);return t&&(delete this._workerStore[e.id.toString()],O.workersFetched.publish()),t}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteLeader",value:function(){var e=(0,r.default)((function*(e){var t=yield ye.inst.deleteLeader(e);return t&&(delete this._leaderStore[e.id.toString()],O.leadersFetched.publish()),t}));return function(t){return e.apply(this,arguments)}}()},{key:"setLoggedInAccount",value:function(e){this._loggedInAccount=e}},{key:"setActivePatient",value:function(e){var t;this._activePatientMRN=null!=(t=null==e?void 0:e.mrn)?t:null,O.activePatientChanged.publish(),null!=e&&(this._patientStore[e.mrn.toString()]=e)}},{key:"setActiveWorker",value:function(e){var t;this._activeWorkerID=null!=(t=null==e?void 0:e.id)?t:null,O.activeWorkerChanged.publish(),null!=e&&(this._workerStore[e.id.toString()]=e)}},{key:"setActiveLeader",value:function(e){var t;this._activeLeaderID=null!=(t=null==e?void 0:e.id)?t:null,O.activeLeaderChanged.publish(),null!=e&&(this._leaderStore[e.id.toString()]=e)}},{key:"getActivePatient",value:function(){var e,t,n=null==(e=this._activePatientMRN)?void 0:e.toString();return n&&null!=(t=this._patientStore[n])?t:null}},{key:"getActiveWorker",value:function(){var e,t,n=null==(e=this._activeWorkerID)?void 0:e.toString();return n&&null!=(t=this._workerStore[n])?t:null}},{key:"getActiveLeader",value:function(){var e,t,n=null==(e=this._activeLeaderID)?void 0:e.toString();return n&&null!=(t=this._leaderStore[n])?t:null}},{key:"getAllWorkers",value:function(){return Object.values(this._workerStore)}},{key:"getAllHashedWorkers",value:function(){return Ze({},this._workerStore)}},{key:"getWorker",value:function(e){return this._workerStore[e.toString()]||null}},{key:"getAllLeaders",value:function(){return Object.values(this._leaderStore)}},{key:"getAllHashedLeaders",value:function(){return Ze({},this._leaderStore)}},{key:"getLeader",value:function(e){return this._leaderStore[e.toString()]||null}},{key:"getAllPatients",value:function(){return Object.values(this._patientStore)}},{key:"getAllHashedPatients",value:function(){return Ze({},this._patientStore)}},{key:"getAllocatedPatients",value:function(){return this.loggedInAccount.role.matches(_.worker)?this.getAllocatedPatientsTo(this.loggedInAccount):[]}},{key:"getAllocatedPatientsTo",value:function(e){return Object.values(this._patientStore).filter((function(t){var n;return null==(n=t.idAllocatedTo)?void 0:n.matches(e.id)}))}},{key:"getPatient",value:function(e){return this._patientStore[e.toString()]||null}},{key:"getAdmin",value:function(){var e=(0,r.default)((function*(e){return yield de.inst.getAdmin(e)}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchAllWorkers",value:function(){var e=(0,r.default)((function*(){var e=yield He.inst.getWorkers();for(var t of(this._workerStore={},e))this._workerStore[t.id.toString()]=t;O.workersFetched.publish()}));return function(){return e.apply(this,arguments)}}()},{key:"fetchWorker",value:function(){var e=(0,r.default)((function*(e){var t=yield He.inst.getWorker(e);null!=t?this._workerStore[t.id.toString()]=t:delete this._workerStore[e.toString()],O.workersFetched.publish()}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchAllLeaders",value:function(){var e=(0,r.default)((function*(){var e=yield ye.inst.getLeaders();for(var t of(this._leaderStore={},e))this._leaderStore[t.id.toString()]=t;O.leadersFetched.publish()}));return function(){return e.apply(this,arguments)}}()},{key:"fetchLeader",value:function(){var e=(0,r.default)((function*(e){var t=yield ye.inst.getLeader(e);null!=t?this._leaderStore[t.id.toString()]=t:delete this._leaderStore[e.toString()],O.leadersFetched.publish()}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchAllPatients",value:function(){var e=(0,r.default)((function*(){var e=yield Ue.inst.getPatients();for(var t of(this._patientStore={},e))this._patientStore[t.mrn.toString()]=t;O.patientsFetched.publish()}));return function(){return e.apply(this,arguments)}}()},{key:"fetchAllocatedPatients",value:function(){var e=(0,r.default)((function*(){if(this.loggedInAccount.role.matches(_.worker)){var e=this.loggedInAccount,t=yield Ue.inst.getPatientsAllocatedTo(e);for(var n of this.getAllPatients()){var r,i;null!=(r=null==(i=n.idAllocatedTo)?void 0:i.matches(e.id))&&r&&delete this._patientStore[n.mrn.toString()]}for(var o of t)this._patientStore[o.mrn.toString()]=o;O.patientsFetched.publish()}}));return function(){return e.apply(this,arguments)}}()},{key:"fetchAllocatedPatientsTo",value:function(){var e=(0,r.default)((function*(e){var t=yield Ue.inst.getPatientsAllocatedTo(e);for(var n of t)this._patientStore[n.mrn.toString()]=n;O.patientsFetched.publish()}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPatient",value:function(){var e=(0,r.default)((function*(e){var t=yield Ue.inst.getPatient(e);null!=t?this._patientStore[t.mrn.toString()]=t:delete this._patientStore[e.toString()],O.patientsFetched.publish()}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchAccount",value:function(){var e=(0,r.default)((function*(e){return yield Qe.inst.getAccount(e)}));return function(t){return e.apply(this,arguments)}}()},{key:"activateNewAccount",value:function(){var e=(0,r.default)((function*(e){return Qe.inst.newAccountCreated(e)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateAccount",value:function(){var e=(0,r.default)((function*(e){return Qe.inst.updateAccount(e)}));return function(t){return e.apply(this,arguments)}}()}]),e}();et.inst=new et;const tt=et;const nt=(0,f.default)((function e(t,n,r){(0,g.default)(this,e),this.title=t,this.component=n,this.options=r,this.id=M.generate()}));var rt=(0,f.default)((function e(){(0,g.default)(this,e)}));rt.sidebarComponentChanged=new w,rt.screenStackUpdated=new w;const it=rt;var ot=function(){function e(){(0,g.default)(this,e),this._focusedInterfaceSection=void 0,this._sidebarComponent=void 0,this._sidebarHeader=void 0,this._screens=[],this.loadedNavigation=function(){}}return(0,f.default)(e,[{key:"focusedInterfaceSection",get:function(){return this._focusedInterfaceSection}},{key:"sidebarComponent",get:function(){return this._sidebarComponent}},{key:"sidebarHeader",get:function(){return this._sidebarHeader}},{key:"screens",get:function(){return this._screens}},{key:"setSidebarComponent",value:function(e,t){this._sidebarComponent=e,this._sidebarHeader=t,it.sidebarComponentChanged.publish()}},{key:"clearScreens",value:function(){this._screens=[],it.screenStackUpdated.publish()}},{key:"setStartingScreen",value:function(e){this._screens=[e]}},{key:"navigateBack",value:function(e){void 0!=e&&e.canGoBack()?(this._screens.pop(),e.goBack()):this._screens=[],it.screenStackUpdated.publish()}},{key:"navigateTo",value:function(e,t,n){var r=this;void 0==t&&(this._screens=[]);var i=new nt(null!=n?n:"",e);this._screens.push(i),this.loadedNavigation=function(){r._screens.length>1&&void 0!=t&&t.navigate(i.id.toString())},it.screenStackUpdated.publish()}},{key:"setFocusedInterfaceSection",value:function(e){tt.inst.setActivePatient(null),this._focusedInterfaceSection=e}}]),e}();ot.inst=new ot;const at=ot;const lt=(0,f.default)((function e(t,n,r,i,o){var a=this;(0,g.default)(this,e),this.title=t,this.focusedIcon=i,this.icon=o,this.id=M.generate(),this.activateOnTabBar=function(){at.inst.setFocusedInterfaceSection(a.id),a._activateOnTabBar()},this.activateOnDrawer=function(){at.inst.setFocusedInterfaceSection(a.id),a._activateOnDrawer()},this._activateOnTabBar=n,this._activateOnDrawer=r}));var ct=n(4255),st=function(e){return e.Filled="contained",e.Outlined="outlined",e}({}),ut=n(5899),dt=function(e){return e.GilroyExtraBold="Gilroy-ExtraBold",e.PoppinsMedium="Poppins-Medium",e.PoppinsSemiBold="Poppins-SemiBold",e.PoppinsBold="Poppins-Bold",e.PoppinsMediumItalic="Poppins-MediumItalic",e.PoppinsSemiBoldItalic="Poppins-SemiBoldItalic",e.PoppinsBoldItalic="Poppins-BoldItalic",e.CircularMedium="CircularStd-Medium",e.CircularBold="CircularStd-Bold",e.CircularBlack="CircularStd-Black",e.CircularMediumItalic="CircularStd-MediumItalic",e.CircularBoldItalic="CircularStd-BoldItalic",e.CircularBlackItalic="CircularStd-BlackItalic",e}({}),ft=function(e){return e[e.Regular=0]="Regular",e[e.SemiBold=1]="SemiBold",e[e.Bold=2]="Bold",e[e.Black=3]="Black",e}({});const gt=function(){function e(t,n,r,i,o,a,l,c){(0,g.default)(this,e),this.regular=t,this.semiBold=n,this.bold=r,this.black=i,this.italic=o,this.semiBoldItalic=a,this.boldItalic=l,this.blackItalic=c}return(0,f.default)(e,[{key:"getFont",value:function(e,t){switch(e){case ft.Regular:var n=t?this.italic:this.regular;return A(null!=n,"Font requested not provided/available"),n;case ft.SemiBold:var r=t?this.semiBoldItalic:this.semiBold;return A(null!=r,"Font requested not provided/available"),r;case ft.Bold:var i=t?this.boldItalic:this.bold;return A(null!=i,"Font requested not provided/available"),i;case ft.Black:var o=t?this.blackItalic:this.black;return A(null!=o,"Font requested not provided/available"),o;default:throw new m(e)}}}]),e}();var pt=function(e){return e[e.Gilroy=0]="Gilroy",e[e.Poppins=1]="Poppins",e[e.Circular=2]="Circular",e}({});(pt||(pt={})).getConfig=function(e){switch(e){case pt.Gilroy:return new gt(null,null,null,dt.GilroyExtraBold,null,null,null,null);case pt.Poppins:return new gt(dt.PoppinsMedium,dt.PoppinsSemiBold,dt.PoppinsBold,null,dt.PoppinsMediumItalic,dt.PoppinsSemiBoldItalic,dt.PoppinsBoldItalic,null);case pt.Circular:return new gt(dt.CircularMedium,null,dt.CircularBold,dt.CircularBlack,dt.CircularMediumItalic,null,dt.CircularBoldItalic,dt.CircularBlackItalic);default:throw new m(e)}};var ht=function(e){return e[e.Dark=0]="Dark",e[e.Light=1]="Light",e}({});(ht||(ht={})).toString=function(e){switch(e){case ht.Dark:return"Dark Mode";case ht.Light:return"Light Mode";default:throw new m(e)}};var vt=n(7691),yt=n(6337),bt=n(7132),mt=function(e){return e[e.IOS=0]="IOS",e[e.Android=1]="Android",e[e.Web=2]="Web",e[e.Windows=3]="Windows",e[e.MacOS=4]="MacOS",e[e.Other=5]="Other",e}({});(mt||(mt={})).toString=function(e){switch(e){case mt.IOS:return"iOS";case mt.Android:return"Android";case mt.Windows:return"Windows";case mt.MacOS:return"macOS";case mt.Web:return"Web";case mt.Other:return"Unknown";default:throw new m(e)}};var St=function(e){return e[e.Mobile=0]="Mobile",e[e.Large=1]="Large",e}({});(St||(St={})).toString=function(e){switch(e){case St.Mobile:return"Mobile";case St.Large:return"Large";default:throw new m(e)}};var wt=function(e){return e.Potrait="Potrait",e.Landscape="Landscape",e}({}),xt=function(e){return e[e.linearNavigator=0]="linearNavigator",e[e.tabNavigator=1]="tabNavigator",e[e.drawerNavigator=2]="drawerNavigator",e}({}),jt=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,[{key:"getColorScheme",value:function(){return"dark"===vt.default.getColorScheme()?ht.Dark:ht.Light}},{key:"getOS",value:function(){switch(bt.default.OS){case"android":return mt.Android;case"ios":return mt.IOS;case"windows":return mt.Windows;case"macos":return mt.MacOS;case"web":return mt.Web;default:return mt.Other}}},{key:"getScreenType",value:function(){var e=this.getOS();switch(e){case mt.IOS:return bt.default.isPad?St.Large:St.Mobile;case mt.Android:return St.Mobile;case mt.Windows:case mt.MacOS:return St.Large;case mt.Web:case mt.Other:return this.getScreenWidth()<=925?St.Mobile:St.Large;default:throw new m(e)}}},{key:"getNavigatorFromScreenWidth",value:function(){return this.getScreenWidth()>850?xt.drawerNavigator:xt.tabNavigator}},{key:"getScreenOrientation",value:function(){var e=this.getScreenDimensions();return e[0]>e[1]?wt.Landscape:wt.Potrait}},{key:"getScreenWidth",value:function(){return yt.default.get("window").width}},{key:"getScreenHeight",value:function(){return yt.default.get("window").height}},{key:"getScreenDimensions",value:function(){return[yt.default.get("window").width,yt.default.get("window").height]}}]),e}();jt.inst=new jt;const kt=jt;const Ot=function(){function e(t,n){(0,g.default)(this,e);var r=n||t;this.lightMode=t,this.darkMode=r,A(this.isValidColor(this.lightMode),"Invalid color provided: "+this.lightMode),A(this.isValidColor(this.darkMode),"Invalid color provided: "+this.darkMode)}return(0,f.default)(e,[{key:"getColor",value:function(){var e=kt.inst.getColorScheme();switch(e){case ht.Dark:return this.darkMode;case ht.Light:return this.lightMode;default:throw new m(e)}}},{key:"isValidColor",value:function(e){return!!/^#([0-9A-F]{3}){1,2}$/i.test(e)||(!!/(^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$)|(^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),(0?(\.\d{1,2})?|1)\)$)|(^hsl\((\d{1,3}),(\d{1,3})%,(\d{1,3})%\)$)|(^hsla\((\d{1,3}),(\d{1,3})%,(\d{1,3})%,(0?(\.\d{1,2})?|1)\)$)/i.test(e)||(!!/^(red|blue|green|black|white|gray|cyan|yellow|magenta|aqua|fuchsia|lime|maroon|navy|olive|purple|silver|teal)$/i.test(e)||"transparent"==e))}}]),e}();const Ct=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,null,[{key:"transparent",get:function(){return new Ot("transparent")}},{key:"shadow",get:function(){return new Ot("black")}},{key:"accent",get:function(){return new Ot("#4f37cc")}},{key:"mediumAccent",get:function(){return new Ot("#7e61ed")}},{key:"lightAccent",get:function(){return new Ot("#ded6ff")}},{key:"textBlack",get:function(){return new Ot("#212529")}},{key:"textDark",get:function(){return new Ot("#3f4169")}},{key:"textSemiDark",get:function(){return new Ot("#a6a8c5")}},{key:"textWhite",get:function(){return new Ot("white")}},{key:"textLight",get:function(){return new Ot("#f8f9fa")}},{key:"textSemiLight",get:function(){return new Ot("#b6b8bb")}},{key:"textError",get:function(){return new Ot("#e03131")}},{key:"textSuccess",get:function(){return new Ot("#099268")}},{key:"textUnderlyingAccent",get:function(){return new Ot("#c6bcd6")}},{key:"textInputDescription",get:function(){return new Ot("#99989a")}},{key:"textBackgroundDark",get:function(){return new Ot("#f4f5f7")}},{key:"textBackgroundLight",get:function(){return new Ot("#ffffff")}},{key:"textBackgroundAccent",get:function(){return new Ot("#f1edfc")}},{key:"screenBackgroundLight",get:function(){return new Ot("#ffffff")}},{key:"screenBackgroundSemiLight",get:function(){return new Ot("#fafafa")}},{key:"fillBackgroundLight",get:function(){return new Ot("#f2f3f9")}},{key:"fillBackgroundAccent",get:function(){return new Ot("#f1edfc")}},{key:"fillBackgroundGreen",get:function(){return new Ot("#97fc6f")}},{key:"fillBackgroundRed",get:function(){return new Ot("#e03131")}},{key:"fillBackgroundLightPopUp",get:function(){return new Ot("#e2e2e8")}},{key:"outlineTextBackgroundDark",get:function(){return new Ot("#e9e3e5")}},{key:"outlineTextBackgroundAccent",get:function(){return new Ot("#ded8e8")}},{key:"divider",get:function(){return new Ot("gray")}},{key:"lightDivider",get:function(){return new Ot("#d3d3d3")}},{key:"triageCode",value:function(e){if(e.matches(Ie.immediate))return new Ot("#e03131");if(e.matches(Ie.emergency))return new Ot("#fd7e14");if(e.matches(Ie.urgent))return new Ot("#32b24a");if(e.matches(Ie.semiUrgent))return new Ot("#2c8ae6");if(e.matches(Ie.nonUrgent))return new Ot("#ffffff");throw new m(e)}},{key:"textTriageCode",value:function(t){return t.matches(Ie.nonUrgent)?e.textDark:e.textLight}},{key:"sessionAllocated",value:function(e){switch(e){case Se.morning:return new Ot("#74b816");case Se.afternoon:return new Ot("#fd7e14");case Se.night:return new Ot("#1765e3");default:return new Ot("#e03131")}}}]),e}();var Pt=n(4333);const Dt=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ft.Regular,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;(0,g.default)(this,e),this.size=t,this.fontFamily=n,this.leafColor=r,this.weight=i,this.italic=o,this.underlined=a,this.linedOut=l,this.kerning=c}return(0,f.default)(e,[{key:"font",get:function(){return pt.getConfig(this.fontFamily).getFont(this.weight,this.italic)}},{key:"color",get:function(){var e;return null==(e=this.leafColor)?void 0:e.getColor()}},{key:"lineStyle",get:function(){var e="";return this.underlined||this.linedOut?(this.underlined&&(e="underline"),this.linedOut&&(e=(e+" line-through").trimStart())):e="none",e}},{key:"withSize",value:function(e){return this.size=e,this}},{key:"withColor",value:function(e){return this.leafColor=e,this}},{key:"withWeight",value:function(e){return this.weight=e,this}},{key:"withItalic",value:function(e){return this.italic=e,this}},{key:"withUnderline",value:function(e){return this.underlined=e,this}},{key:"withLineOut",value:function(e){return this.linedOut=e,this}},{key:"getStylesheet",value:function(){return Pt.default.create({typography:{color:this.color,fontFamily:this.font,fontSize:this.size,letterSpacing:this.kerning,textDecorationLine:this.lineStyle}}).typography}}]),e}();const At=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,null,[{key:"display",get:function(){return new Dt(70,pt.Gilroy,Ct.textDark,ft.Black)}},{key:"headerScreen",get:function(){return new Dt(40,pt.Circular,Ct.textDark,ft.Black,!1,!1,!1,-.5)}},{key:"headerSection",get:function(){return e.headerScreen.withSize(24)}},{key:"title1",get:function(){return new Dt(28,pt.Poppins,Ct.textDark,ft.Bold)}},{key:"title2",get:function(){return new Dt(24,pt.Poppins,Ct.textDark,ft.SemiBold)}},{key:"title3",get:function(){return new Dt(20,pt.Poppins,Ct.textDark,ft.SemiBold)}},{key:"title4",get:function(){return new Dt(16,pt.Poppins,Ct.textDark,ft.SemiBold)}},{key:"body",get:function(){return new Dt(15,pt.Poppins,Ct.textDark)}},{key:"subscript",get:function(){return new Dt(13,pt.Poppins,Ct.textSemiDark)}},{key:"subscriptLabel",get:function(){return new Dt(10,pt.Poppins,Ct.textSemiDark)}},{key:"chip",get:function(){return new Dt(11.5,pt.Poppins,Ct.textLight,ft.SemiBold)}},{key:"button",get:function(){return new Dt(18,pt.Poppins,Ct.textLight,ft.Bold)}},{key:"buttonSmall",get:function(){return new Dt(15,pt.Poppins,Ct.textDark)}},{key:"textButton",get:function(){return new Dt(18,pt.Poppins,Ct.accent,ft.Bold)}},{key:"plainTextButton",get:function(){return new Dt(18,pt.Poppins,Ct.textDark,ft.Bold)}},{key:"drawerTitle",get:function(){return new Dt(32,pt.Circular,Ct.textDark,ft.Black,!1,!1,!1,-.5)}},{key:"drawerItem",get:function(){return new Dt(15,pt.Poppins,Ct.textDark)}},{key:"badge",get:function(){return new Dt(18,pt.Poppins,void 0,ft.Bold)}},{key:"error",get:function(){return new Dt(15,pt.Poppins,Ct.textError,ft.Regular,!0)}}]),e}();var Tt=n(7557);const Et=function(e){var t=e.children,n=e.typography,r=void 0===n?At.body:n,i=e.verticalWrap,o=void 0!==i&&i,a=e.wide,l=void 0===a||a,c=e.style,s=r.fontFamily==pt.Poppins?1.15:1;return(0,Tt.jsx)(ut.default,{style:[l?{width:"100%"}:{alignSelf:"center"},r.getStylesheet(),o?{lineHeight:r.size*s}:null,c],children:t})};var It=n(8956);const Nt=function(e){var t=e.label,n=e.type,r=void 0===n?st.Filled:n,i=e.typography,o=void 0===i?At.button:i,a=e.color,l=void 0===a?Ct.accent:a,c=e.icon,s=void 0===c?null:c,u=e.disabled,d=void 0!==u&&u,f=e.wide,g=void 0===f||f,p=e.style,h=e.onPress,v={};return kt.inst.getOS()==mt.IOS?v={lineHeight:0}:kt.inst.getOS()==mt.Android&&(v={lineHeight:24}),d&&(o.leafColor=void 0),(0,Tt.jsx)(ct.default,{icon:s?function(e){var t=e.size;return(0,Tt.jsx)(It.default,{name:s,size:t+8,color:o.color,style:{paddingLeft:6}})}:void 0,mode:r,onPress:h,disabled:d,labelStyle:[{padding:2},v],style:[{borderRadius:50},g?{width:"100%"}:{alignSelf:"center"},p],buttonColor:l.getColor(),children:(0,Tt.jsx)(Et,{typography:o,children:t})})};var Bt=n(196),Wt=n(4637);function Lt(e){return e.split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join(" ")}var Mt=n(2652),Ut=n.n(Mt),_t=function(e){var t=e.children,n=e.spacing,r=void 0===n?0:n,i=e.verticalSpacing,o=void 0===i?null:i,a=e.onLayout,l=e.style;return(0,Tt.jsx)(s.default,{onLayout:a,style:[Ft.container,{columnGap:r,rowGap:null==o?r:o},l],children:t})},Ft=Pt.default.create({container:{flexDirection:"row",flexWrap:"wrap"}});_t.propTypes={children:Ut().node.isRequired,style:Ut().oneOfType([Ut().object,Ut().array]),spacing:Ut().number},_t.defaultProps={style:{},spacing:0};const Rt=_t;var Ht=function(e){var t=e.children,n=e.spacing,r=void 0===n?0:n,i=e.horizontalSpacing,o=void 0===i?null:i,a=e.onLayout,l=e.style;return(0,Tt.jsx)(s.default,{onLayout:a,style:[zt.container,{columnGap:null==o?r:o,rowGap:r},l],children:t})},zt=Pt.default.create({container:{flexDirection:"column",flexWrap:"wrap"}});Ht.propTypes={children:Ut().node.isRequired,style:Ut().oneOfType([Ut().object,Ut().array]),spacing:Ut().number},Ht.defaultProps={style:{},spacing:0};const Vt=Ht;const Gt=function(e){var t=e.size;return(0,Tt.jsx)(s.default,{style:{height:t}})};var qt=function(e){var t=e.visible,n=e.setVisible,r=e.onCancel,i=e.onDone,a=e.backgroundColour,l=e.title,u=e.titleTypography,d=void 0===u?At.title2.withWeight(ft.Bold):u,f=e.children,g=e.cancelLabel,p=void 0===g?void 0:g,h=e.doneLabel,v=void 0===h?void 0:h,y=(0,c.useState)(kt.inst.getScreenWidth()),b=(0,o.default)(y,2),m=b[0],S=b[1];(0,c.useEffect)((function(){yt.default.addEventListener("change",(function(){var e=kt.inst.getScreenWidth();S(e)}))}),[]);var w=At.textButton;return w.weight=ft.Regular,w.leafColor=Ct.mediumAccent,(0,Tt.jsxs)(Bt.default,{visible:t,animationType:"fade",style:{flex:1},transparent:!0,children:[(0,Tt.jsx)(s.default,{style:{flex:1,top:0,bottom:0,left:0,right:0,position:"absolute",backgroundColor:"black",opacity:.5}}),(0,Tt.jsx)(Wt.default,{onPress:function(){return n(!1)},style:{justifyContent:"center",alignItems:"center",zIndex:1,flex:1},children:(0,Tt.jsx)(Wt.default,{onPressOut:function(e){return e.stopPropagation()},style:{width:m>800?"50%":"90%"},children:(0,Tt.jsxs)(Vt,{style:{justifyContent:"center",alignItems:"center",width:"100%",backgroundColor:(null==a?void 0:a.getColor())||Ct.fillBackgroundLightPopUp.getColor(),borderRadius:20,shadowColor:Ct.shadow.getColor(),shadowOffset:{width:0,height:4},shadowOpacity:kt.inst.getOS()==mt.Web?.16:.12,shadowRadius:kt.inst.getOS()==mt.Web?12:7},children:[(0,Tt.jsxs)(Vt,{style:{paddingHorizontal:20,paddingTop:22,paddingBottom:32,width:"100%"},spacing:10,children:[(0,Tt.jsx)(Et,{typography:d,style:{textAlign:"center"},children:Lt(l)}),(0,Tt.jsx)(Gt,{size:2}),f]}),(0,Tt.jsxs)(Rt,{style:{paddingBottom:20,paddingHorizontal:20,width:"100%"},spacing:20,children:[(0,Tt.jsx)(Nt,{label:null!=p?p:I("button.cancel"),onPress:r,typography:At.button.withColor(Ct.textSemiDark),color:Ct.fillBackgroundLight,wide:!1,style:{flex:1}}),(0,Tt.jsx)(Nt,{label:null!=v?v:I("button.done"),onPress:i,wide:!1,style:{flex:1}})]})]})})})]})},Jt=n(1451);const Yt=function(e){var t=e.icon,n=e.color,r=e.size,i=e.style;return(0,Tt.jsx)(It.default,{name:t,size:r,color:n.getColor(),style:i})};const $t=function(e){var t=e.typography,n=void 0===t?At.textButton:t,r=e.wide,i=void 0!==r&&r,o=e.icon,a=e.iconSize,l=e.iconColor,c=e.label,s=e.onPress,u=e.style;return(0,Tt.jsx)(Jt.default,{onPress:s,style:u,children:(0,Tt.jsxs)(Rt,{spacing:4,style:{width:"100%",alignItems:"center"},children:[(0,Tt.jsx)(Et,{typography:n,wide:i,children:c}),void 0!=o?(0,Tt.jsx)(Yt,{icon:o,color:l||Ct.accent,size:a||20}):null]})})};var Kt=n(3497),Qt=n(2940);function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const en=function(e){var t=e.label,n=e.textColor,r=void 0===n?Ct.textDark:n,i=e.color,a=void 0===i?Ct.textBackgroundDark:i,l=e.wide,u=void 0===l||l,d=e.valid,f=void 0===d?void 0:d,g=e.style,p=e.onTextChange,h=(0,c.useState)(""),v=(0,o.default)(h,2),y=v[0],b=v[1],m=(0,c.useState)(!1),S=(0,o.default)(m,2),w=S[0],x=S[1],j=(0,c.useRef)(null),k=At.body.withColor(r);void 0!=f&&k.withColor(f?Ct.textSuccess:Ct.textError);var C=At.body.withColor(Ct.textSemiDark);return(0,c.useEffect)((function(){var e=O.clearAllInputs.subscribe((function(){b(""),p("")}));return function(){e()}}),[]),(0,Tt.jsxs)(s.default,{style:[u?{width:"100%"}:{alignSelf:"center"},{flexDirection:"row",backgroundColor:a.getColor(),borderRadius:12,borderColor:w?k.color:a.getColor(),borderWidth:2}],children:[(0,Tt.jsx)(Qt.default,{onPress:function(){j.current&&j.current.focus()},children:(0,Tt.jsx)(s.default,{style:Zt({position:"absolute",flexDirection:"row",height:"100%",paddingHorizontal:16},bt.default.select({web:{cursor:"text"}})),children:(0,Tt.jsx)(Et,{typography:C,style:{alignSelf:"center"},children:0==y.length?t:""})})}),(0,Tt.jsx)(Kt.default,{ref:j,style:[u?{width:"100%"}:{alignSelf:"center"},Zt({paddingVertical:12,paddingHorizontal:16},bt.default.select({web:{outlineStyle:"none"}})),k.getStylesheet(),g],onChangeText:function(e){b(e),p(e)},value:y,onFocus:function(){return x(!0)},onBlur:function(){return x(!1)}})]})};var tn=(0,f.default)((function e(){(0,g.default)(this,e)}));tn.cardTopPadding=8,tn.cardPadding=18,tn.fillRadius=16,tn.screenTopPadding=8,tn.screenPadding=22,tn.screenSpacing=8,tn.cardSpacing=14,tn.borderWidth=.5,tn.drawerWidth=220,tn.minSidebarWidth=250,tn.maxSidebarWidth=350,tn.textInputSpacing=10;const nn=tn;var rn=Pt.default.create({container:{borderRadius:nn.fillRadius,padding:nn.cardPadding}});const on=function(e){var t=e.color,n=void 0===t?Ct.fillBackgroundLight:t,r=e.onPress,i=void 0===r?null:r,o=e.children,a=e.style;return null==i?(0,Tt.jsx)(s.default,{style:[rn.container,{backgroundColor:n.getColor()},a],children:o}):(0,Tt.jsx)(Jt.default,{style:[rn.container,{backgroundColor:n.getColor()},a],onPress:i,children:o})};const an=function(e){var t=e.style;return(0,Tt.jsx)(s.default,{style:[{flex:1},t]})};const ln=function(e){e.navigation;var t=c.useState(tt.inst.loggedInAccount),n=(0,o.default)(t,2),r=n[0],i=n[1],a=c.useState((null==r?void 0:r.firstName)||I("label.loading")),l=(0,o.default)(a,2),u=l[0],d=l[1],f=c.useState((null==r?void 0:r.lastName)||I("label.loading")),g=(0,o.default)(f,2),p=g[0],h=g[1],v=c.useState((null==r?void 0:r.email)||I("label.loading")),y=(0,o.default)(v,2),b=y[0],S=y[1];(0,c.useEffect)((function(){var e=O.workersFetched.subscribe((function(){var e=tt.inst.loggedInAccount;i(e),d((null==e?void 0:e.firstName)||""),h((null==e?void 0:e.lastName)||""),S((null==e?void 0:e.email)||"")}));return tt.inst.fetchWorker(tt.inst.loggedInAccount.id),function(){e()}}),[]);var w=function(e){null!=e&&function(e){switch(O.loginStatus.read()){case j.Admin:de.inst.updateAdmin(e);break;case j.Leader:ye.inst.updateLeader(e);break;case j.Worker:He.inst.updateWorker(e);break;default:throw new m("Invalid login status")}tt.inst.setLoggedInAccount(e)}(e)},x="",k="",C=(0,c.useState)(!1),P=(0,o.default)(C,2),D=P[0],A=P[1],T="",E=(0,c.useState)(!1),N=(0,o.default)(E,2),B=N[0],W=N[1],L=function(){A(!1),W(!1)},M=At.textButton;return M.size=15,(0,Tt.jsxs)(s.default,{style:{flex:1,backgroundColor:Ct.screenBackgroundLight.getColor(),padding:nn.screenPadding,paddingTop:nn.screenTopPadding},children:[(0,Tt.jsxs)(Vt,{spacing:nn.screenSpacing,style:{flex:1},children:[(0,Tt.jsxs)(on,{children:[(0,Tt.jsx)(Et,{typography:At.title2.withWeight(ft.Bold),children:I("label.details")}),(0,Tt.jsx)(Gt,{size:8}),(0,Tt.jsxs)(Rt,{spacing:6,style:{width:"100%",paddingBottom:5,alignItems:"center"},children:[(0,Tt.jsxs)(Et,{typography:At.body,wide:!1,children:[u," ",p]}),(0,Tt.jsx)(an,{}),(0,Tt.jsx)($t,{label:I("button.edit").toUpperCase(),typography:M,onPress:function(){return A(!0)}})]}),(0,Tt.jsxs)(Rt,{spacing:6,style:{width:"100%",alignItems:"center"},children:[(0,Tt.jsx)(Et,{typography:At.body,wide:!1,children:b}),(0,Tt.jsx)(an,{}),(0,Tt.jsx)($t,{label:I("button.edit").toUpperCase(),typography:M,onPress:function(){return W(!0)}})]})]}),(0,Tt.jsx)(an,{}),(0,Tt.jsx)(Nt,{label:I("button.logout"),onPress:function(){O.loginStatus.publish(j.LoggedOut)}})]}),(0,Tt.jsxs)(qt,{visible:D,setVisible:A,title:I("label.editName"),onDone:function(){d(x),h(k),A(!1),null!=r&&(r.setFirstName(x),r.setLastName(k)),w(r)},onCancel:L,children:[(0,Tt.jsx)(en,{label:I("inputLabel.givenName"),onTextChange:function(e){x=e}}),(0,Tt.jsx)(en,{label:I("inputLabel.surname"),onTextChange:function(e){k=e}})]}),(0,Tt.jsx)(qt,{visible:B,setVisible:W,title:I("label.editEmail"),onDone:function(){S(T),W(!1),null!=r&&(r.email=T),w(r)},onCancel:L,children:(0,Tt.jsx)(en,{label:I("inputLabel.email"),onTextChange:function(e){T=e}})})]})};var cn=n(3693);function sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const dn=function(e){var t,n=e.options,r=e.value,i=e.selectedLabelColor,a=void 0===i?Ct.textLight:i,l=e.selectedBackgroundColor,s=void 0===l?Ct.textDark:l,u=e.label,d=e.labeled,f=void 0===d||d,g=e.valueLabel,p=e.style,h=e.onSetValue,v=e.locked,y=void 0!==v&&v,b=e.clearSelectionAllowed,m=void 0===b||b,S=(0,c.useState)(r),w=(0,o.default)(S,2),x=w[0],j=w[1];return(0,c.useEffect)((function(){if(m){var e=O.clearAllInputs.subscribe((function(){j(void 0),h(void 0)}));return function(){e()}}}),[]),(0,Tt.jsxs)(Vt,{style:un({width:"100%"},p),children:[f?(0,Tt.jsxs)(Rt,{style:{width:"100%"},children:[(0,Tt.jsx)(Et,{typography:At.subscript,wide:!1,children:u}),(0,Tt.jsx)(an,{}),(0,Tt.jsx)(Et,{typography:At.subscript.withColor(s),wide:!1,children:null!=(t=null!=g?g:null==x?void 0:x.label)?t:""})]}):null,(0,Tt.jsx)(Gt,{size:8}),(0,Tt.jsx)(Rt,{spacing:8,style:{width:"100%"},children:n.map((function(e){var t,n;return(0,Tt.jsx)(on,{style:{flex:1,paddingVertical:16},onPress:function(){y||(j(e),h(e))},color:(null!=(t=null==x?void 0:x.id)?t:"")==e.id?s:void 0,children:(0,Tt.jsx)(Et,{wide:!1,style:{color:(null!=(n=null==x?void 0:x.id)?n:"")==e.id?a.getColor():void 0},children:e.label})},e.id)}))})]})};const fn=function(){function e(t,n){(0,g.default)(this,e),this.value=t,this.label=n}return(0,f.default)(e,[{key:"id",get:function(){return this.label}}]),e}();var gn=Pt.default.create({container:{borderRadius:50,paddingVertical:6,paddingHorizontal:12,alignSelf:"flex-start"}});const pn=function(e){var t=e.color,n=e.onPress,r=void 0===n?null:n,i=e.children,o=e.style;return null==r?(0,Tt.jsx)(s.default,{style:[gn.container,{backgroundColor:t.getColor()},o],children:i}):(0,Tt.jsx)(Jt.default,{onPress:r,disabled:null==r,children:(0,Tt.jsx)(s.default,{style:[gn.container,{backgroundColor:t.getColor()},o],children:i})})};var hn=function(e){return e[e.Small=22]="Small",e[e.Medium=30]="Medium",e[e.Large=40]="Large",e}({});const vn=function(e){var t=e.size;return(0,Tt.jsx)(s.default,{style:{width:t}})};const yn=function(e){var t=e.label,n=e.description,r=e.size,i=e.icon,o=e.onPress,a=At.title3,l=kt.inst.getOS()==mt.Web?(null!=r?r:20)-20:(null!=r?r:1)-1;return(0,Tt.jsx)(on,{onPress:o,style:{flex:void 0==r?1:void 0,width:void 0==r?void 0:l},children:(0,Tt.jsxs)(Vt,{style:{flexWrap:"nowrap"},children:[(0,Tt.jsx)(s.default,{style:{borderRadius:12,padding:8,backgroundColor:Ct.accent.getColor(),alignSelf:"flex-start"},children:(0,Tt.jsx)(Yt,{icon:i,color:Ct.textWhite,size:hn.Medium})}),(0,Tt.jsx)(Gt,{size:20}),(0,Tt.jsx)(Et,{typography:a,children:t}),(0,Tt.jsx)(Gt,{size:5}),(0,Tt.jsx)(Et,{typography:At.subscript,children:n})]})})};var bn=function(){return(0,Tt.jsx)(Vt,{style:{flex:1,alignItems:"center",width:"100%",backgroundColor:Ct.screenBackgroundLight.getColor(),justifyContent:"center"},children:(0,Tt.jsx)(Et,{typography:At.body.withColor(Ct.textError),style:{textAlign:"center"},children:I("label.anErrorOccurred")})})};function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const wn=function(e){var t=e.backgroundColor,n=void 0===t?Ct.screenBackgroundLight:t,r=e.centerContent,i=void 0!==r&&r,o=e.children,a=e.style;return(0,Tt.jsx)(s.default,{style:Sn({backgroundColor:n.getColor(),flex:1},a),children:(0,Tt.jsx)(cn.ScrollView,{style:{flex:1,paddingTop:nn.screenTopPadding,paddingHorizontal:nn.screenPadding},contentContainerStyle:Sn({},i&&{flexGrow:1,justifyContent:"center",alignItems:"center"}),children:(0,Tt.jsx)(s.default,{style:{width:"100%",paddingBottom:nn.screenPadding},children:o})})})};var xn=n(7301);const jn=function(e){var t=e.navigation,n=nn.screenSpacing,i=At.body,o=tt.inst.getActivePatient();if(!o)return(0,Tt.jsx)(bn,{});var a=function(){var e=(0,r.default)((function*(e){var t="tel:"+e;(yield xn.default.canOpenURL(t))||console.log("[ACTION SCREEN] Phone number is not available");try{yield xn.default.openURL(t)}catch(n){console.log("[ACTIONS SCREEN] Could not call number")}}));return function(t){return e.apply(this,arguments)}}();return(0,Tt.jsx)(wn,{children:(0,Tt.jsxs)(Vt,{spacing:nn.cardSpacing,style:{flex:1},children:[(0,Tt.jsxs)(on,{style:{width:"100%"},children:[(0,Tt.jsx)(Et,{typography:At.subscript,children:I("actions.arrivalWard")}),(0,Tt.jsx)(Et,{typography:At.title2,children:o.triageCase.arrivalWard.name})]}),(0,Tt.jsxs)(on,{children:[(0,Tt.jsx)(Et,{typography:At.title3.withWeight(ft.Bold),children:Lt(I("actions.steps"))}),(0,Tt.jsx)(Gt,{size:16}),(0,Tt.jsx)(Vt,{spacing:12,children:o.triageCase.triageCode.getSteps().map((function(e,t){return(0,Tt.jsxs)(Et,{wide:!1,typography:i,style:{alignSelf:"flex-start"},children:[t+1,": ",e]},e)}))})]}),(0,Tt.jsxs)(Rt,{spacing:n,style:{flex:1,justifyContent:"center"},children:[(0,Tt.jsx)(yn,{label:o.phoneNumber,description:I("actions.callPatient",o.fullName),icon:"phone",onPress:function(){a(o.phoneNumber)}}),(0,Tt.jsx)(yn,{label:I("actions.emergency"),description:I("actions.callEmergency"),icon:"alert",onPress:function(){}})]}),(0,Tt.jsx)(an,{}),(0,Tt.jsx)(Nt,{label:I("button.done"),onPress:function(){at.inst.navigateBack(t)}})]})})};function kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Cn=function(e){var t,n=e.label,r=e.textColor,i=void 0===r?Ct.textDark:r,a=e.color,l=void 0===a?Ct.textBackgroundDark:a,s=e.wide,u=void 0===s||s,d=e.valid,f=void 0===d?void 0:d,g=e.style,p=e.onChange,h=e.initialValue,v=e.locked,y=void 0!==v&&v,b=e.lockedColor,m=void 0===b?Ct.textBackgroundLight:b,S=(0,c.useState)(void 0==(t=h)?"":String(t.getDate()).padStart(2,"0")+"/"+String(t.getMonth()+1).padStart(2,"0")+"/"+t.getFullYear()),w=(0,o.default)(S,2),x=w[0],j=w[1],k=(0,c.useState)(!1),C=(0,o.default)(k,2),P=C[0],D=C[1],A=(0,c.useState)(i),T=(0,o.default)(A,2),E=T[0],N=T[1],B=(0,c.useState)(l),W=(0,o.default)(B,2),L=W[0],M=W[1],U=function(e){var t=e.replace(/\D/g,"");return t.length<=2?t:t.length<=4?t.slice(0,2)+"/"+t.slice(2):t.slice(0,2)+"/"+t.slice(2,4)+"/"+t.slice(4,8)},_=function(e){if(e.length<10)return!1;var t,n=e.split("/").map((function(e){return parseInt(e,10)})),r=(0,o.default)(n,3),i=r[0],a=r[1],l=r[2];if(a>12)return!1;switch(a){case 2:t=l%4!==0||l%100===0&&l%400!==0?28:29;break;case 4:case 6:case 9:case 11:t=30;break;default:t=31}return i<=t},F=function(e){if(_(e)){var t=e.split("/").map(Number),n=(0,o.default)(t,3),r=n[0],i=n[1],a=n[2];return new Date(a,i-1,r)}},R=(0,c.useState)(!1),H=(0,o.default)(R,2),z=H[0],V=H[1],G=(0,c.useRef)(null),q=At.body.withColor(E),J=At.error;J.size=At.subscriptLabel.size;var Y=At.subscript,$=void 0==f?Y.color:f?Ct.textSuccess.getColor():Ct.textError.getColor();return(0,c.useEffect)((function(){var e=O.clearAllInputs.subscribe((function(){j(""),D(!1),p(void 0)}));return function(){e()}}),[]),(0,Tt.jsx)(cn.TouchableWithoutFeedback,{style:[u?{width:"100%"}:{alignSelf:"center"},{flexDirection:"row"}],onPress:function(){G.current&&G.current.focus()},children:(0,Tt.jsxs)(Vt,{spacing:2,style:{width:u?"100%":void 0,alignSelf:u?void 0:"center",backgroundColor:y?m.getColor():l.getColor(),paddingVertical:10,paddingHorizontal:14,borderRadius:12,borderColor:z?q.color:L.getColor(),borderWidth:2},children:[(0,Tt.jsx)(Et,{typography:Y,style:{color:$},children:n}),(0,Tt.jsxs)(Rt,{children:[(0,Tt.jsx)(Et,{typography:At.subscriptLabel,wide:!1,children:I("inputLabel.dateFormat")}),P?(0,Tt.jsx)(Et,{typography:J,wide:!1,children:" - "+I("error.invalidDate")}):void 0]}),(0,Tt.jsx)(Kt.default,{ref:G,style:[On(On({backgroundColor:y?m.getColor():l.getColor()},bt.default.select({web:{outlineStyle:"none"}})),{},{color:E.getColor()}),q.getStylesheet(),g],onChangeText:function(e){j(void 0!=U?U(e):e),function(e){y||(j(U(e)),p(F(e)),_(e)?(M(l),N(i)):(M(Ct.textError),N(Ct.textError)))}(e)},value:x,onFocus:function(){y||(D(!1),M(i),V(!0))},onBlur:function(){V(!1),D(!_(x)&&""!=x),M(l)},keyboardType:"numeric",editable:!y})]})})};var Pn=n(9566),Dn=(0,f.default)((function e(){(0,g.default)(this,e)}));Dn.listSelection=[],Dn.onSelection=function(e){};const An=Dn;const Tn=function(e){var t=e.navigation,n=An.listSelection;return(0,c.useEffect)((function(){return null==t?void 0:t.addListener("blur",(function(){An.listSelection=[]}))}),[t]),(0,Tt.jsx)(wn,{children:(0,Tt.jsxs)(Vt,{spacing:nn.screenSpacing,style:{flex:1},children:[(0,Tt.jsx)(Pn.default,{data:n,renderItem:function(e){var n=e.item;return(0,Tt.jsx)(on,{onPress:function(){An.onSelection(n),at.inst.navigateBack(t)},children:(0,Tt.jsxs)(Vt,{spacing:4,children:[(0,Tt.jsx)(Et,{typography:At.subscript,children:n.subtitle}),(0,Tt.jsx)(Et,{typography:At.body,children:n.title})]})})},keyExtractor:function(e){return e.id},ItemSeparatorComponent:function(){return(0,Tt.jsx)(Gt,{size:nn.cardSpacing})},scrollEnabled:!1,style:{width:"100%",overflow:"visible",flexGrow:0}}),(0,Tt.jsx)(an,{})]})})};function En(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function In(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?En(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Nn=function(e){var t,n=e.navigation,r=e.selected,i=e.items,o=e.title,a=e.style,l=e.disabled,s=void 0!==l&&l,u=e.onSelection,d=null!=r;return(0,c.useEffect)((function(){var e=O.clearAllInputs.subscribe((function(){u(void 0)}));return function(){e()}}),[]),(0,Tt.jsx)(on,{onPress:s?void 0:function(){An.listSelection=i,An.onSelection=u,at.inst.navigateTo(Tn,n,o)},style:In({width:"100%"},a),color:Ct.fillBackgroundLight,children:(0,Tt.jsxs)(Rt,{children:[(0,Tt.jsxs)(Vt,{spacing:4,children:[(0,Tt.jsx)(Et,{typography:At.subscript.withColor(Ct.textSemiDark),children:o}),(0,Tt.jsx)(Et,{typography:At.body.withColor(void 0==r?Ct.textError:Ct.textDark),children:null!=(t=null==r?void 0:r.title)?t:I("inputLabel.required").toUpperCase()})]}),(0,Tt.jsx)(an,{}),(0,Tt.jsx)(Yt,{icon:s?"close-circle":d?"check-circle":"chevron-right-circle",color:s?Ct.shadow:d?Ct.textSuccess:Ct.textSemiDark,size:hn.Large,style:{alignSelf:"center"}})]})})};const Bn=function(){function e(t,n,r){(0,g.default)(this,e),this.title=t,this.subtitle=n,this.value=r}return(0,f.default)(e,[{key:"id",get:function(){return this.title+this.subtitle}}]),e}();function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Mn=function(e){var t=e.label,n=e.textColor,r=void 0===n?Ct.textDark:n,i=e.color,a=void 0===i?Ct.textBackgroundDark:i,l=e.wide,s=void 0===l||l,u=e.valid,d=void 0===u?void 0:u,f=e.style,g=e.onTextChange,p=e.initialValue,h=c.useState(null!=p?p:""),v=(0,o.default)(h,2),y=v[0],b=v[1],m=(0,c.useState)(!1),S=(0,o.default)(m,2),w=S[0],x=S[1],j=(0,c.useRef)(null),k=At.body.withColor(r),C=At.subscript,P=void 0==d?C.color:d?Ct.textSuccess.getColor():Ct.textError.getColor();return(0,c.useEffect)((function(){var e=O.clearAllInputs.subscribe((function(){b(""),g("")}));return function(){e()}}),[]),(0,Tt.jsx)(cn.TouchableWithoutFeedback,{style:[s?{width:"100%"}:{alignSelf:"center"},{flexDirection:"row"}],onPress:function(){j.current&&j.current.focus()},children:(0,Tt.jsxs)(Vt,{spacing:2,style:{width:s?"100%":void 0,alignSelf:s?void 0:"center",backgroundColor:a.getColor(),paddingVertical:10,paddingHorizontal:14,borderRadius:12,borderColor:w?k.color:a.getColor(),borderWidth:2},children:[(0,Tt.jsx)(Et,{typography:C,style:{color:P},children:t}),(0,Tt.jsx)(Kt.default,{ref:j,multiline:!0,style:[Ln({backgroundColor:a.getColor()},bt.default.select({web:{outlineStyle:"none",height:64}})),k.getStylesheet(),f],onChangeText:function(e){b(e),g(e)},value:y,onFocus:function(){return x(!0)},onBlur:function(){return x(!1)}}),(0,Tt.jsx)(Et,{typography:C,style:{color:P,fontSize:C.size-2,paddingTop:2},children:"\u2022 \u2022 \u2022"})]})})};function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Fn=function(e){var t=e.label,n=e.textColor,r=void 0===n?Ct.textDark:n,i=e.color,a=void 0===i?Ct.textBackgroundDark:i,l=e.wide,s=void 0===l||l,u=e.valid,d=void 0===u?void 0:u,f=e.style,g=e.maskText,p=e.onTextChange,h=e.initialValue,v=e.locked,y=void 0!==v&&v,b=e.lockedColor,m=void 0===b?Ct.textBackgroundLight:b,S=(0,c.useState)(null!=h?h:""),w=(0,o.default)(S,2),x=w[0],j=w[1],k=(0,c.useState)(!1),C=(0,o.default)(k,2),P=C[0],D=C[1],A=(0,c.useRef)(null),T=At.body.withColor(r),E=At.subscript,I=void 0==d?E.color:d?Ct.textSuccess.getColor():Ct.textError.getColor();return(0,c.useEffect)((function(){var e=O.clearAllInputs.subscribe((function(){j(""),p("")}));return function(){e()}}),[]),(0,Tt.jsx)(cn.TouchableWithoutFeedback,{style:[s?{width:"100%"}:{alignSelf:"center"},{flexDirection:"row"}],onPress:function(){A.current&&A.current.focus()},children:(0,Tt.jsxs)(Vt,{spacing:2,style:{width:s?"100%":void 0,alignSelf:s?void 0:"center",backgroundColor:y?m.getColor():a.getColor(),paddingVertical:10,paddingHorizontal:14,borderRadius:12,borderColor:P?T.color:a.getColor(),borderWidth:2},children:[(0,Tt.jsx)(Et,{typography:E,style:{color:I},children:t}),(0,Tt.jsx)(Kt.default,{ref:A,style:[_n({backgroundColor:y?m.getColor():a.getColor()},bt.default.select({web:{outlineStyle:"none"}})),T.getStylesheet(),f],onChangeText:function(e){y||(j(void 0!=g?g(e):e),p(e))},value:x,onFocus:function(){return y?null:D(!0)},onBlur:function(){return D(!1)},editable:!y})]})})};function Rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const zn=function(e){var t=e.title,n=e.style;return(0,Tt.jsxs)(Rt,{style:Hn({},n),children:[(0,Tt.jsx)(s.default,{style:{height:2.2,flex:1,backgroundColor:Ct.accent.getColor(),borderRadius:12,alignSelf:"center"}}),(0,Tt.jsx)(Et,{typography:At.title4.withColor(Ct.accent),wide:!1,style:{paddingHorizontal:12},children:t}),(0,Tt.jsx)(s.default,{style:{height:2.2,flex:1,backgroundColor:Ct.accent.getColor(),borderRadius:12,alignSelf:"center"}})]})};const Vn=function(e){var t=e.style,n=e.onSelection,r=e.initialValue,i=(0,c.useState)(void 0!=r?new fn(r,r.code.toString()):void 0),a=(0,o.default)(i,2),l=a[0],s=a[1];(0,c.useEffect)((function(){var e=O.clearAllInputs.subscribe((function(){s(void 0),n(void 0)}));return function(){e()}}),[]);return(0,Tt.jsx)(dn,{label:I("inputLabel.triageCode"),valueLabel:null==l?I("triageCode.none"):l.value.toString(),options:[new fn(Ie.immediate,Ie.immediate.code.toString()),new fn(Ie.emergency,Ie.emergency.code.toString()),new fn(Ie.urgent,Ie.urgent.code.toString()),new fn(Ie.semiUrgent,Ie.semiUrgent.code.toString()),new fn(Ie.nonUrgent,Ie.nonUrgent.code.toString())],value:l,selectedBackgroundColor:function(){if(null!=l)return l.value.matches(Ie.nonUrgent)?Ct.textDark:Ct.triageCode(l.value)}(),selectedLabelColor:function(){if(null!=l)return l.value.matches(Ie.nonUrgent)?Ct.textLight:Ct.textTriageCode(l.value)}(),onSetValue:function(e){s(e),n(null==e?void 0:e.value)},style:t})};const Gn=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,null,[{key:"valueIsDefined",value:function(e){return void 0!=e&&null!=e}},{key:"stringIsValid",value:function(e){return!("string"!==typeof e||!e)&&""!==e.trim()}},{key:"mrnIsValid",value:function(e){if("string"!==typeof e)return!1;if(""===e.trim())return!1;return!/[<>{}\[\]\/\\|&^%$#@!~*()]/.test(e)}},{key:"emailIsValid",value:function(e){if("string"!==typeof e)return!1;return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}},{key:"postcodeIsValid",value:function(e){return!("string"!==typeof e||!e)&&/^\d{4}$/.test(e)}},{key:"phoneNumberIsValid",value:function(e){return!("string"!==typeof e||!e)&&/^[+\s()0-9-]{6,}$/.test(e)}},{key:"dobIsValid",value:function(e){if(!e)return!1;var t=new Date;return t.setHours(0,0,0,0),e<=t}}]),e}();var qn=n(9845);function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const $n=function(e){var t=e.backgroundColor,n=void 0===t?Ct.screenBackgroundLight:t,r=e.centerContent,i=void 0!==r&&r,o=e.children,a=e.style;return(0,Tt.jsx)(s.default,{style:Yn({backgroundColor:n.getColor(),flex:1},a),children:(0,Tt.jsx)(qn.KeyboardAwareScrollView,{style:{flex:1,paddingTop:nn.screenTopPadding,paddingHorizontal:nn.screenPadding},contentContainerStyle:Yn({},i&&{flexGrow:1,justifyContent:"center",alignItems:"center"}),enableOnAndroid:!0,showsVerticalScrollIndicator:!0,extraScrollHeight:100,enableResetScrollToCoords:!1,keyboardOpeningTime:Number.MAX_SAFE_INTEGER,children:(0,Tt.jsx)(s.default,{style:{width:"100%",paddingBottom:nn.screenPadding},children:o})})})};var Kn=n(4506),Qn=n(8521),Xn=n(3455),Zn=n(4152);const er=function(e){var t=e.title,n=e.message,r=e.titleColor,i=void 0===r?Ct.textDark:r,o=e.messageColor,a=void 0===o?Ct.textSemiDark:o,l=e.icon,s=void 0===l?"":l,u=e.iconColor,d=void 0===u?Ct.textDark:u,f=e.backgroundColor,g=e.onAnimationEnd,p=(0,c.useRef)(new Qn.default.Value(-100)).current;(0,c.useEffect)((function(){Qn.default.timing(p,{toValue:0,duration:300,easing:Xn.default.out(Xn.default.cubic),useNativeDriver:!1}).start((function(){setTimeout((function(){Qn.default.timing(p,{toValue:-200,duration:300,easing:Xn.default.in(Xn.default.cubic),useNativeDriver:!1}).start((function(){g()}))}),1500)}))}),[p,g]);var h=(0,Zn.useSafeAreaInsets)();return(0,Tt.jsx)(Qn.default.View,{style:[{backgroundColor:"transparent",marginTop:h.top,padding:10,flexDirection:"row",justifyContent:"center",position:"absolute",top:0,left:0,right:0,zIndex:9999},{transform:[{translateY:p}]}],children:(0,Tt.jsx)(on,{color:f,style:{maxWidth:350},children:(0,Tt.jsxs)(Rt,{spacing:16,style:{flexWrap:"nowrap"},children:[void 0==s?(0,Tt.jsx)(vn,{size:32}):(0,Tt.jsx)(It.default,{name:s,size:40,color:d.getColor(),style:{alignSelf:"center",paddingLeft:8}}),(0,Tt.jsxs)(Vt,{spacing:6,style:{paddingRight:32,maxWidth:200},children:[(0,Tt.jsx)(Et,{typography:At.title3.withColor(i),wide:!1,style:{alignSelf:"flex-start"},children:t}),(0,Tt.jsx)(Et,{typography:At.subscript.withColor(a),wide:!1,style:{alignSelf:"flex-start"},children:n})]})]})})})};var tr=(0,c.createContext)(void 0);function nr(e){var t=e.children,n=(0,c.useState)([]),r=(0,o.default)(n,2),i=r[0],a=r[1],l=function(e,t,n,r,i,o,l){a((function(a){return[].concat((0,re.default)(a),[{title:e,message:t,titleColor:n,messageColor:r,icon:i,iconColor:o,backgroundColor:l}])}))};return(0,c.useEffect)((function(){if(i.length>0){var e=(0,Kn.default)(i),t=(e[0],e.slice(1));return function(){a(t)}}}),[i]),(0,Tt.jsxs)(tr.Provider,{value:{showNotification:l,showDefaultNotification:function(e,t,n){l(e,t,void 0,void 0,n,void 0)},showErrorNotification:function(e){l(I("feedback.error"),e,Ct.textLight,Ct.textLight,"alert-circle-outline",Ct.textLight,Ct.textError)},showSuccessNotification:function(e){l(I("feedback.success"),e,Ct.textLight,Ct.textLight,"check-circle-outline",Ct.textLight,Ct.textSuccess)}},children:[t,i.map((function(e,t){return(0,Tt.jsx)(er,{title:e.title,message:e.message,titleColor:e.titleColor,messageColor:e.messageColor,icon:e.icon,iconColor:e.iconColor,backgroundColor:e.backgroundColor,onAnimationEnd:function(){}},t)}))]})}function rr(){var e=(0,c.useContext)(tr);if(void 0===e)throw new Error("useNotificationSession must be used within a NotificationSessionProvider");return e}const ir=function(e){var t,n,i=e.navigation,a=rr(),l=a.showErrorNotification,s=a.showSuccessNotification,u=tt.inst.getActivePatient(),d=null==u?void 0:u.triageCase.hospital,f=null==u?void 0:u.triageCase.arrivalWard,g=null==u?void 0:u.triageCase.medicalUnit,p=void 0!=u,h=(0,c.useState)(void 0!=d?new Bn(d.name,d.code,d):void 0),v=(0,o.default)(h,2),y=v[0],b=v[1],m=(0,c.useState)(void 0!=f?new Bn(f.name,f.hospitalCode,f):void 0),S=(0,o.default)(m,2),w=S[0],x=S[1],j=(0,c.useState)(void 0!=g?new Bn(g.name,g.group,g):void 0),k=(0,o.default)(j,2),C=k[0],P=k[1],D=c.useState(p?new fn(u.sex,u.sex.toString()):void 0),A=(0,o.default)(D,2),T=A[0],E=A[1],N=(0,c.useState)(null==u?void 0:u.firstName),B=(0,o.default)(N,2),W=B[0],L=B[1],M=(0,c.useState)(null==u?void 0:u.lastName),U=(0,o.default)(M,2),_=U[0],F=U[1],R=(0,c.useState)(null==u?void 0:u.mrn.toString()),H=(0,o.default)(R,2),z=H[0],V=H[1],G=(0,c.useState)(null==u?void 0:u.postCode),q=(0,o.default)(G,2),J=q[0],Y=q[1],$=(0,c.useState)(null==u?void 0:u.phoneNumber),K=(0,o.default)($,2),X=K[0],Z=K[1],ee=(0,c.useState)(null==u?void 0:u.dob),te=(0,o.default)(ee,2),ne=te[0],re=te[1],ie=(0,c.useState)(null==u||null==(t=u.triageCase)?void 0:t.triageCode),oe=(0,o.default)(ie,2),ae=oe[0],le=oe[1],ce=(0,c.useState)(null==u||null==(n=u.triageCase)?void 0:n.triageText),se=(0,o.default)(ce,2),ue=se[0],de=se[1],fe=function(){return Gn.stringIsValid(W)},ge=function(){return Gn.stringIsValid(_)},pe=function(){return Gn.mrnIsValid(z)},he=function(){return Gn.postcodeIsValid(J)},ve=function(){return Gn.phoneNumberIsValid(X)},ye=function(){return Gn.dobIsValid(ne)},be=function(){return Gn.stringIsValid(ue)},Se=function(){return Gn.valueIsDefined(T)&&fe()&&ge()&&pe()&&he()&&ve()&&ye()&&Gn.valueIsDefined(ae)&&be()&&Gn.valueIsDefined(y)&&Gn.valueIsDefined(w)&&Gn.valueIsDefined(C)},xe=function(){var e=(0,r.default)((function*(){if(Se())if(void 0==u){var e=ke.new(new me(z),ne,W,_,T.value,X,we.new(w.value,y.value,C.value,ue,ae),J,tt.inst.loggedInAccount.id);(yield tt.inst.submitTriage(e))?(s(I("feedback.triageCreated")),O.clearAllInputs.publish(),tt.inst.fetchPatient(e.mrn)):l(I("feedback.triageNotCreated"))}else{var t=new ke(new me(z),ne,W,_,T.value,X,we.new(w.value,y.value,C.value,ue,ae),J,u.timeLastAllocated,u.idAllocatedTo,u.events,u.changelog);(yield tt.inst.editPatient(t))?(s(I("feedback.patientEdited")),at.inst.navigateBack(i),tt.inst.fetchPatient(u.mrn)):l(I("feedback.patientNotEdited"))}else l(I("feedback.invalidInputs"))}));return function(){return e.apply(this,arguments)}}();return(0,Tt.jsx)($n,{children:(0,Tt.jsxs)(Vt,{children:[(0,Tt.jsx)(zn,{title:I("triageForm.title.identity"),style:{paddingBottom:24}}),(0,Tt.jsxs)(Vt,{spacing:nn.textInputSpacing,style:{width:"100%"},children:[(0,Tt.jsx)(Fn,{label:I("inputLabel.givenName"),textColor:fe()||!W?Ct.textDark:Ct.textError,color:Ct.textBackgroundDark,onTextChange:function(e){L(e)},initialValue:W}),(0,Tt.jsx)(Fn,{label:I("inputLabel.surname"),textColor:ge()||!_?Ct.textDark:Ct.textError,color:Ct.textBackgroundDark,onTextChange:function(e){F(e)},initialValue:_}),(0,Tt.jsx)(Fn,{label:I("inputLabel.mrn"),textColor:pe()||!z?Ct.textDark:Ct.textError,color:Ct.textBackgroundDark,onTextChange:function(e){V(e)},initialValue:z,locked:p}),(0,Tt.jsx)(Fn,{label:I("inputLabel.postcode"),textColor:he()||!J?Ct.textDark:Ct.textError,color:Ct.textBackgroundDark,onTextChange:function(e){Y(e)},initialValue:J}),(0,Tt.jsx)(Cn,{label:I("inputLabel.dob"),textColor:ye()||!ne?Ct.textDark:Ct.textError,onChange:function(e){re(e)},initialValue:ne}),(0,Tt.jsx)(Fn,{label:I("inputLabel.phone"),textColor:ve()||!X?Ct.textDark:Ct.textError,color:Ct.textBackgroundDark,onTextChange:function(e){Z(e)},initialValue:X}),(0,Tt.jsx)(dn,{label:I("inputLabel.sex"),options:[new fn(Oe.male,Oe.male.toString()),new fn(Oe.female,Oe.female.toString()),new fn(Oe.other,Oe.other.toString())],value:T,onSetValue:function(e){E(e)}})]}),(0,Tt.jsx)(zn,{title:I("triageForm.title.triage"),style:{paddingVertical:24}}),(0,Tt.jsxs)(Vt,{spacing:nn.textInputSpacing,style:{width:"100%"},children:[(0,Tt.jsx)(Vn,{onSelection:function(e){le(e)},initialValue:ae,style:{paddingBottom:8}}),(0,Tt.jsx)(Mn,{label:I("inputLabel.triageDescription"),onTextChange:function(e){de(e)},textColor:be()||!ue?Ct.textDark:Ct.textError,initialValue:ue})]}),(0,Tt.jsx)(zn,{title:I("triageForm.title.hospitalisation"),style:{paddingVertical:24}}),(0,Tt.jsxs)(Vt,{spacing:nn.textInputSpacing,style:{width:"100%"},children:[(0,Tt.jsx)(Nn,{navigation:i,items:Q.map((function(e){return new Bn(e.name,e.code,e)})),title:I("inputLabel.hospital"),selected:y,onSelection:function(e){b(e),P(void 0),x(void 0)}}),(0,Tt.jsx)(Nn,{navigation:i,items:void 0==y?[]:y.value.wardsAsArray.map((function(e){return new Bn(e.name,e.hospitalCode,e)})),title:I("inputLabel.ward"),selected:w,disabled:void 0==y,onSelection:function(e){x(e)}}),(0,Tt.jsx)(Nn,{navigation:i,items:void 0==y?[]:y.value.medUnitsAsArray.map((function(e){return new Bn(e.name,e.group,e)})),title:I("inputLabel.medicalUnit"),selected:C,disabled:void 0==y,onSelection:function(e){P(e)}})]}),(0,Tt.jsx)(zn,{title:I("triageForm.title.end"),style:{paddingVertical:24}}),(0,Tt.jsxs)(Rt,{spacing:24,children:[p?null:(0,Tt.jsx)(Nt,{label:I("button.clear"),wide:!1,onPress:function(){O.clearAllInputs.publish()},style:{flex:1},color:Ct.fillBackgroundLight,typography:At.button.withColor(Ct.textSemiDark)}),(0,Tt.jsx)(Nt,{label:I("button.submit"),wide:!1,onPress:xe,style:{flex:1}})]})]})})};const or=function(e){var t=e.label,n=e.text,r=e.children;return(0,Tt.jsxs)(s.default,{children:[(0,Tt.jsx)(Et,{typography:At.subscript,children:t}),(0,Tt.jsx)(Et,{typography:At.body,children:n}),r]})};function ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const cr=function(e){var t=e.icon,n=e.title,r=e.spacing,i=void 0===r?5:r,o=e.children,a=e.style;return(0,Tt.jsxs)(on,{style:lr({width:"100%"},a),children:[(0,Tt.jsxs)(Rt,{spacing:12,children:[(0,Tt.jsx)(s.default,{style:{borderRadius:12,padding:8,backgroundColor:Ct.accent.getColor(),alignSelf:"center"},children:(0,Tt.jsx)(Yt,{icon:t,color:Ct.textWhite,size:hn.Small})}),(0,Tt.jsx)(Et,{typography:At.title1.withColor(Ct.accent),wide:!1,children:n})]}),(0,Tt.jsx)(Gt,{size:12}),(0,Tt.jsx)(Vt,{spacing:i,children:o})]})};const sr=function(e){var t,n,r=e.navigation,i=c.useState(tt.inst.getActivePatient()),a=(0,o.default)(i,2),l=a[0],u=a[1];return(0,c.useEffect)((function(){var e=O.activePatientChanged.subscribe((function(){var e=tt.inst.getActivePatient();null==e?at.inst.navigateBack(r):u(e)}));return function(){e()}}),[]),l?(0,Tt.jsx)(wn,{children:(0,Tt.jsxs)(Vt,{spacing:nn.cardSpacing,style:{flex:1},children:[(0,Tt.jsxs)(cr,{title:I("patientHistory.title.identity"),icon:"account",children:[(0,Tt.jsx)(or,{label:I("patientHistory.descriptor.name"),text:l.fullName}),(0,Tt.jsx)(or,{label:I("patientHistory.descriptor.mrn"),text:l.mrn.toString()}),(0,Tt.jsx)(or,{label:I("patientHistory.descriptor.postcode"),text:l.postCode})]}),(0,Tt.jsxs)(cr,{title:I("patientHistory.title.bio"),icon:"run",children:[(0,Tt.jsx)(or,{label:I("patientHistory.descriptor.dob"),text:l.dob.toDateString()}),(0,Tt.jsx)(or,{label:I("patientHistory.descriptor.sex"),text:l.sex.toString()})]}),(0,Tt.jsxs)(cr,{title:I("patientHistory.title.triage"),icon:"clipboard-account-outline",children:[(0,Tt.jsx)(or,{label:I("patientHistory.descriptor.code"),text:l.triageCase.triageCode.toString()}),(0,Tt.jsx)(or,{label:I("patientHistory.descriptor.triageText"),text:l.triageCase.triageText}),(0,Tt.jsx)(or,{label:I("patientHistory.descriptor.arrivalDate"),text:l.triageCase.arrivalDate.toDateString()}),(0,Tt.jsx)(or,{label:I("patientHistory.descriptor.arrivalWard"),text:l.triageCase.arrivalWard.name}),(0,Tt.jsx)(or,{label:I("patientHistory.descriptor.dischargeDate"),text:(null==(t=l.triageCase.dischargeDate)?void 0:t.toDateString())||"-"}),(0,Tt.jsx)(or,{label:I("patientHistory.descriptor.dischargeWard"),text:(null==(n=l.triageCase.dischargeWard)?void 0:n.name)||"-"}),(0,Tt.jsx)(or,{label:I("patientHistory.descriptor.hospital"),text:l.triageCase.hospital.name}),(0,Tt.jsx)(or,{label:I("patientHistory.descriptor.medicalUnit"),text:l.triageCase.medicalUnit.name})]}),(0,Tt.jsx)(cr,{title:I("patientHistory.title.events"),icon:"calendar-clock",spacing:12,children:0==l.events.length?(0,Tt.jsx)(Et,{typography:At.body,children:I("label.noEvents")}):l.events.map((function(e){return(0,Tt.jsxs)(Rt,{spacing:12,style:{flexWrap:"nowrap"},children:[(0,Tt.jsx)(s.default,{style:{backgroundColor:Ct.accent.getColor(),width:10,borderRadius:8}}),(0,Tt.jsxs)(Vt,{style:{flex:1},children:[(0,Tt.jsx)(Et,{typography:At.body.withWeight(ft.Bold),children:e.title}),(0,Tt.jsx)(Et,{typography:At.subscript.withItalic(!0),wide:!1,style:{alignSelf:"flex-start"},children:e.description}),(0,Tt.jsx)(Gt,{size:16}),(0,Tt.jsxs)(Vt,{spacing:2,children:[(0,Tt.jsx)(Et,{typography:At.subscript,children:I("patientHistory.descriptor.category")+": "+e.category.toString()}),(0,Tt.jsx)(Et,{typography:At.subscript,children:I("patientHistory.descriptor.triggerTime")+": "+e.triggerTimeDescription})]})]})]},e.id.toString())}))})]})}):(0,Tt.jsx)(bn,{})};function ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const fr=function(e){var t=e.label,n=e.textColor,r=void 0===n?Ct.textDark:n,i=e.color,a=void 0===i?Ct.textBackgroundDark:i,l=e.wide,s=void 0===l||l,u=e.valid,d=void 0===u?void 0:u,f=e.style,g=e.onChange,p=(0,c.useState)(""),h=(0,o.default)(p,2),v=h[0],y=h[1],b=(0,c.useState)(!1),m=(0,o.default)(b,2),S=m[0],w=m[1],x=(0,c.useState)(a),j=(0,o.default)(x,2),k=j[0],C=j[1],P=(0,c.useState)(r),D=(0,o.default)(P,2),A=D[0],T=D[1],E=function(e){var t=e.replace(/\D/g,"");return t.length<=2?t:t.length<=3?t.slice(0,2)+":"+t.slice(2):t.slice(0,2)+":"+t.slice(2,4)},N=function(e){if(5!=e.length)return!1;var t=e.split(":").map(Number),n=(0,o.default)(t,2),r=n[0],i=n[1];return!(r>24||i>59)},B=function(e){w(!1),y(E(e));var t=function(e){if(N(e)){var t=e.split(":").map(Number),n=(0,o.default)(t,2),r=n[0],i=n[1],a=new Date;return a.setHours(r,i),a}}(e);g(t),N(e)||""==e?(T(r),C(a)):(T(Ct.textError),C(Ct.textError))},W=(0,c.useState)(!1),L=(0,o.default)(W,2),M=L[0],U=L[1],_=(0,c.useRef)(null),F=At.body.withColor(A),R=At.error;R.size=At.subscriptLabel.size;var H=At.subscript,z=void 0==d?H.color:d?Ct.textSuccess.getColor():Ct.textError.getColor();return(0,c.useEffect)((function(){var e=O.clearAllInputs.subscribe((function(){y(""),w(!1),g(void 0)}));return function(){e()}}),[]),(0,Tt.jsx)(cn.TouchableWithoutFeedback,{style:[s?{width:"100%"}:{alignSelf:"center"},{flexDirection:"row"}],onPress:function(){_.current&&_.current.focus()},children:(0,Tt.jsxs)(Vt,{spacing:2,style:{width:s?"100%":void 0,alignSelf:s?void 0:"center",backgroundColor:a.getColor(),paddingVertical:10,paddingHorizontal:14,borderRadius:12,borderColor:M?F.color:k.getColor(),borderWidth:2},children:[(0,Tt.jsx)(Et,{typography:H,style:{color:z},children:t}),(0,Tt.jsxs)(Rt,{children:[(0,Tt.jsx)(Et,{typography:At.subscriptLabel,wide:!1,children:I("inputLabel.timeFormat")}),S?(0,Tt.jsx)(Et,{typography:R,wide:!1,children:" - "+I("error.invalidTime")}):void 0]}),(0,Tt.jsx)(Kt.default,{ref:_,style:[dr(dr({backgroundColor:a.getColor()},bt.default.select({web:{outlineStyle:"none"}})),{},{color:A.getColor()}),F.getStylesheet(),f],onChangeText:function(e){y(void 0!=E?E(e):e),B(e)},value:E(v),onFocus:function(){w(!1),C(r),U(!0)},onBlur:function(){U(!1),w(!N(v)&&""!=v),C(a)},keyboardType:"numeric"})]})})};const gr=function(e){var t=e.navigation,n=rr(),i=n.showErrorNotification,a=n.showSuccessNotification,l=(0,c.useState)(),u=(0,o.default)(l,2),d=u[0],f=u[1],g=(0,c.useState)(),p=(0,o.default)(g,2),h=p[0],v=p[1],y=(0,c.useState)(),b=(0,o.default)(y,2),m=b[0],S=b[1],w=(0,c.useState)(),x=(0,o.default)(w,2),j=x[0],k=x[1],O=function(){var e=(0,r.default)((function*(){if(Gn.stringIsValid(d)&&Gn.valueIsDefined(h)&&Gn.stringIsValid(m)&&Gn.valueIsDefined(j)){var e=De.new(h,d,m,j);(yield tt.inst.submitPatientEvent(e))&&(a(I("feedback.eventCreated")),at.inst.navigateBack(t))}else i(I("feedback.invalidInputs"))}));return function(){return e.apply(this,arguments)}}();return(0,Tt.jsxs)(s.default,{style:{flex:1,backgroundColor:Ct.screenBackgroundLight.getColor(),padding:nn.screenPadding},children:[(0,Tt.jsxs)(Vt,{spacing:nn.screenSpacing,style:{flex:1},children:[(0,Tt.jsx)(Fn,{label:I("inputLabel.title"),onTextChange:function(e){return f(e)}}),(0,Tt.jsx)(fr,{label:I("inputLabel.triggerTime"),onChange:function(e){return v(e)}}),(0,Tt.jsx)(Mn,{label:I("inputLabel.description"),onTextChange:function(e){return S(e)}}),(0,Tt.jsx)(Nn,{navigation:t,title:I("inputLabel.category"),items:[new Bn(Ae.medication.toString(),I("label.category"),Ae.medication),new Bn(Ae.visit.toString(),I("label.category"),Ae.visit),new Bn(Ae.condition.toString(),I("label.category"),Ae.condition),new Bn(Ae.procedure.toString(),I("label.category"),Ae.procedure),new Bn(Ae.device.toString(),I("label.category"),Ae.device),new Bn(Ae.measurement.toString(),I("label.category"),Ae.measurement),new Bn(Ae.observation.toString(),I("label.category"),Ae.observation),new Bn(Ae.episode.toString(),I("label.category"),Ae.episode),new Bn(Ae.note.toString(),I("label.category"),Ae.note)],selected:void 0!=j?new Bn(j.toString(),I("label.category"),j):void 0,onSelection:function(e){k(e?e.value:void 0)}})]}),(0,Tt.jsx)(Nt,{label:I("button.submit"),onPress:O})]})};const pr=function(e){var t=e.navigation,n=c.useState(tt.inst.getActivePatient()),i=(0,o.default)(n,2),a=i[0],l=i[1],u=c.useState([]),d=(0,o.default)(u,2),f=d[0],g=d[1];if((0,c.useEffect)((function(){var e=O.activePatientChanged.subscribe((function(){var e=tt.inst.getActivePatient();null==e?at.inst.navigateBack(t):l(e),p()}));return p(),function(){e()}}),[]),!a)return(0,Tt.jsx)(bn,{});var p=function(){var e=(0,r.default)((function*(){yield Promise.all([tt.inst.fetchAllWorkers(),tt.inst.fetchAllLeaders()]);var e=yield a.changelog.generateTimeline(a.events,tt.inst.getAllHashedWorkers(),tt.inst.getAllHashedLeaders());g(e)}));return function(){return e.apply(this,arguments)}}();return(0,Tt.jsx)(wn,{children:(0,Tt.jsx)(Vt,{spacing:nn.cardSpacing,style:{flex:1},children:(0,Tt.jsx)(cn.FlatList,{data:f,renderItem:function(e){var t=e.item;return(0,Tt.jsx)(on,{children:(0,Tt.jsxs)(Rt,{spacing:12,children:[(0,Tt.jsx)(pn,{color:Ct.textDark,style:{borderRadius:8},children:(0,Tt.jsx)(Et,{typography:At.chip,children:t.dateDescription})}),(0,Tt.jsx)(Et,{wide:!1,children:t.description})]})})},keyExtractor:function(e){return e.id.toString()},ItemSeparatorComponent:function(){return(0,Tt.jsx)(s.default,{style:{width:4,height:22,backgroundColor:Ct.textDark.getColor(),marginLeft:20,alignSelf:"center"}})},scrollEnabled:!1,style:{width:"100%",overflow:"visible",flexGrow:0}})})})};const hr=function(e){var t,n,i=e.navigation,a=(0,c.useState)(O.contentWidth.read()),l=(0,o.default)(a,2),s=l[0],u=l[1],d=c.useState(!1),f=(0,o.default)(d,2),g=f[0],p=f[1],h=rr(),v=h.showErrorNotification,y=h.showSuccessNotification,b=nn.screenPadding,m=s<520?2:3;s<365&&(m=1);var S=(s-(m-1)*b)/m;(0,c.useEffect)((function(){var e=O.contentWidth.subscribe((function(){u(O.contentWidth.read())})),t=O.activePatientChanged.subscribe((function(){null==tt.inst.getActivePatient()&&at.inst.navigateBack(i)}));return function(){e(),t()}}),[]);var w=function(){var e=(0,r.default)((function*(){p(!1);var e=tt.inst.getActivePatient();e?(yield tt.inst.deletePatient(e))?(tt.inst.fetchAllPatients(),at.inst.navigateBack(i),y(I("feedback.successDeleteAccount"))):v(I("feedback.accountNotExist")):v(I("feedback.accountNotExist"))}));return function(){return e.apply(this,arguments)}}();return(0,Tt.jsx)(wn,{children:(0,Tt.jsx)(Vt,{spacing:nn.screenSpacing,style:{flex:1,flexWrap:"nowrap"},children:(0,Tt.jsxs)(Rt,{spacing:b,children:[(0,Tt.jsx)(yn,{size:S,label:I("button.viewPatient"),description:I("label.viewPatient"),onPress:function(){var e=tt.inst.getActivePatient();e?at.inst.navigateTo(sr,i,I("header.worker.view1Param",e.fullName)):at.inst.navigateBack(i)},icon:"account-eye"}),(0,Tt.jsx)(yn,{size:S,label:I("button.patientActions"),description:I("label.patientActions"),onPress:function(){var e=tt.inst.getActivePatient();e?at.inst.navigateTo(jn,i,I("header.worker.actions1Param",e.triageCase.triageCode.toString())):at.inst.navigateBack(i)},icon:"exclamation-thick"}),(0,Tt.jsx)(yn,{size:S,label:I("button.editPatient"),description:I("label.editPatient"),onPress:function(){var e=tt.inst.getActivePatient();e?at.inst.navigateTo(ir,i,I("header.worker.edit1Param",e.fullName)):at.inst.navigateBack(i)},icon:"clipboard-edit"}),(0,Tt.jsx)(yn,{size:S,label:I("button.addEvent"),description:I("label.addEvent"),onPress:function(){at.inst.navigateTo(gr,i,I("header.worker.addEvent"))},icon:"calendar-clock"}),(0,Tt.jsx)(yn,{size:S,label:I("button.changelog"),description:I("label.changelog"),onPress:function(){var e=tt.inst.getActivePatient();e?at.inst.navigateTo(pr,i,I("header.worker.changelog1Param",e.fullName)):at.inst.navigateBack(i)},icon:"timeline-text"}),(0,Tt.jsx)(qt,{visible:g,setVisible:function(e){p(e)},title:I("actions.removePatient",null!=(t=null==(n=tt.inst.getActivePatient())?void 0:n.fullName)?t:""),onCancel:function(){p(!1)},onDone:w,doneLabel:I("button.deletePatient"),children:(0,Tt.jsx)(Et,{typography:At.body,wide:!1,children:I("label.removeAccountWarning")})}),(0,Tt.jsx)(yn,{size:S,label:I("button.deletePatient"),description:I("label.removePatient"),onPress:function(){tt.inst.getActivePatient()?p(!0):v(I("feedback.accountNotExist"))},icon:"delete"}),(0,Tt.jsx)(yn,{size:S,label:I("button.done"),description:I("label.done"),onPress:function(){at.inst.navigateBack(i)},icon:"exit-to-app"})]})})})};function vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const br=function(e){var t=e.navigation,n=e.patient,i=e.event,a=e.style,l=(0,c.useState)(!1),s=(0,o.default)(l,2),u=s[0],d=s[1],f=(0,c.useState)(i.completedToday()),g=(0,o.default)(f,2),p=g[0],h=g[1],v=function(){var e=(0,r.default)((function*(){tt.inst.markPatientEvent(n,i,!p),h(!p)}));return function(){return e.apply(this,arguments)}}();return(0,Tt.jsx)(on,{color:Ct.fillBackgroundLight,style:yr({},a),onPress:function(){d(!u)},children:(0,Tt.jsxs)(Rt,{style:{alignItems:"center"},children:[(0,Tt.jsxs)(Vt,{style:{flex:1},children:[(0,Tt.jsx)(Et,{typography:At.subscript,children:n.fullName}),(0,Tt.jsx)(Et,{typography:At.title3.withColor(p?Ct.textSuccess:Ct.textDark),children:i.title}),(0,Tt.jsx)(Gt,{size:12}),(0,Tt.jsxs)(Et,{typography:At.subscript.withColor(Ct.accent),children:[i.triggerTimeDescription,(0,Tt.jsx)(Et,{typography:At.subscript,children:" \u2022 "+i.category.toString()})]}),u?(0,Tt.jsxs)(Vt,{children:[(0,Tt.jsx)(Et,{typography:At.subscript,children:I("label.createdAt1Param",i.createdAtDescription)}),(0,Tt.jsx)(Et,{typography:At.subscript.withColor(Ct.textDark),children:i.description}),(0,Tt.jsx)(Gt,{size:16}),(0,Tt.jsxs)(Rt,{children:[(0,Tt.jsx)(pn,{color:Ct.accent,onPress:function(){tt.inst.setActivePatient(n),at.inst.navigateTo(hr,t,n.fullName)},style:{flex:1},children:(0,Tt.jsxs)(Rt,{children:[(0,Tt.jsx)(Yt,{icon:"chevron-right",color:Ct.textLight,size:hn.Small}),(0,Tt.jsx)(Et,{typography:At.chip,wide:!1,style:{paddingRight:10},children:"View Patient"})]})}),(0,Tt.jsx)(vn,{size:8}),(0,Tt.jsx)(pn,{color:p?Ct.textSuccess:Ct.accent,onPress:v,style:{flex:1,justifyContent:"center"},children:(0,Tt.jsx)(Rt,{children:(0,Tt.jsx)(Et,{typography:At.chip,wide:!1,style:{paddingHorizontal:10},children:I(p?"button.done":"button.markDone")})})})]})]}):void 0]}),p?(0,Tt.jsx)(Yt,{icon:"check-bold",color:Ct.textSuccess,size:hn.Large}):void 0]})})};const mr=function(e){var t=e.navigation,n=c.useState(tt.inst.getAllocatedPatients()),r=(0,o.default)(n,2),i=r[0],a=r[1],l=c.useState([]),s=(0,o.default)(l,2),u=s[0],d=s[1],f=[new fn(!0,"Remaining"),new fn(!1,"All")],g=c.useState(f[0]),p=(0,o.default)(g,2),h=p[0],v=p[1];return(0,c.useEffect)((function(){var e=O.patientsFetched.subscribe((function(){a(tt.inst.getAllocatedPatients())})),t=O.patientUpdated.subscribe((function(){a(tt.inst.getAllocatedPatients()),tt.inst.fetchAllocatedPatients()}));return tt.inst.fetchAllocatedPatients(),function(){e(),t()}}),[]),(0,c.useEffect)((function(){d(function(){var e,t=i.flatMap((function(e){return e.events.map((function(t){return{patientEvent:t,patient:e}}))}));if(t.sort((function(e,t){return e.patientEvent.occursAfter(t.patientEvent.triggerTime)?1:-1})),null==(e=null==h?void 0:h.value)||e){var n=new Date;return t.filter((function(e){return e.patientEvent.occursAfter(n)||!e.patientEvent.completedToday()}))}return t}())}),[h,i]),(0,Tt.jsx)(wn,{children:(0,Tt.jsxs)(Vt,{spacing:nn.screenSpacing,style:{flex:1},children:[(0,Tt.jsx)(dn,{label:"",labeled:!1,options:f,value:h,onSetValue:function(e){v(e)},style:{paddingBottom:12},clearSelectionAllowed:!1}),(0,Tt.jsx)(cn.FlatList,{data:u,renderItem:function(e){var n=e.item;return(0,Tt.jsx)(br,{navigation:t,patient:n.patient,event:n.patientEvent,onPress:function(){}})},keyExtractor:function(e){return e.patientEvent.id.toString()},ItemSeparatorComponent:function(){return(0,Tt.jsx)(Gt,{size:nn.cardSpacing})},scrollEnabled:!1,style:{width:"100%",overflow:"visible",flexGrow:0}}),(0,Tt.jsx)(an,{})]})})};var Sr=n(8576);function wr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wr(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const jr=function(e){var t=e.code,n=e.style;return(0,Tt.jsx)(on,{color:Ct.triageCode(t),style:xr({paddingVertical:6,paddingHorizontal:12,alignSelf:"flex-start",borderRadius:8},n),children:(0,Tt.jsx)(Et,{typography:At.title1.withSize(12).withColor(Ct.textTriageCode(t)),wide:!1,style:{alignSelf:"flex-start"},children:I("label.triageCode2Param",t.code.toString(),t.toString())})})};function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Cr=function(e){var t=e.patient,n=e.style,r=e.onPress,i=t.triageCase.arrivalDate.toLocaleTimeString("en-AU",{hour:"numeric",minute:"numeric",hour12:!0}).toUpperCase()+"  |  "+t.triageCase.arrivalDate.toDateString();return(0,Tt.jsx)(on,{color:Ct.fillBackgroundLight,style:Or({},n),onPress:r,children:(0,Tt.jsxs)(Vt,{spacing:6,style:{flex:1,flexWrap:"nowrap"},children:[(0,Tt.jsx)(Et,{typography:At.title3.withWeight(ft.Bold),children:t.fullName}),(0,Tt.jsx)(jr,{code:t.triageCase.triageCode}),(0,Tt.jsx)(Gt,{size:10}),(0,Tt.jsx)(Et,{typography:At.subscript,wide:!1,style:{alignSelf:"flex-start"},children:i})]})})};const Pr=function(e){var t=e.style,n=e.onSelection,r=(0,c.useState)(new fn(!1,I("label.allocated"))),i=(0,o.default)(r,2),a=i[0],l=i[1];return(0,Tt.jsx)(dn,{label:"",labeled:!1,clearSelectionAllowed:!1,options:[new fn(!1,I("label.allocated")),new fn(!0,I("label.all"))],value:a,onSetValue:function(e){var t;l(e),n(null!=(t=null==e?void 0:e.value)&&t)},style:t})};const Dr=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,null,[{key:"cleanupQuery",value:function(e){return e.replace(/\s/g,"")}},{key:"calculateLevenshteinDistance",value:function(e,t){for(var n=e.length,r=t.length,i=Array.from({length:n+1},(function(e,t){return Array(r+1).fill(t)})),o=1;o<=r;o++)i[0][o]=o;for(var a=1;a<=n;a++)for(var l=1;l<=r;l++){var c=e[a-1]===t[l-1]?0:1;i[a][l]=Math.min(i[a-1][l]+1,i[a][l-1]+1,i[a-1][l-1]+c)}return i[n][r]}},{key:"isFuzzyMatch",value:function(t,n,r,i){return e.calculateLevenshteinDistance(t,r(n))<=i}},{key:"handleSearch",value:function(t,n,r,i){var o=e.cleanupQuery(t),a=n.filter((function(t){return e.cleanupQuery(r(t)).toLowerCase().includes(o.toLowerCase())}));return 0==a.length&&(a=n.filter((function(t){return e.isFuzzyMatch(o,t,r,i)}))),a}}]),e}();function Ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Er=function(e){var t=e.data,n=e.style,r=e.onTextChange,i=e.setData,a=e.textColor,l=void 0===a?Ct.textDark:a,u=e.color,d=void 0===u?Ct.textBackgroundAccent:u,f=e.dataToString,g=e.wide,p=void 0===g||g,h=e.valid,v=void 0===h?void 0:h,y=e.label,b=void 0===y?"Search":y,m=e.maxDistance,S=void 0===m?6:m;(0,c.useEffect)((function(){P(t)}),[t]);var w=c.useState(""),x=(0,o.default)(w,2),j=x[0],k=x[1],O=c.useState(t),C=(0,o.default)(O,2),P=(C[0],C[1]),D=(0,c.useRef)(null),A=At.body.withColor(l);void 0!=v&&A.withColor(v?Ct.textSuccess:Ct.textError);var T=At.body.withColor(Ct.textSemiDark);return(0,Tt.jsxs)(s.default,{style:[p?{width:"100%"}:{alignSelf:"center"},{flexDirection:"row",backgroundColor:d.getColor(),borderRadius:30,borderColor:Ct.outlineTextBackgroundAccent.getColor(),height:55,borderWidth:1}],children:[(0,Tt.jsx)(Yt,{icon:"magnify",size:26,color:Ct.textDark,style:{alignSelf:"center",display:"flex",marginLeft:16}}),(0,Tt.jsx)(cn.TouchableWithoutFeedback,{style:Tr({position:"absolute",flexDirection:"row",height:"100%",paddingHorizontal:6},bt.default.select({web:{cursor:"text"}})),onPress:function(){D.current&&D.current.focus()},children:(0,Tt.jsx)(Et,{typography:T,style:{alignSelf:"center"},children:0==j.length?b:""})}),(0,Tt.jsx)(Kt.default,{ref:D,style:[p?{width:"100%"}:{alignSelf:"center"},Tr({paddingVertical:12,paddingHorizontal:6},bt.default.select({web:{outlineStyle:"none"}})),A.getStylesheet(),n],onChangeText:function(e){k(e),r(e);var n=Dr.handleSearch(e,t,f,S);P(n),i(n)},value:j})]})};function Ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Br=function(e){var t=e.navigation,n=(0,c.useState)(tt.inst.getAllocatedPatients()),r=(0,o.default)(n,2),i=r[0],a=r[1],l=(0,c.useState)(!1),s=(0,o.default)(l,2),u=s[0],d=s[1],f=c.useState(i),g=(0,o.default)(f,2),p=g[0],h=g[1],v=c.useState(""),y=(0,o.default)(v,2),b=(y[0],y[1]),m=(0,c.useRef)(u),S=(0,c.useRef)(!1);(0,c.useEffect)((function(){var e=O.patientsFetched.subscribe((function(){a(m.current?tt.inst.getAllPatients():tt.inst.getAllocatedPatients()),h(m.current?tt.inst.getAllPatients():tt.inst.getAllocatedPatients())}));return tt.inst.fetchAllocatedPatients(),function(){e()}}),[]),(0,c.useEffect)((function(){S.current?(m.current=u,a(m.current?tt.inst.getAllPatients():tt.inst.getAllocatedPatients()),u?tt.inst.fetchAllPatients():tt.inst.fetchAllocatedPatients()):S.current=!0}),[u]);return(0,Tt.jsx)(wn,{children:(0,Tt.jsxs)(Vt,{spacing:nn.screenSpacing,style:{flex:1},children:[(0,Tt.jsx)(Pr,{onSelection:function(e){d(e),tt.inst.setActivePatient(null)}}),(0,Tt.jsx)(Gt,{size:nn.cardTopPadding}),(0,Tt.jsxs)(Sr.default,{style:{flex:1,width:"100%"},children:[(0,Tt.jsx)(Er,{onTextChange:function(e){b(e)},data:i,setData:h,dataToString:function(e){return e.fullName}}),(0,Tt.jsx)(Gt,{size:nn.cardPadding}),(0,Tt.jsx)(Pn.default,{data:p,renderItem:function(e){var n=e.item;return(0,Tt.jsx)(Cr,{patient:n,onPress:function(){!function(e){tt.inst.setActivePatient(e),at.inst.navigateTo(u?sr:hr,t,e.fullName)}(n)}})},keyExtractor:function(e){return e.mrn.toString()},ItemSeparatorComponent:function(){return(0,Tt.jsx)(Gt,{size:nn.cardSpacing})},scrollEnabled:!1,style:Nr({width:"100%",overflow:"visible",flexGrow:0},kt.inst.getOS()==mt.Web&&kt.inst.getScreenType()!=St.Mobile?{height:kt.inst.getScreenHeight()-250}:{})}),(0,Tt.jsx)(an,{})]})]})})};var Wr=(new N).addSection(new lt(I("tabBar.worker.yourPatients"),(function(){at.inst.navigateTo(Br,void 0,I("header.worker.patients")),at.inst.setSidebarComponent(void 0,void 0)}),(function(){at.inst.clearScreens(),at.inst.setSidebarComponent((0,Tt.jsx)(Br,{}),I("header.worker.patients"))}),"home-variant","home-variant-outline")).addSection(new lt(I("tabBar.worker.newTriage"),(function(){at.inst.navigateTo(ir,void 0,I("header.worker.newTriage")),at.inst.setSidebarComponent(void 0,void 0)}),(function(){at.inst.navigateTo(ir,void 0,I("header.worker.newTriage")),at.inst.setSidebarComponent(void 0,void 0)}),"clipboard-account","clipboard-outline")).addSection(new lt(I("tabBar.worker.events"),(function(){at.inst.navigateTo(mr,void 0,I("header.worker.events")),at.inst.setSidebarComponent(void 0,void 0)}),(function(){at.inst.navigateTo(mr,void 0,I("header.worker.events")),at.inst.setSidebarComponent(void 0,void 0)}),"calendar-clock","calendar-clock-outline")).addSection(new lt(I("tabBar.worker.account"),(function(){at.inst.navigateTo(ln,void 0,I("header.worker.account")),at.inst.setSidebarComponent(void 0,void 0)}),(function(){at.inst.navigateTo(ln,void 0,I("header.worker.account")),at.inst.setSidebarComponent(void 0,void 0)}),"account-circle","account-circle-outline")),Lr=n(3535),Mr=n(2894),Ur=n(5640);const _r=function(e){var t=e.interfaceSection,n=void 0!=at.inst.focusedInterfaceSection&&at.inst.focusedInterfaceSection.matches(t.id),r=n?t.focusedIcon:t.icon,i=n?Ct.textDark:Ct.textSemiDark,o=hn.Medium;return(0,Tt.jsxs)(Vt,{spacing:5,style:{alignItems:"center",alignSelf:"flex-start",paddingBottom:8},children:[(0,Tt.jsx)(Qt.default,{onPress:t.activateOnTabBar,children:(0,Tt.jsx)(s.default,{style:{paddingVertical:10,paddingHorizontal:30},children:(0,Tt.jsx)(Yt,{icon:r,color:i,size:o})})}),(0,Tt.jsx)(s.default,{style:{position:"absolute",top:o+10+4,flex:1},children:(0,Tt.jsx)(Et,{typography:At.subscriptLabel.withColor(i),style:{alignSelf:"center",textAlign:"center"},children:t.title})})]})};function Fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hr=Pt.default.create({backButton:{alignItems:"center",paddingRight:6},header:{alignItems:"center",flexDirection:"row",justifyContent:"space-between",paddingHorizontal:22,paddingTop:10}});const zr=function(e){var t=e.title,n=e.buttonProps;return(0,Tt.jsxs)(s.default,{style:Rr({backgroundColor:Ct.screenBackgroundLight.getColor(),paddingBottom:10},Hr.header),children:[n.canGoBack?(0,Tt.jsx)(Jt.default,{onPress:function(){at.inst.navigateBack(n.navigation)},style:Hr.backButton,children:(0,Tt.jsx)(It.default,{name:"chevron-left",size:45,color:At.headerScreen.color,style:{marginLeft:-10}})}):null,(0,Tt.jsx)(Et,{style:{flex:1},typography:At.headerScreen,children:t})]})};var Vr=function(){return(0,Tt.jsx)(s.default,{style:Gr.emptyScreen,children:(0,Tt.jsx)(Et,{wide:!1,typography:At.body.withColor(Ct.textSemiDark),children:I("navigation.noScreen")})})},Gr=Pt.default.create({emptyScreen:{alignContent:"center",alignItems:"center",flex:10,justifyContent:"center"}});function qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qr(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yr=function(e){var t=e.leafInterface,n=(0,c.useState)([]),r=(0,o.default)(n,2),i=r[0],a=r[1],l=kt.inst.getOS()==mt.Web,u=(0,Mr.default)(),d=(0,Zn.useSafeAreaInsets)();(0,c.useEffect)((function(){at.inst.clearScreens();var e=it.screenStackUpdated.subscribe((function(){a((0,re.default)(at.inst.screens))}));return function(){e()}}),[]),(0,c.useEffect)((function(){at.inst.loadedNavigation(),at.inst.loadedNavigation=function(){}}),[i]);return(0,Tt.jsxs)(Vt,{style:{flex:1},children:[(0,Tt.jsx)(s.default,{onLayout:function(e){var t=e.nativeEvent.layout;t.width>0&&O.contentWidth.publish(t.width-2*nn.screenPadding)},style:{flex:1,width:"100%"},children:(0,Tt.jsx)(Ur.SafeAreaView,{edges:["top"],style:{flex:1},children:0==i.length?(0,Tt.jsx)(Vr,{}):(0,Tt.jsx)(u.Navigator,{children:i.map((function(e,t){return(0,Tt.jsx)(u.Screen,{name:e.id.toString(),component:e.component,options:function(n){var r=n.navigation;return Jr(Jr({},e.options),{},{animationEnabled:t>0&&!l,header:function(){return(0,Tt.jsx)(zr,{title:e.title,buttonProps:{canGoBack:t>0,navigation:r}})}})}},e.id.toString())}))})})}),(0,Tt.jsx)(Ur.SafeAreaView,{edges:["bottom"],children:(0,Tt.jsx)(Rt,{style:{width:"100%",justifyContent:"space-around",paddingHorizontal:8,paddingBottom:d.bottom>0?0:12},children:t.sections.map((function(e){return(0,Tt.jsx)(_r,{interfaceSection:e},e.id.toString())}))})})]})},$r=n(9899),Kr=function(e){return e[e.None=0]="None",e[e.ScaleToFit=1]="ScaleToFit",e[e.ScaleToFill=2]="ScaleToFill",e[e.ScaleToFillCrop=3]="ScaleToFillCrop",e}({}),Qr={"test.jpg":n(9980)};function Xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xr(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ei=function(e){var t=e.fileName,n=e.width,r=void 0===n?0:n,i=e.height,a=void 0===i?0:i,l=e.scale,s=void 0===l?Kr.None:l,u=e.style,d=(0,c.useState)({width:r,height:a}),f=(0,o.default)(d,2),g=f[0],p=f[1],h=(0,c.useState)("stretch"),v=(0,o.default)(h,2),y=v[0],b=v[1],S=(0,c.useState)({width:1,height:1}),w=(0,o.default)(S,2),x=w[0],j=w[1];return(0,c.useEffect)((function(){if(kt.inst.getOS()==mt.Web){var e=new window.Image;e.onload=function(){j({width:e.width,height:e.height})},e.src=Qr[t],s==Kr.ScaleToFill&&p(r>a?{width:r,height:void 0}:{width:x.width*a/x.height,height:void 0})}else{var n=Qr[t],i=$r.default.resolveAssetSource(n);j({width:i.width,height:i.height}),s==Kr.ScaleToFill&&p(r>a?{width:r,height:void 0}:{width:x.width*a/x.height,height:void 0})}}),[]),(0,c.useEffect)((function(){switch(s){case Kr.None:b("stretch");break;case Kr.ScaleToFit:b("contain");break;case Kr.ScaleToFill:case Kr.ScaleToFillCrop:b("cover");break;default:throw new m(s)}}),[]),(0,Tt.jsx)($r.default,{source:Qr[t],resizeMode:y,style:Zr({width:g.width,height:g.height,aspectRatio:s==Kr.None?void 0:1},u)})};function ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ni(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ti(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ti(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ri=function(e){var t=e.color,n=e.icon,r=void 0===n?null:n,i=e.iconColor,o=void 0===i?null:i,a=e.fileName,l=void 0===a?null:a,c=e.size,s=e.onlyIcon,u=void 0!==s&&s,d=e.style,f=e.onPress;return A(!(null==r&&null==l),"Can't create a LeafIconButton without neither an icon nor a filename"),(0,Tt.jsx)(Jt.default,{onPress:f,disabled:null==f,style:ni({backgroundColor:u?Ct.transparent.getColor():t.getColor(),borderRadius:u?0:50,width:c,height:c,justifyContent:"center"},d),children:null==r?(0,Tt.jsx)(ei,{fileName:l,width:1.8*c/3,height:1.8*c/3,scale:Kr.ScaleToFit,style:{alignSelf:"center",tintColor:null==o?void 0:o.getColor()}}):(0,Tt.jsx)(Yt,{icon:r,size:2.2*c/3,color:null!=o?o:new Ot("#ffffff"),style:{alignSelf:"center"}})})};const ii=function(e){var t=e.interfaceSection,n=void 0!=at.inst.focusedInterfaceSection&&at.inst.focusedInterfaceSection.matches(t.id),r=n?t.focusedIcon:t.icon;return(0,Tt.jsx)(on,{color:n?Ct.fillBackgroundLight:Ct.screenBackgroundLight,onPress:t.activateOnDrawer,children:(0,Tt.jsxs)(Rt,{children:[(0,Tt.jsx)(on,{color:n?Ct.textDark:Ct.fillBackgroundLight,style:{padding:8,borderRadius:10},children:(0,Tt.jsx)(Yt,{icon:r,color:n?Ct.screenBackgroundLight:Ct.textDark,size:hn.Small})}),(0,Tt.jsx)(vn,{size:12}),(0,Tt.jsx)(Et,{typography:At.drawerItem,wide:!1,children:t.title})]})})};function oi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ai(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const li=function(e){var t=e.leafInterface,n=(0,c.useState)(!1),r=(0,o.default)(n,2),i=r[0],a=r[1],l=(0,c.useState)(void 0),u=(0,o.default)(l,2),d=u[0],f=u[1],g=(0,c.useState)([]),p=(0,o.default)(g,2),h=p[0],v=p[1],y=(0,Mr.default)(),b=(0,Zn.useSafeAreaInsets)(),m=kt.inst.getOS()==mt.Web;(0,c.useEffect)((function(){at.inst.clearScreens();var e=it.sidebarComponentChanged.subscribe((function(){f(at.inst.sidebarComponent)})),t=it.screenStackUpdated.subscribe((function(){v((0,re.default)(at.inst.screens))}));return function(){e(),t()}}),[]),(0,c.useEffect)((function(){at.inst.loadedNavigation(),at.inst.loadedNavigation=function(){}}),[h]);var S=function(){a(!i)};return(0,Tt.jsxs)(Rt,{style:{flex:1},children:[i?void 0:(0,Tt.jsxs)(Vt,{style:{height:"100%",width:nn.drawerWidth,borderRightWidth:nn.borderWidth,borderRightColor:Ct.divider.getColor(),paddingHorizontal:16,paddingTop:b.top,paddingBottom:nn.screenPadding+b.bottom},children:[(0,Tt.jsxs)(Rt,{spacing:12,style:{width:"100%",alignItems:"center",paddingTop:12,paddingBottom:16},children:[(0,Tt.jsx)(ri,{icon:"book-open-outline",onlyIcon:!0,iconColor:Ct.textDark,size:hn.Large,color:Ct.textDark,onPress:S,style:{paddingLeft:nn.screenPadding-16-6}}),(0,Tt.jsx)(Et,{typography:At.headerSection,wide:!1,style:{},children:I("appName")})]}),t.sections.map((function(e){return(0,Tt.jsx)(ii,{interfaceSection:e},e.id.toString())})),(0,Tt.jsx)(an,{}),(0,Tt.jsx)(Nt,{label:I("button.logout"),color:Ct.fillBackgroundLight,typography:At.buttonSmall,wide:!1,icon:"logout",onPress:function(){O.loginStatus.publish(j.LoggedOut)}})]}),void 0==d?void 0:(0,Tt.jsx)(Vt,{style:{height:"100%",width:"30%",minWidth:nn.minSidebarWidth,maxWidth:nn.maxSidebarWidth,borderRightWidth:nn.borderWidth,borderRightColor:Ct.divider.getColor(),paddingTop:b.top},children:(0,Tt.jsxs)(Vt,{style:{flex:1,width:"100%"},children:[(0,Tt.jsxs)(Rt,{spacing:12,style:{alignItems:"center",width:"100%",paddingTop:12,paddingLeft:nn.screenPadding,paddingBottom:10},children:[i?(0,Tt.jsx)(ri,{icon:"book-open-outline",onlyIcon:!0,iconColor:Ct.textDark,size:hn.Large,color:Ct.textDark,onPress:S,style:{marginLeft:-6}}):void 0,(0,Tt.jsx)(Et,{typography:At.headerSection,wide:!1,style:{textAlign:"center"},children:at.inst.sidebarHeader})]}),d]})}),(0,Tt.jsx)(s.default,{style:{flex:1,minWidth:nn.minSidebarWidth,paddingTop:12},onLayout:function(e){var t=e.nativeEvent.layout;t.width>0&&O.contentWidth.publish(t.width-2*nn.screenPadding)},children:(0,Tt.jsxs)(Ur.SafeAreaView,{style:{height:"100%"},children:[(0,Tt.jsxs)(Rt,{spacing:12,style:{paddingLeft:nn.screenPadding,alignItems:"center"},children:[i&&void 0==d?(0,Tt.jsx)(ri,{icon:"book-open-outline",onlyIcon:!0,iconColor:Ct.textDark,size:hn.Large,color:Ct.textDark,onPress:S,style:{marginLeft:-6}}):void 0,(0,Tt.jsx)(Et,{typography:At.subscript,wide:!1,children:h.map((function(e){return e.title})).join(" / ")})]}),0==h.length?(0,Tt.jsx)(Vr,{}):(0,Tt.jsx)(y.Navigator,{children:h.map((function(e,t){return(0,Tt.jsx)(y.Screen,{name:e.id.toString(),component:e.component,options:function(n){var r=n.navigation;return ai(ai({},e.options),{},{animationEnabled:t>0&&!m,header:function(){return(0,Tt.jsx)(zr,{title:e.title,buttonProps:{canGoBack:t>0,navigation:r}})}})}},e.id.toString())}))})]})})]})};var ci=function(e){var t=e.leafInterface,n=(0,c.useState)(kt.inst.getNavigatorFromScreenWidth()==xt.drawerNavigator),r=(0,o.default)(n,2),i=r[0],a=r[1];return(0,c.useEffect)((function(){var e=O.contentWidth.subscribe((function(){a(kt.inst.getNavigatorFromScreenWidth()==xt.drawerNavigator)}));return function(){e()}}),[]),(0,Tt.jsx)(Lr.default,{children:i?(0,Tt.jsx)(li,{leafInterface:t}):(0,Tt.jsx)(Yr,{leafInterface:t})})};function si(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?si(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):si(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var di=function(e){var t=e.screen,n=(0,c.useState)([t]),r=(0,o.default)(n,2),i=r[0],a=r[1],l=kt.inst.getOS()==mt.Web,u=(0,Mr.default)();(0,c.useEffect)((function(){at.inst.setStartingScreen(t);var e=it.screenStackUpdated.subscribe((function(){a((0,re.default)(at.inst.screens))}));return function(){e()}}),[]),(0,c.useEffect)((function(){at.inst.loadedNavigation(),at.inst.loadedNavigation=function(){}}),[i]);return(0,Tt.jsx)(s.default,{onLayout:function(e){var t=e.nativeEvent.layout;t.width>0&&O.contentWidth.publish(t.width-2*nn.screenPadding)},style:{flex:1},children:(0,Tt.jsx)(Lr.default,{children:(0,Tt.jsx)(u.Navigator,{children:i.map((function(e,t){return(0,Tt.jsx)(u.Screen,{name:e.id.toString(),component:e.component,options:function(n){n.navigation;return ui(ui({},e.options),{},{animationEnabled:t>0&&!l,header:function(){return(0,Tt.jsx)(Tt.Fragment,{})}})}},e.id.toString())}))})})})};function fi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fi(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const pi=function(e){var t=e.color,n=void 0===t?Ct.textDark:t,r=e.checkColor,i=void 0===r?Ct.textLight:r,a=e.initialValue,l=void 0!==a&&a,s=e.size,u=void 0===s?16:s,d=e.style,f=e.onValueChange,g=(0,c.useState)(l),p=(0,o.default)(g,2),h=p[0],v=p[1];return(0,Tt.jsx)(cn.TouchableOpacity,{style:gi({backgroundColor:h?n.getColor():"transparent",borderRadius:u/2.5,borderWidth:u/8,aspectRatio:1,borderColor:n.getColor(),justifyContent:"center"},d),onPress:function(){f&&f(!h),v(!h)},children:(0,Tt.jsx)(Yt,{icon:h?"check-bold":"close-thick",color:h?i:n,size:u})})};function hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hi(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const yi=function(e){var t=e.label,n=e.textColor,r=void 0===n?Ct.textDark:n,i=e.color,a=void 0===i?Ct.textBackgroundDark:i,l=e.wide,u=void 0===l||l,d=e.valid,f=void 0===d?void 0:d,g=e.style,p=e.maskText,h=e.onTextChange,v=(0,c.useState)(""),y=(0,o.default)(v,2),b=y[0],m=y[1],S=(0,c.useState)(!1),w=(0,o.default)(S,2),x=w[0],j=w[1],k=(0,c.useRef)(null),C=At.body.withColor(r),P=(0,c.useState)(!0),D=(0,o.default)(P,2),A=D[0],T=D[1],E=At.subscript,I=void 0==f?E.color:f?Ct.textSuccess.getColor():Ct.textError.getColor();return(0,c.useEffect)((function(){var e=O.clearAllInputs.subscribe((function(){m(""),h("")}));return function(){e()}}),[]),(0,Tt.jsxs)(s.default,{children:[(0,Tt.jsx)(cn.TouchableWithoutFeedback,{style:[u?{width:"100%"}:{alignSelf:"center"},{flexDirection:"row"}],onPress:function(){k.current&&k.current.focus()},children:(0,Tt.jsxs)(Vt,{spacing:2,style:{width:u?"100%":void 0,alignSelf:u?void 0:"center",backgroundColor:a.getColor(),paddingVertical:10,paddingHorizontal:14,borderRadius:12,borderColor:x?C.color:a.getColor(),borderWidth:2},children:[(0,Tt.jsx)(Et,{typography:E,style:{color:I},children:t}),(0,Tt.jsx)(Kt.default,{ref:k,style:[vi({backgroundColor:a.getColor()},bt.default.select({web:{outlineStyle:"none"}})),C.getStylesheet(),g],onChangeText:function(e){m(void 0!=p?p(e):e),h(e)},value:b,onFocus:function(){return j(!0)},onBlur:function(){return j(!1)},secureTextEntry:A})]})}),(0,Tt.jsx)(Jt.default,{style:{position:"absolute",padding:4,right:12,top:16,zIndex:1},onPress:function(){return T(!A)},children:(0,Tt.jsx)(Yt,{icon:A?"eye":"eye-off",size:hn.Small,color:Ct.shadow})})]})};const bi=function(e){var t=e.navigation,n=rr(),i=n.showErrorNotification,a=n.showSuccessNotification,l=(0,c.useState)(void 0),u=(0,o.default)(l,2),d=u[0],f=u[1],g=(0,c.useState)(void 0),p=(0,o.default)(g,2),h=p[0],v=p[1],y=(0,c.useState)(void 0),b=(0,o.default)(y,2),m=b[0],S=b[1],w=(0,c.useState)(void 0),x=(0,o.default)(w,2),k=x[0],C=x[1],P=function(){var e=(0,r.default)((function*(){if(Gn.stringIsValid(d)&&Gn.emailIsValid(h)&&Gn.stringIsValid(m)&&Gn.stringIsValid(k)&&m==k){var e=new R(d);yield tt.inst.fetchWorker(e);var t=tt.inst.getWorker(e);if(null!=t&&!t.accountActivated){if(t.setAccountActivated(!0),t.setEmail(h),void 0!=m){var n=new Je(e,m);tt.inst.activateNewAccount(n)}return tt.inst.updateWorker(t),tt.inst.setLoggedInAccount(t),a(I("feedback.accountActivated")),void O.loginStatus.publish(j.Worker)}yield tt.inst.fetchLeader(e);var r=tt.inst.getLeader(e);if(null!=r&&!r.accountActivated){if(r.setAccountActivated(!0),r.setEmail(h),void 0!=m){var o=new Je(e,m);tt.inst.activateNewAccount(o)}return tt.inst.updateLeader(r),tt.inst.setLoggedInAccount(r),a(I("feedback.accountActivated")),void O.loginStatus.publish(j.Leader)}var l=yield tt.inst.getAdmin(e);if(null!=l&&!l.accountActivated){if(l.setAccountActivated(!0),l.setEmail(h),void 0!=m){var c=new Je(e,m);tt.inst.activateNewAccount(c)}return tt.inst.updateAdmin(l),tt.inst.setLoggedInAccount(l),a(I("feedback.accountActivated")),void O.loginStatus.publish(j.Admin)}i(I("feedback.noUnactiviatedAccount"))}else i(I("feedback.invalidInputs"))}));return function(){return e.apply(this,arguments)}}();return(0,Tt.jsx)($n,{centerContent:!0,children:(0,Tt.jsxs)(Vt,{spacing:nn.screenSpacing,style:{flex:1,alignItems:"center",width:"100%",backgroundColor:Ct.screenBackgroundLight.getColor(),flexWrap:"nowrap"},children:[(0,Tt.jsx)(Et,{typography:At.headerScreen,style:{textAlign:"center",paddingBottom:20},children:I("login.activateAccount")}),(0,Tt.jsxs)(s.default,{style:{maxWidth:400,width:"100%"},children:[(0,Tt.jsx)(Fn,{label:I("inputLabel.providedUsername"),textColor:Gn.stringIsValid(d)||!d?Ct.textDark:Ct.textError,color:Ct.textBackgroundDark,onTextChange:function(e){f(e)}}),(0,Tt.jsx)(Gt,{size:nn.textInputSpacing}),(0,Tt.jsx)(Fn,{label:I("inputLabel.setEmail"),textColor:Gn.emailIsValid(h)||!h?Ct.textDark:Ct.textError,color:Ct.textBackgroundDark,onTextChange:function(e){v(e)}}),(0,Tt.jsx)(Gt,{size:nn.textInputSpacing}),(0,Tt.jsx)(yi,{label:I("inputLabel.setPassword"),textColor:Gn.stringIsValid(m)||!m?Ct.textDark:Ct.textError,color:Ct.textBackgroundDark,onTextChange:function(e){S(e)}}),(0,Tt.jsx)(Gt,{size:nn.textInputSpacing}),(0,Tt.jsx)(yi,{label:I("inputLabel.confirmPassword"),textColor:Gn.stringIsValid(k)&&k==m?Ct.textDark:Ct.textError,color:Ct.textBackgroundDark,onTextChange:function(e){C(e)}}),(0,Tt.jsx)(Nt,{label:I("button.activate"),icon:"badge-account-horizontal",typography:At.button,type:st.Filled,color:Ct.accent,style:{marginTop:36},onPress:P}),(0,Tt.jsx)(Nt,{label:I("button.cancel"),typography:At.button.withColor(Ct.textSemiDark),type:st.Filled,color:Ct.fillBackgroundLight,style:{marginTop:12},onPress:function(){at.inst.navigateBack(t)}})]})]})})};var mi=function(){var e=(0,r.default)((function*(){yield ce.inst.deleteCollection(ne.Workers),yield ce.inst.deleteCollection(ne.Leaders),yield ce.inst.deleteCollection(ne.Patients),yield ce.inst.deleteCollection(ne.Admins),yield ce.inst.deleteCollection(ne.Accounts);var e=new z(new R("w"),"Antony","Loose","antony.loose@gmail.com",X.H1,!0),t=new z(R.generate(),"Mia","Garcia","mia.garcia@gmail.com",X.H2,!0),n=new z(R.generate(),"Oliver","Robin","oliver.robin@gmail.com",X.H1,!0);yield tt.inst.submitNewWorker(e),yield tt.inst.submitNewWorker(t),yield tt.inst.submitNewWorker(n),yield tt.inst.activateNewAccount(new Je(e.id,"worker")),yield tt.inst.activateNewAccount(new Je(t.id,"worker")),yield tt.inst.activateNewAccount(new Je(n.id,"worker"));var r=new G(new R("a"),"Alex","Zhou","alex.zhou@gmail.com",X.H1,!0);yield tt.inst.submitNewAdmin(r),yield tt.inst.activateNewAccount(new Je(r.id,"admin"));var i=new ge(new R("l"),"Joel","Yang","joel.yang@gmail.com",X.H1,!0),o=new ge(R.generate(),"Jacob","Gonz","jacob.gonz@gmail.com",X.H2,!0),a=new ge(R.generate(),"Emma","Lopez","emma.lopez@gmail.com",X.H1,!0);yield tt.inst.submitNewLeader(i),yield tt.inst.submitNewLeader(o),yield tt.inst.submitNewLeader(a),yield tt.inst.activateNewAccount(new Je(i.id,"leader")),yield tt.inst.activateNewAccount(new Je(o.id,"leader")),yield tt.inst.activateNewAccount(new Je(a.id,"leader"));var l=ke.new(new me("4529-7684-0291"),new Date("1982-08-25"),"John","Doe",Oe.male,"0428472940",we.new(X.H1.getWardFromId("W1"),X.H1,X.H1.getMedUnitFromId("M1"),"Feelings of extreme sadness, worthlessness, and hopelessness for the past 3 months. She mentions experiencing insomnia and a lack of appetite.",Ie.semiUrgent),"3182",e.id),c=ke.new(new me("1253-8976-5487"),new Date("1990-01-10"),"Jane","Smith",Oe.female,"0412345678",we.new(X.H2.getWardFromId("W2"),X.H2,X.H2.getMedUnitFromId("M2"),"Experiencing panic attacks daily and has trouble leaving the house.",Ie.urgent),"3101",e.id),s=ke.new(new me("9874-3256-1122"),new Date("1975-04-12"),"Alice","Brown",Oe.female,"0412987654",we.new(X.H1.getWardFromId("W1"),X.H1,X.H1.getMedUnitFromId("M3"),"Reports of auditory hallucinations and feeling paranoid.",Ie.emergency),"3205",t.id),u=ke.new(new me("6548-9321-8765"),new Date("1988-11-05"),"Bob","Williams",Oe.male,"0401234567",we.new(X.H1.getWardFromId("W2"),X.H1,X.H1.getMedUnitFromId("M1"),"Has been feeling very anxious especially in social situations.",Ie.semiUrgent),"3108",t.id),d=ke.new(new me("2389-8746-5123"),new Date("1972-09-15"),"Charlie","Jones",Oe.male,"0409876543",we.new(X.H1.getWardFromId("W3"),X.H1,X.H1.getMedUnitFromId("M2"),"Has persistent thoughts of self-harm, needs immediate attention.",Ie.emergency),"3155",t.id),f=ke.new(new me("8423-6512-9834"),new Date("2000-02-28"),"Diana","Taylor",Oe.female,"0412340987",we.new(X.H2.getWardFromId("W1"),X.H2,X.H2.getMedUnitFromId("M3"),"Struggling with eating and has a fear of gaining weight.",Ie.urgent),"3199",n.id),g=ke.new(new me("5234-9801-7654"),new Date("1995-06-03"),"Ethan","Miller",Oe.male,"0408765432",we.new(X.H1.getWardFromId("W3"),X.H1,X.H1.getMedUnitFromId("M1"),"Experiencing mood swings and periods of intense depression.",Ie.semiUrgent),"3122",n.id),p=ke.new(new me("1002-8765-4390"),new Date("1985-12-22"),"Fiona","Wilson",Oe.female,"0411122334",we.new(X.H2.getWardFromId("W2"),X.H2,X.H2.getMedUnitFromId("M2"),"Constant fatigue and loss of interest in daily activities.",Ie.nonUrgent),"3166",n.id);yield tt.inst.submitTriage(l),yield tt.inst.submitTriage(c),yield tt.inst.submitTriage(s),yield tt.inst.submitTriage(u),yield tt.inst.submitTriage(d),yield tt.inst.submitTriage(f),yield tt.inst.submitTriage(g),yield tt.inst.submitTriage(p)}));return function(){return e.apply(this,arguments)}}();const Si=function(e){var t=e.navigation,n=rr(),i=n.showErrorNotification,a=n.showSuccessNotification,l=(0,c.useState)(void 0),u=(0,o.default)(l,2),d=u[0],f=u[1],g=(0,c.useState)(void 0),p=(0,o.default)(g,2),h=p[0],v=p[1],y=(0,c.useState)(void 0),b=(0,o.default)(y,2),m=b[0],S=b[1],w=function(){var e=(0,r.default)((function*(){if(Gn.stringIsValid(d)&&Gn.stringIsValid(h)&&Gn.stringIsValid(m)&&h==m){var e=new R(d),n=yield tt.inst.fetchAccount(e);null!=n?(void 0!=h&&(n.setPassword(h),tt.inst.updateAccount(n)),a(I("feedback.updatedPassword")),at.inst.navigateBack(t)):i(I("feedback.accountNotExist"))}else i(I("feedback.invalidInputs"))}));return function(){return e.apply(this,arguments)}}();return(0,Tt.jsx)($n,{centerContent:!0,children:(0,Tt.jsxs)(Vt,{spacing:nn.screenSpacing,style:{flex:1,alignItems:"center",width:"100%",backgroundColor:Ct.screenBackgroundLight.getColor(),flexWrap:"nowrap"},children:[(0,Tt.jsx)(Et,{typography:At.headerScreen,style:{textAlign:"center",paddingBottom:20},children:I("login.resetPassword")}),(0,Tt.jsxs)(s.default,{style:{maxWidth:400,width:"100%"},children:[(0,Tt.jsx)(Fn,{label:I("inputLabel.username"),textColor:Gn.stringIsValid(d)||!d?Ct.textDark:Ct.textError,color:Ct.textBackgroundDark,onTextChange:function(e){f(e)}}),(0,Tt.jsx)(Gt,{size:nn.textInputSpacing}),(0,Tt.jsx)(yi,{label:I("inputLabel.newPassword"),textColor:Gn.stringIsValid(h)||!h?Ct.textDark:Ct.textError,color:Ct.textBackgroundDark,onTextChange:function(e){v(e)}}),(0,Tt.jsx)(Gt,{size:nn.textInputSpacing}),(0,Tt.jsx)(yi,{label:I("inputLabel.confirmNewPassword"),textColor:Gn.stringIsValid(m)&&m==h?Ct.textDark:Ct.textError,color:Ct.textBackgroundDark,onTextChange:function(e){S(e)}}),(0,Tt.jsx)(Nt,{label:I("button.reset"),icon:"badge-account-horizontal",typography:At.button,type:st.Filled,color:Ct.accent,style:{marginTop:36},onPress:w}),(0,Tt.jsx)(Nt,{label:I("button.cancel"),typography:At.button.withColor(Ct.textSemiDark),type:st.Filled,color:Ct.fillBackgroundLight,style:{marginTop:12},onPress:function(){at.inst.navigateBack(t)}}),(0,Tt.jsx)($t,{label:"Reset Demo",style:{paddingTop:12},wide:!1,typography:At.subscript.withWeight(ft.SemiBold),onPress:function(){mi()}})]})]})})};function wi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ji=function(e){var t=e.label,n=e.textColor,r=void 0===n?Ct.textDark:n,i=e.color,a=void 0===i?Ct.textBackgroundDark:i,l=e.wide,u=void 0===l||l,d=e.valid,f=void 0===d?void 0:d,g=e.style,p=e.onTextChange,h=(0,c.useState)(""),v=(0,o.default)(h,2),y=v[0],b=v[1],m=(0,c.useState)(!1),S=(0,o.default)(m,2),w=S[0],x=S[1],j=(0,c.useRef)(null),k=At.body.withColor(r),C=(0,c.useState)(!0),P=(0,o.default)(C,2),D=P[0],A=P[1];void 0!=f&&k.withColor(f?Ct.textSuccess:Ct.textError);var T=At.body.withColor(Ct.textSemiDark);return(0,c.useEffect)((function(){var e=O.clearAllInputs.subscribe((function(){b(""),p("")}));return function(){e()}}),[]),(0,Tt.jsxs)(s.default,{style:[u?{width:"100%"}:{alignSelf:"center"},{flexDirection:"row",backgroundColor:a.getColor(),borderRadius:12,borderColor:w?k.color:a.getColor(),borderWidth:2}],children:[(0,Tt.jsx)(Qt.default,{onPress:function(){j.current&&j.current.focus()},children:(0,Tt.jsx)(s.default,{style:xi({position:"absolute",flexDirection:"row",height:"100%",paddingHorizontal:16},bt.default.select({web:{cursor:"text"}})),children:(0,Tt.jsx)(Et,{typography:T,style:{alignSelf:"center"},children:0==y.length?t:""})})}),(0,Tt.jsx)(Kt.default,{ref:j,style:[u?{width:"100%"}:{alignSelf:"center"},xi({paddingVertical:12,paddingHorizontal:16},bt.default.select({web:{outlineStyle:"none"}})),k.getStylesheet(),g],onChangeText:function(e){b(e),p(e)},value:y,onFocus:function(){return x(!0)},onBlur:function(){return x(!1)},secureTextEntry:D}),(0,Tt.jsx)(Jt.default,{style:{position:"absolute",padding:3,right:12,alignSelf:"center",zIndex:1},onPress:function(){return A(!D)},children:(0,Tt.jsx)(Yt,{icon:D?"eye":"eye-off",size:hn.Small,color:Ct.shadow})})]})};const ki=function(){function e(){(0,g.default)(this,e)}return(0,f.default)(e,null,[{key:"isCorrectPassword",value:function(e,t){return e===t}}]),e}();const Oi=function(e){var t=e.navigation,n=rr(),i=n.showErrorNotification,a=n.showSuccessNotification,l=c.useState(""),u=(0,o.default)(l,2),d=u[0],f=u[1],g=c.useState(""),p=(0,o.default)(g,2),h=p[0],v=p[1],y=function(){var e=(0,r.default)((function*(){if(Gn.stringIsValid(d)&&Gn.stringIsValid(h)){var e=new R(d),t=yield tt.inst.fetchAccount(e);if(null!=t&&ki.isCorrectPassword(h,t.password)){yield tt.inst.fetchWorker(e);var n=tt.inst.getWorker(e);if(null!=n)return tt.inst.setLoggedInAccount(n),O.loginStatus.publish(j.Worker),void a(I("feedback.success"));yield tt.inst.fetchLeader(e);var r=tt.inst.getLeader(e);if(null!=r)return tt.inst.setLoggedInAccount(r),O.loginStatus.publish(j.Leader),void a(I("feedback.success"));var o=yield tt.inst.getAdmin(e);return null!=o?(tt.inst.setLoggedInAccount(o),O.loginStatus.publish(j.Admin),void a(I("feedback.success"))):void 0}i(I("feedback.incorrectUsernamePassword"))}else i(I("feedback.incorrectUsernamePassword"))}));return function(){return e.apply(this,arguments)}}();return(0,Tt.jsxs)(Vt,{spacing:nn.screenSpacing,style:{flex:1,alignItems:"center",width:"100%",padding:nn.screenPadding,backgroundColor:Ct.screenBackgroundLight.getColor()},children:[(0,Tt.jsx)(an,{}),(0,Tt.jsx)(Et,{typography:At.display,style:{textAlign:"center",paddingBottom:20},children:I("login.title")}),(0,Tt.jsxs)(s.default,{style:{maxWidth:400,alignItems:"center",width:"100%"},children:[(0,Tt.jsx)(en,{label:I("inputLabel.username"),textColor:Ct.textDark,color:Ct.textBackgroundDark,onTextChange:function(e){f(e)}}),(0,Tt.jsx)(Gt,{size:nn.textInputSpacing}),(0,Tt.jsx)(ji,{label:I("inputLabel.password"),textColor:Ct.textDark,color:Ct.textBackgroundDark,onTextChange:function(e){v(e)}}),(0,Tt.jsx)(Gt,{size:nn.textInputSpacing}),(0,Tt.jsxs)(Rt,{style:{alignItems:"center",width:"100%"},children:[(0,Tt.jsx)(pi,{initialValue:!0,onValueChange:function(e){},color:Ct.textSemiDark,style:{marginRight:8}}),(0,Tt.jsx)(Et,{typography:At.subscript.withWeight(ft.SemiBold),wide:!1,children:I("label.rememberMe")}),(0,Tt.jsx)(an,{}),(0,Tt.jsx)($t,{label:I("button.activateAccount"),onPress:function(){at.inst.navigateTo(bi,t,void 0)},typography:At.subscript.withWeight(ft.SemiBold)})]}),(0,Tt.jsx)(Nt,{label:I("button.login"),icon:"arrow-right-circle",typography:At.button,type:st.Filled,color:Ct.accent,style:{marginTop:36},onPress:y}),(0,Tt.jsx)($t,{label:I("button.resetPassword"),typography:At.subscript.withWeight(ft.SemiBold),style:{marginTop:12},onPress:function(){at.inst.navigateTo(Si,t,void 0)}})]}),(0,Tt.jsx)(an,{}),(0,Tt.jsx)(an,{}),(0,Tt.jsx)(an,{})]})};const Ci=function(e){var t=e.worker,n=(e.style,e.onPress),r=t.id.toString(),i=(0,c.useState)([]),a=(0,o.default)(i,2),l=a[0],s=a[1];return(0,c.useEffect)((function(){var e=O.patientsFetched.subscribe((function(){s(tt.inst.getAllocatedPatientsTo(t))}));return s(tt.inst.getAllocatedPatientsTo(t)),function(){e()}}),[t]),(0,Tt.jsx)(on,{onPress:n,children:(0,Tt.jsxs)(Vt,{style:{flex:1},children:[(0,Tt.jsx)(Et,{typography:At.title3,children:t.fullName}),(0,Tt.jsx)(Gt,{size:8}),(0,Tt.jsx)(Et,{typography:At.subscript,children:I("workerCard.id",""+r)}),(0,Tt.jsx)(Et,{typography:At.subscript,children:I("workerCard.numPatients",""+l.length)})]})})};const Pi=function(e){var t=e.navigation,n=tt.inst.getActiveWorker(),i=c.useState(!1),a=(0,o.default)(i,2),l=a[0],s=a[1],u=rr(),d=u.showErrorNotification,f=u.showSuccessNotification;if(!n)return(0,Tt.jsx)(bn,{});var g=function(){var e=(0,r.default)((function*(){if(s(!1),yield tt.inst.fetchAllocatedPatientsTo(n),0!==tt.inst.getAllocatedPatientsTo(n).length)return s(!1),void d(I("feedback.failDeleteNurseAccount"));(yield tt.inst.deleteWorker(n))?(tt.inst.fetchAllWorkers(),at.inst.navigateBack(t),f(I("feedback.successDeleteAccount"))):d(I("feedback.accountNotExist"))}));return function(){return e.apply(this,arguments)}}();return(0,Tt.jsx)(wn,{children:(0,Tt.jsxs)(Vt,{spacing:nn.screenSpacing,style:{flex:1},children:[(0,Tt.jsx)(Et,{typography:At.title2.withWeight(ft.Bold),children:n.role.toString()}),(0,Tt.jsx)(on,{color:Ct.fillBackgroundLight,children:(0,Tt.jsx)(Et,{typography:At.body,children:I("label.id")+n.id.toString()})}),(0,Tt.jsx)(Gt,{size:32}),(0,Tt.jsx)(qt,{visible:l,setVisible:s,title:I("actions.removeNurse")+' "'+n.fullName+'"',onCancel:function(){s(!1)},onDone:g,doneLabel:"Remove",children:(0,Tt.jsx)(Et,{typography:At.title4,wide:!1,children:I("label.removeAccountWarning")})}),(0,Tt.jsx)(Nt,{label:I("button.deleteAccount"),icon:"delete",typography:At.button,type:st.Filled,color:Ct.textError,onPress:function(){return s(!0)}}),(0,Tt.jsx)(Et,{typography:At.subscript,wide:!1,children:I("operation.removeAccount")})]})})};function Di(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ai(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Di(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ti=function(e){var t=e.navigation,n=c.useState(tt.inst.getAllWorkers()),r=(0,o.default)(n,2),i=r[0],a=r[1],l=c.useState(i),s=(0,o.default)(l,2),u=s[0],d=s[1],f=c.useState(""),g=(0,o.default)(f,2),p=(g[0],g[1]);(0,c.useEffect)((function(){var e=O.workersFetched.subscribe((function(){a(tt.inst.getAllWorkers()),d(tt.inst.getAllWorkers())}));return tt.inst.fetchAllPatients(),tt.inst.fetchAllWorkers(),function(){e()}}),[]);return(0,Tt.jsx)(wn,{children:(0,Tt.jsx)(Vt,{spacing:nn.screenSpacing,style:{flex:1},children:(0,Tt.jsxs)(Sr.default,{style:{flex:1,width:"100%"},children:[(0,Tt.jsx)(Er,{onTextChange:function(e){p(e)},data:i,setData:d,dataToString:function(e){return e.fullName}}),(0,Tt.jsx)(Gt,{size:nn.cardTopPadding}),(0,Tt.jsx)(Pn.default,{data:u,renderItem:function(e){var n=e.item;return(0,Tt.jsx)(Ci,{worker:n,onPress:function(){!function(e){tt.inst.setActiveWorker(e),at.inst.navigateTo(Pi,t,e.fullName)}(n)}})},keyExtractor:function(e){return e.id.toString()},ItemSeparatorComponent:function(){return(0,Tt.jsx)(Gt,{size:nn.cardSpacing})},scrollEnabled:!1,style:Ai({width:"100%",overflow:"visible",flexGrow:0},kt.inst.getOS()==mt.Web&&kt.inst.getScreenType()!=St.Mobile?{height:kt.inst.getScreenHeight()-145}:{})}),(0,Tt.jsx)(an,{})]})})})};const Ei=function(e){var t=e.leader,n=e.style,r=e.onPress,i=t.id.toString();return(0,Tt.jsx)(on,{color:Ct.fillBackgroundLight,style:n,onPress:r,children:(0,Tt.jsx)(Rt,{children:(0,Tt.jsxs)(Vt,{children:[(0,Tt.jsx)(s.default,{style:{alignSelf:"flex-start"},children:(0,Tt.jsx)(Et,{typography:At.title3,children:t.firstName})}),(0,Tt.jsx)(Gt,{size:6}),(0,Tt.jsx)(Et,{typography:At.subscript,wide:!1,style:{alignSelf:"flex-start"},children:"ID: "+i})]})})})};const Ii=function(e){var t=e.navigation,n=tt.inst.getActiveLeader(),i=c.useState(!1),a=(0,o.default)(i,2),l=a[0],s=a[1],u=rr(),d=u.showErrorNotification,f=u.showSuccessNotification;if(!n)return(0,Tt.jsx)(bn,{});var g=function(){var e=(0,r.default)((function*(){s(!1),(yield tt.inst.deleteLeader(n))?(tt.inst.fetchAllLeaders(),at.inst.navigateBack(t),f(I("feedback.successDeleteAccount"))):d(I("feedback.accountNotExist"))}));return function(){return e.apply(this,arguments)}}();return(0,Tt.jsx)(wn,{children:(0,Tt.jsxs)(Vt,{spacing:nn.screenSpacing,style:{flex:1},children:[(0,Tt.jsx)(Et,{typography:At.title2.withWeight(ft.Bold),children:n.role.toString()}),(0,Tt.jsx)(on,{color:Ct.fillBackgroundLight,children:(0,Tt.jsx)(Et,{typography:At.body,children:I("label.id")+n.id.toString()})}),(0,Tt.jsx)(Gt,{size:32}),(0,Tt.jsx)(qt,{visible:l,setVisible:s,title:I("actions.removeLeader")+' "'+n.fullName+'"',onCancel:function(){s(!1)},onDone:g,doneLabel:"Remove",children:(0,Tt.jsx)(Et,{typography:At.title4,wide:!1,children:I("label.removeAccountWarning")})}),(0,Tt.jsx)(Nt,{label:I("button.deleteAccount"),icon:"delete",typography:At.button,type:st.Filled,color:Ct.textError,onPress:function(){return s(!0)}}),(0,Tt.jsx)(Et,{typography:At.subscript,wide:!1,children:I("operation.removeAccount")})]})})};function Ni(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ni(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ni(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Wi=function(e){var t=e.navigation,n=c.useState(tt.inst.getAllLeaders()),r=(0,o.default)(n,2),i=r[0],a=r[1],l=c.useState(i),s=(0,o.default)(l,2),u=s[0],d=s[1],f=c.useState(""),g=(0,o.default)(f,2),p=(g[0],g[1]);(0,c.useEffect)((function(){var e=O.leadersFetched.subscribe((function(){a(tt.inst.getAllLeaders()),d(tt.inst.getAllLeaders())}));return tt.inst.fetchAllLeaders(),function(){e()}}),[]);return(0,Tt.jsx)(wn,{children:(0,Tt.jsx)(Vt,{spacing:nn.screenSpacing,style:{flex:1},children:(0,Tt.jsxs)(Sr.default,{style:{flex:1,width:"100%"},children:[(0,Tt.jsx)(Er,{onTextChange:function(e){p(e)},data:i,setData:d,dataToString:function(e){return e.fullName}}),(0,Tt.jsx)(Gt,{size:nn.cardTopPadding}),(0,Tt.jsx)(Pn.default,{data:u,renderItem:function(e){var n=e.item;return(0,Tt.jsx)(Ei,{leader:n,onPress:function(){!function(e){tt.inst.setActiveLeader(e),at.inst.navigateTo(Ii,t,e.fullName)}(n)}})},keyExtractor:function(e){return e.id.toString()},ItemSeparatorComponent:function(){return(0,Tt.jsx)(Gt,{size:nn.cardSpacing})},scrollEnabled:!1,style:Bi({width:"100%",overflow:"visible",flexGrow:0},kt.inst.getOS()==mt.Web&&kt.inst.getScreenType()!=St.Mobile?{height:kt.inst.getScreenHeight()-145}:{})}),(0,Tt.jsx)(an,{})]})})})};const Li=function(e){var t=e.employee,n=t.id.toString();return(0,Tt.jsx)(on,{color:Ct.fillBackgroundLight,style:{width:"100%"},children:(0,Tt.jsxs)(Vt,{style:{flexWrap:"nowrap"},children:[(0,Tt.jsxs)(Rt,{style:{width:"100%"},children:[(0,Tt.jsxs)(Vt,{spacing:4,style:{flex:1},children:[(0,Tt.jsx)(Et,{typography:At.title3,children:I("label.accountCreated1Param",t.role.toString())}),(0,Tt.jsx)(Et,{typography:At.subscript,children:I("label.id")+n})]}),(0,Tt.jsx)(Yt,{icon:"check-bold",color:Ct.textSuccess,size:hn.Large})]}),(0,Tt.jsx)(Gt,{size:22}),(0,Tt.jsx)(Et,{typography:At.subscript,children:I("operation.activeAccount")})]})})};const Mi=function(e){var t=e.style,n=e.onSelection,r=(0,c.useState)(void 0),i=(0,o.default)(r,2),a=i[0],l=i[1];return(0,Tt.jsx)(s.default,{style:t,children:(0,Tt.jsx)(Vt,{spacing:8,children:(0,Tt.jsx)(dn,{label:I("label.selectRole"),options:[new fn(_.worker,_.worker.toString()),new fn(_.leader,_.leader.toString()),new fn(_.admin,_.admin.toString())],value:a,selectedBackgroundColor:void 0==a?void 0:Ct.accent,selectedLabelColor:void 0==a?void 0:Ct.textTriageCode(a.value),onSetValue:function(e){l(e),n(null==e?void 0:e.value)}})})})};const Ui=function(e){var t,n=e.navigation,i=rr().showErrorNotification,a=c.useState(null),l=(0,o.default)(a,2),s=l[0],u=l[1],d=c.useState(""),f=(0,o.default)(d,2),g=f[0],p=f[1],h=c.useState(""),v=(0,o.default)(h,2),y=v[0],b=v[1],m=c.useState(void 0),S=(0,o.default)(m,2),w=S[0],x=S[1],j=(0,c.useState)(void 0),k=(0,o.default)(j,2),O=k[0],C=k[1],P=function(){var e=(0,r.default)((function*(){if(!(Gn.stringIsValid(g)&&Gn.stringIsValid(y)&&Gn.valueIsDefined(w)&&(w.matches(_.admin)||Gn.valueIsDefined(O))))return u(null),void i(I("feedback.invalidInputs"));var e=null;if(w.matches(_.admin)){var t=G.new(g,y);(yield tt.inst.submitNewAdmin(t))&&(e=t)}else if(w.matches(_.worker)){var n=z.new(g,y,O.value);(yield tt.inst.submitNewWorker(n))&&(e=n)}else if(w.matches(_.leader)){var r=ge.new(g,y,O.value);(yield tt.inst.submitNewLeader(r))&&(e=r)}u(e)}));return function(){return e.apply(this,arguments)}}();return(0,Tt.jsx)(wn,{children:(0,Tt.jsxs)(Vt,{spacing:16,children:[(0,Tt.jsx)(Mi,{onSelection:function(e){x(e)}}),(0,Tt.jsx)(Fn,{label:I("inputLabel.givenName"),textColor:Ct.textDark,color:Ct.textBackgroundDark,onTextChange:function(e){p(e)}}),(0,Tt.jsx)(Fn,{label:I("inputLabel.surname"),textColor:Ct.textDark,color:Ct.textBackgroundDark,onTextChange:function(e){b(e)}}),null==(t=null==w?void 0:w.matches(_.admin))||t?void 0:(0,Tt.jsx)(Nn,{navigation:n,items:Q.map((function(e){return new Bn(e.name,e.code,e)})),title:I("inputLabel.hospital"),selected:O,onSelection:function(e){C(e)}}),(0,Tt.jsx)(Gt,{size:12}),(0,Tt.jsx)(Nt,{label:I("button.createAccount"),icon:"account-plus",typography:At.button,type:st.Filled,color:Ct.accent,onPress:P}),(0,Tt.jsx)(Gt,{size:12}),null==s?void 0:(0,Tt.jsx)(Li,{employee:s})]})})};function _i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_i(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ri=function(e){var t=e.color,n=void 0===t?Ct.textDark:t,r=e.checkColor,i=void 0===r?Ct.textLight:r,o=e.size,a=void 0===o?16:o,l=e.style,c=e.isChecked,s=e.onPress;return(0,Tt.jsx)(cn.TouchableOpacity,{style:Fi({backgroundColor:c?n.getColor():"transparent",borderRadius:a/2.5,borderWidth:a/8,aspectRatio:1,borderColor:n.getColor()},l),onPress:s,children:(0,Tt.jsx)(Yt,{icon:c?"check-bold":"close-thick",color:c?i:n,size:a})})};const Hi=function(e){var t=e.code,n=e.fillSpace,r=e.style,i=At.badge;i.leafColor=Ct.textTriageCode(t);var o=kt.inst.getOS()==mt.Web;return(0,Tt.jsx)(s.default,{style:[{borderRadius:10,width:o?1.6*i.size:void 0,backgroundColor:Ct.triageCode(t).getColor(),justifyContent:"center",aspectRatio:1,alignSelf:n?void 0:"center"},r],children:(0,Tt.jsx)(Et,{typography:i,wide:!1,style:{textAlign:"center",padding:o?10:3,aspectRatio:1},children:t.code})})};function zi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zi(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Gi=function(e){var t=e.patient,n=e.style,r=e.isSelected,i=e.onPress,o=t.triageCase.arrivalDate.toLocaleTimeString("en-AU",{hour:"numeric",minute:"numeric",hour12:!0}).toUpperCase()+"  |  "+t.triageCase.arrivalDate.toDateString();return(0,Tt.jsx)(on,{color:Ct.fillBackgroundLight,style:Vi(Vi({},n),{},{borderColor:r?Ct.textSuccess.getColor():Ct.fillBackgroundLight.getColor(),borderWidth:2}),onPress:i,children:(0,Tt.jsxs)(Rt,{style:{alignItems:"center"},children:[(0,Tt.jsx)(Hi,{code:t.triageCase.triageCode,fillSpace:!1,style:{alignSelf:"flex-start",marginRight:12}}),(0,Tt.jsxs)(Vt,{style:{flexShrink:1},children:[(0,Tt.jsx)(s.default,{style:{alignSelf:"flex-start"},children:(0,Tt.jsx)(Et,{typography:At.title3,verticalWrap:!0,children:t.fullName})}),(0,Tt.jsx)(Gt,{size:16}),(0,Tt.jsx)(Et,{typography:At.subscript,children:o})]}),(0,Tt.jsx)(an,{}),(0,Tt.jsx)(Yt,{icon:"file-export",color:Ct.accent,size:hn.Medium})]})})};var qi=n(8865),Ji=n(7921),Yi=n(9422),$i=function(){var e=(0,r.default)((function*(e){if(0!=e.length){var t=(new Date).toLocaleString().replace(/[,\s:\/]/g,"_")+".csv",n="MRN,DOB,FirstName,LastName,Gender,PhoneNumber,PostCode,TimeLastAllocated,AllocatedTo,Events\n";for(var i of e){var o="";for(var a of i.events)o+="["+a.getExportSummary()+"]";n+=i.mrn+","+i.dob+","+i.firstName+","+i.lastName+","+i.sex+","+i.phoneNumber+","+i.postCode+","+i.timeLastAllocated+","+i.idAllocatedTo+","+o+"\n"}if(kt.inst.getOS()==mt.Android){var l=yield qi.StorageAccessFramework.requestDirectoryPermissionsAsync();l.granted?yield qi.StorageAccessFramework.createFileAsync(l.directoryUri,t,"csv").then(function(){var e=(0,r.default)((function*(e){yield qi.writeAsStringAsync(e,n,{encoding:Ji.EncodingType.UTF8})}));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)})):console.log("Permission denied")}else if(kt.inst.getOS()==mt.IOS){var c=t.replace(/[,\s:\/]/g,"_"),s=qi.documentDirectory+c;try{yield qi.writeAsStringAsync(s,n,{encoding:Ji.EncodingType.UTF8}),yield(0,Yi.shareAsync)(s)}catch(g){console.log(g)}}else if(kt.inst.getOS()==mt.Web){var u=new Blob([n],{type:"text/csv"}),d=URL.createObjectURL(u),f=document.createElement("a");f.href=d,f.download=t,f.click()}}}));return function(t){return e.apply(this,arguments)}}();function Ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Xi=function(e){e.navigation;var t=c.useState(tt.inst.getAllPatients()),n=(0,o.default)(t,2),i=n[0],a=n[1],l=c.useState([]),s=(0,o.default)(l,2),u=s[0],d=s[1],f=(0,c.useState)(!1),g=(0,o.default)(f,2),p=g[0],h=g[1],v=(0,c.useState)(!1),y=(0,o.default)(v,2),b=y[0],m=y[1],S=rr(),w=S.showErrorNotification,x=S.showSuccessNotification;(0,c.useEffect)((function(){var e=O.patientsFetched.subscribe((function(){a(tt.inst.getAllPatients())}));return tt.inst.fetchAllPatients(),function(){e()}}),[]);var j=function(e){tt.inst.setActivePatient(e),function(e){m(!1);var t=(0,re.default)(u),n=t.findIndex((function(t){return t.mrn.matches(e.mrn)}));-1!==n?t.splice(n,1):t.push(e),d(t),t.length==i.length?h(!0):h(!1)}(e)},k=function(){h(!p),m(!1),d(p?[]:i),h(!p)};return(0,Tt.jsxs)(wn,{children:[(0,Tt.jsxs)(Vt,{spacing:16,children:[(0,Tt.jsx)(Nt,{label:"Export",icon:"file-export",typography:At.button,type:st.Filled,color:Ct.accent,onPress:(0,r.default)((function*(){0==u.length?(m(!0),w(I("label.noPatientSelected"))):x(I("feedback.successExportPatient")),yield $i(u)}))}),(0,Tt.jsxs)(Rt,{spacing:16,style:{alignItems:"center"},children:[(0,Tt.jsx)(Et,{typography:At.body.withColor(Ct.textSemiDark),style:{flex:1,color:b?Ct.textError.getColor():Ct.accent.getColor()},children:0===u.length?I("label.noPatientSelected"):u.length+"/"+i.length+" "+I("label.patientSelected")}),(0,Tt.jsx)(cn.TouchableOpacity,{onPress:k,children:(0,Tt.jsxs)(Rt,{spacing:8,children:[(0,Tt.jsx)(Et,{typography:At.subscript.withWeight(ft.SemiBold),wide:!1,children:I(p?"operation.deselectAll":"operation.selectAll")}),(0,Tt.jsx)(Ri,{isChecked:!p,initialValue:!0,onPress:kt.inst.getOS()!==mt.Web?k:void 0,color:Ct.textSemiDark,style:{marginRight:8}})]})})]})]}),(0,Tt.jsx)(Gt,{size:12}),(0,Tt.jsx)(Vt,{children:(0,Tt.jsx)(Sr.default,{style:{flex:1,width:"100%"},children:(0,Tt.jsx)(Pn.default,{data:i,renderItem:function(e){var t=e.item;return(0,Tt.jsx)(Gi,{patient:t,isSelected:u.some((function(e){return e.mrn.matches(t.mrn)})),onPress:function(){j(t)}})},keyExtractor:function(e){return e.mrn.toString()},ItemSeparatorComponent:function(){return(0,Tt.jsx)(Gt,{size:nn.cardSpacing})},scrollEnabled:!1,style:Qi({width:"100%",overflow:"visible",flexGrow:0},kt.inst.getOS()==mt.Web?{height:kt.inst.getScreenHeight()-230}:{})})})})]})};var Zi=(new N).addSection(new lt(I("tabBar.admin.nurses"),(function(){at.inst.navigateTo(Ti,void 0,I("header.admin.viewNurses")),at.inst.setSidebarComponent(void 0,void 0)}),(function(){at.inst.clearScreens(),at.inst.setSidebarComponent((0,Tt.jsx)(Ti,{}),I("header.admin.viewNurses"))}),"hospital-box","hospital-box-outline")).addSection(new lt(I("tabBar.admin.leaders"),(function(){at.inst.navigateTo(Wi,void 0,I("header.admin.viewLeaders")),at.inst.setSidebarComponent(void 0,void 0)}),(function(){at.inst.clearScreens(),at.inst.setSidebarComponent((0,Tt.jsx)(Wi,{}),I("header.admin.viewLeaders"))}),"flag","flag-outline")).addSection(new lt(I("tabBar.admin.new"),(function(){at.inst.navigateTo(Ui,void 0,I("header.admin.newAccount")),at.inst.setSidebarComponent(void 0,void 0)}),(function(){at.inst.navigateTo(Ui,void 0,I("header.admin.newAccount")),at.inst.setSidebarComponent(void 0,void 0)}),"account-plus","account-plus-outline")).addSection(new lt(I("tabBar.admin.export"),(function(){at.inst.navigateTo(Xi,void 0,I("header.admin.exportPatient")),at.inst.setSidebarComponent(void 0,void 0)}),(function(){at.inst.navigateTo(Xi,void 0,I("header.admin.exportPatient")),at.inst.setSidebarComponent(void 0,void 0)}),"file-export","file-export-outline"));const eo=function(e){var t=e.patient,n=(e.style,t.mrn.toString()),i=t.triageCase.arrivalDate.toDateString(),o=tt.inst.getActiveWorker(),a=At.subscript;a.leafColor=Ct.textError,a.weight=ft.Bold;var l=function(){var e=(0,r.default)((function*(){null!=o&&(yield tt.inst.unallocatePatient(t,o))}));return function(){return e.apply(this,arguments)}}(),c=At.chip,s=function(e){var t=e.getHours(),n=e.getMinutes();return(t<10?"0".concat(t.toString()):t.toString())+":"+(n<10?"0".concat(n.toString()):n.toString())};return(0,Tt.jsx)(on,{children:(0,Tt.jsxs)(Vt,{style:{flex:1},children:[(0,Tt.jsxs)(Rt,{style:{alignItems:"center",justifyContent:"center"},children:[(0,Tt.jsx)(Et,{wide:!1,style:{alignSelf:"flex-start"},typography:At.title3.withWeight(ft.Bold),children:t.fullName}),(0,Tt.jsx)(an,{}),(0,Tt.jsx)($t,{label:I("button.deallocate"),typography:a,onPress:l})]}),(0,Tt.jsx)(Gt,{size:4}),(0,Tt.jsx)(jr,{code:t.triageCase.triageCode}),(0,Tt.jsx)(Gt,{size:16}),(0,Tt.jsxs)(Et,{typography:At.subscript,children:[I("label.id")," ",n]}),(0,Tt.jsxs)(Et,{typography:At.subscript,children:[I("label.date")," ",i]}),t.events.length>0?(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsx)(Gt,{size:16}),(0,Tt.jsx)(Rt,{spacing:10,children:t.events.map((function(e){return(0,Tt.jsx)(pn,{color:Ct.textDark,children:(0,Tt.jsx)(Et,{wide:!1,typography:c,children:e.title.toString()+" @ "+s(e.triggerTime)})},e.id.toString())}))})]}):void 0]})})};const to=function(e){var t=e.patient,n=t.mrn.toString(),i=t.sessionAllocated,a=i.matches(Se.none),l=t.triageCase.arrivalDate.toDateString(),s=tt.inst.getActiveWorker(),u=function(){s=tt.inst.getActiveWorker();var e=tt.inst.getPatient(t.mrn);if(null!=e&&(t=e),i=t.sessionAllocated,null!=s&&null!=t.idAllocatedTo){var n=tt.inst.getAllocatedPatientsTo(s);for(var r of n)if(r.mrn.matches(t.mrn))return!0}return!1};(0,c.useEffect)((function(){var e=O.reallocationOccurred.subscribe((function(){p(u())}));return p(u()),function(){e()}}),[]);var d=(0,c.useState)(u()),f=(0,o.default)(d,2),g=f[0],p=f[1],h=At.subscriptLabel;h.leafColor=Ct.textDark;var v=function(){var e=(0,r.default)((function*(){null!=s&&(g?yield tt.inst.unallocatePatient(t,s):yield tt.inst.allocatePatient(t,s),p(!g))}));return function(){return e.apply(this,arguments)}}(),y=function(e){var t=e.getHours(),n=e.getMinutes();return(t<10?"0".concat(t.toString()):t.toString())+":"+(n<10?"0".concat(n.toString()):n.toString())};return(0,Tt.jsx)(on,{children:(0,Tt.jsxs)(Rt,{style:{flex:1,alignItems:"center"},children:[(0,Tt.jsxs)(Vt,{style:{flex:1},children:[(0,Tt.jsx)(Et,{typography:At.title3.withWeight(ft.Bold),children:t.fullName}),(0,Tt.jsx)(Gt,{size:4}),(0,Tt.jsx)(jr,{code:t.triageCase.triageCode}),(0,Tt.jsx)(Gt,{size:16}),(0,Tt.jsx)(Et,{typography:At.subscript,children:I("allocateToNurseCard.id",""+n)}),(0,Tt.jsx)(Et,{typography:At.subscript,children:I("allocateToNurseCard.date",""+l)}),(0,Tt.jsx)(Et,{typography:At.subscript.withColor(Ct.sessionAllocated(i)),children:a?I("label.notAllocated"):I("label.lastAllocated",""+i)}),t.events.length>0?(0,Tt.jsxs)(Tt.Fragment,{children:[(0,Tt.jsx)(Gt,{size:16}),(0,Tt.jsx)(Rt,{spacing:10,children:t.events.map((function(e){return(0,Tt.jsx)(pn,{children:(0,Tt.jsx)(Et,{wide:!1,typography:h,children:e.title.toString()+" @ "+y(e.triggerTime)}),color:Ct.fillBackgroundAccent},e.id.toString())}))})]}):void 0]}),(0,Tt.jsx)(ri,{icon:g?"check":"plus",size:hn.Large,iconColor:g?Ct.textLight:Ct.textDark,color:g?Ct.accent:Ct.transparent,onPress:v,style:{alignSelf:"center",borderRadius:10,borderWidth:1,borderColor:g?Ct.textLight.getColor():Ct.textDark.getColor()}})]})})};const no=function(e){e.navigation;var t=(0,c.useState)(tt.inst.getActiveWorker()),n=(0,o.default)(t,2),r=n[0],i=n[1],a=c.useState(tt.inst.getAllPatients()),l=(0,o.default)(a,2),s=l[0],u=l[1],d=c.useState(s),f=(0,o.default)(d,2),g=f[0],p=f[1],h=c.useState(""),v=(0,o.default)(h,2),y=(v[0],v[1]);return(0,c.useEffect)((function(){var e=O.patientsFetched.subscribe((function(){u(tt.inst.getAllPatients()),O.reallocationOccurred.publish()}));p(tt.inst.getAllPatients());var t=O.activeWorkerChanged.subscribe((function(){i(tt.inst.getActiveWorker())}));return function(){t(),e()}}),[]),(0,Tt.jsx)(wn,{children:(0,Tt.jsxs)(Vt,{style:{flex:1},spacing:nn.screenPadding,children:[(0,Tt.jsxs)(Et,{typography:At.subscript,children:[I("label.patientAllocateToNurse"),"\n",(0,Tt.jsx)(Et,{typography:At.title4,children:(null==r?void 0:r.fullName)||"..."+I("label.loading")})]}),(0,Tt.jsx)(Er,{onTextChange:function(e){y(e)},data:s,setData:p,dataToString:function(e){return e.fullName}}),(0,Tt.jsx)(Pn.default,{data:g,renderItem:function(e){var t=e.item;e.index;return(0,Tt.jsx)(to,{patient:t})},keyExtractor:function(e){return e.mrn.toString()},ItemSeparatorComponent:function(){return(0,Tt.jsx)(Gt,{size:nn.cardSpacing})},scrollEnabled:!1,style:{width:"100%",overflow:"visible",flexGrow:0}})]})})};const ro=function(e){var t=e.navigation,n=c.useState([]),r=(0,o.default)(n,2),i=r[0],a=r[1],l=tt.inst.getActiveWorker();(0,c.useEffect)((function(){l=tt.inst.getActiveWorker();var e=O.patientsFetched.subscribe((function(){s(),l=tt.inst.getActiveWorker()}));return s(),function(){e()}}),[]);var s=function(){var e=[];if(null==l)throw new Error("Cannot fetch active worker!");var t=tt.inst.getAllocatedPatientsTo(l);for(var n of t){var r=tt.inst.getPatient(n.mrn);null!=r&&e.push(r)}a(e)};return(0,Tt.jsx)(wn,{children:(0,Tt.jsxs)(Vt,{spacing:nn.screenSpacing,style:{flex:1},children:[(0,Tt.jsxs)(Vt,{style:{flex:1},children:[(0,Tt.jsx)(Et,{typography:At.title1,style:{textAlign:"center"},children:i.length+" "}),(0,Tt.jsx)(Et,{typography:At.subscript,style:{textAlign:"center"},children:I("nurseAllocationScreen.subtitle")})]}),(0,Tt.jsx)(Nt,{label:I("button.newAllocation"),icon:"plus",onPress:function(){at.inst.navigateTo(no,t,I("header.leader.viewPatients"))},style:{borderRadius:15,marginTop:5,marginBottom:10}}),(0,Tt.jsx)(Gt,{size:2}),(0,Tt.jsx)(Pn.default,{data:i,renderItem:function(e){var t=e.item;return(0,Tt.jsx)(eo,{patient:t})},keyExtractor:function(e){return e.mrn.toString()},ItemSeparatorComponent:function(){return(0,Tt.jsx)(Gt,{size:nn.cardSpacing})},scrollEnabled:!1,style:{width:"100%",overflow:"visible",flexGrow:0}})]})})};function io(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?io(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):io(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ao=function(e){var t=e.navigation,n=c.useState(tt.inst.getAllWorkers()),r=(0,o.default)(n,2),i=r[0],a=r[1],l=c.useState(i),s=(0,o.default)(l,2),u=s[0],d=s[1],f=c.useState(""),g=(0,o.default)(f,2),p=(g[0],g[1]);(0,c.useEffect)((function(){var e=O.workersFetched.subscribe((function(){a(tt.inst.getAllWorkers()),d(tt.inst.getAllWorkers())})),t=O.patientsFetched.subscribe((function(){a(tt.inst.getAllWorkers()),d(tt.inst.getAllWorkers())}));return tt.inst.fetchAllPatients(),tt.inst.fetchAllWorkers(),function(){e(),t()}}),[]);return(0,Tt.jsx)(wn,{children:(0,Tt.jsx)(Vt,{spacing:nn.screenSpacing,style:{flex:1},children:(0,Tt.jsxs)(cn.ScrollView,{style:{width:"100%",flex:1},children:[(0,Tt.jsx)(Er,{onTextChange:function(e){p(e)},data:i,setData:d,dataToString:function(e){return e.fullName}}),(0,Tt.jsx)(Gt,{size:nn.cardTopPadding}),(0,Tt.jsx)(Pn.default,{data:u,renderItem:function(e){var n=e.item;return(0,Tt.jsx)(Ci,{worker:n,onPress:function(){!function(e){tt.inst.setActiveWorker(e),at.inst.navigateTo(ro,t,e.fullName)}(n)}})},keyExtractor:function(e){return e.id.toString()},ItemSeparatorComponent:function(){return(0,Tt.jsx)(Gt,{size:nn.cardSpacing})},scrollEnabled:!1,style:oo({width:"100%",overflow:"visible",flexGrow:0},kt.inst.getOS()==mt.Web&&kt.inst.getScreenType()!=St.Mobile?{height:kt.inst.getScreenHeight()-145}:{})})]})})})};const lo=function(e){var t=e.patient,n=e.onPress,r=t.mrn.toString(),i=t.sessionAllocated,o=i.matches(Se.none),a=t.triageCase.arrivalDate.toDateString();return(0,Tt.jsx)(on,{onPress:n,children:(0,Tt.jsxs)(Vt,{style:{flex:1},children:[(0,Tt.jsx)(Et,{typography:At.title3,verticalWrap:!0,children:t.fullName}),(0,Tt.jsx)(Gt,{size:4}),(0,Tt.jsx)(jr,{code:t.triageCase.triageCode}),(0,Tt.jsx)(Gt,{size:16}),(0,Tt.jsxs)(Et,{typography:At.subscript,children:[I("label.id")," ",r]}),(0,Tt.jsxs)(Et,{typography:At.subscript,children:[I("label.date")," ",a]}),(0,Tt.jsx)(Et,{typography:At.subscript.withColor(Ct.sessionAllocated(i)),children:o?I("label.notAllocated"):I("label.lastAllocated",""+i.toString())}),(0,Tt.jsx)(Gt,{size:1})]})})};const co=function(e){var t=e.worker,n=t.id.toString(),i=tt.inst.getActivePatient(),a=tt.inst.getAllocatedPatientsTo(t),l=function(){i=tt.inst.getActivePatient();var e=tt.inst.getWorker(t.id);if(null!=e&&(t=e),null==i||null==i.idAllocatedTo)return!1;for(var n of a=tt.inst.getAllocatedPatientsTo(t))if(n.mrn.matches(i.mrn))return!0;return!1},s=(0,c.useState)(l()),u=(0,o.default)(s,2),d=u[0],f=u[1];(0,c.useEffect)((function(){var e=O.reallocationOccurred.subscribe((function(){f(l())}));return function(){e()}}),[]);var g=function(){var e=(0,r.default)((function*(){null!=i&&(d?yield tt.inst.unallocatePatient(i,t):yield tt.inst.allocatePatient(i,t),f(!d))}));return function(){return e.apply(this,arguments)}}();return(0,Tt.jsx)(on,{children:(0,Tt.jsxs)(Rt,{style:{flex:1,alignItems:"center"},children:[(0,Tt.jsxs)(Vt,{style:{flex:1},children:[(0,Tt.jsx)(Et,{typography:At.title3,children:t.fullName}),(0,Tt.jsx)(Gt,{size:8}),(0,Tt.jsx)(Et,{typography:At.subscript,children:I("workerCard.id",""+n)}),(0,Tt.jsx)(Et,{typography:At.subscript,children:I("workerCard.numPatients",""+a.length)})]}),(0,Tt.jsx)(ri,{icon:d?"check":"plus",size:hn.Large,iconColor:d?Ct.textLight:Ct.textDark,color:d?Ct.accent:Ct.transparent,onPress:g,style:{alignSelf:"center",borderRadius:10,borderWidth:1,borderColor:d?Ct.textLight.getColor():Ct.textDark.getColor()}})]})})};const so=function(e){e.navigation;var t=(0,c.useState)(tt.inst.getActivePatient()),n=(0,o.default)(t,2),r=(n[0],n[1]),i=c.useState(tt.inst.getAllWorkers()),a=(0,o.default)(i,2),l=a[0],s=a[1],u=c.useState(l),d=(0,o.default)(u,2),f=d[0],g=d[1],p=c.useState(""),h=(0,o.default)(p,2),v=(h[0],h[1]);return(0,c.useEffect)((function(){var e=O.patientsFetched.subscribe((function(){s(tt.inst.getAllWorkers()),g(tt.inst.getAllWorkers()),O.reallocationOccurred.publish()}));g(tt.inst.getAllWorkers());var t=O.activePatientChanged.subscribe((function(){r(tt.inst.getActivePatient())}));return function(){t(),e()}}),[]),(0,Tt.jsx)(wn,{children:(0,Tt.jsxs)(Vt,{style:{flex:1},spacing:nn.screenPadding,children:[(0,Tt.jsx)(Er,{onTextChange:function(e){v(e)},data:l,setData:g,dataToString:function(e){return e.fullName}}),(0,Tt.jsx)(Pn.default,{data:f,renderItem:function(e){var t=e.item;e.index;return(0,Tt.jsx)(co,{worker:t},t.id.toString())},keyExtractor:function(e){return e.id.toString()},ItemSeparatorComponent:function(){return(0,Tt.jsx)(Gt,{size:nn.cardSpacing})},scrollEnabled:!1,style:{width:"100%",overflow:"visible",flexGrow:0}})]})})};function uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uo(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const go=function(e){var t=e.navigation,n=c.useState(tt.inst.getAllPatients()),r=(0,o.default)(n,2),i=r[0],a=r[1],l=c.useState(i),s=(0,o.default)(l,2),u=s[0],d=s[1],f=c.useState(""),g=(0,o.default)(f,2),p=(g[0],g[1]);(0,c.useEffect)((function(){var e=O.patientsFetched.subscribe((function(){a(tt.inst.getAllPatients()),d(tt.inst.getAllPatients())}));return tt.inst.fetchAllWorkers(),tt.inst.fetchAllPatients(),function(){e()}}),[]);return(0,Tt.jsx)(wn,{children:(0,Tt.jsx)(Vt,{spacing:nn.screenSpacing,style:{flex:1},children:(0,Tt.jsxs)(cn.ScrollView,{style:{width:"100%",flex:1},children:[(0,Tt.jsx)(Er,{onTextChange:function(e){p(e)},data:i,setData:d,dataToString:function(e){return e.fullName}}),(0,Tt.jsx)(Gt,{size:nn.cardTopPadding}),(0,Tt.jsx)(Pn.default,{data:u,renderItem:function(e){var n=e.item;return(0,Tt.jsx)(lo,{patient:n,onPress:function(){!function(e){tt.inst.setActivePatient(e),at.inst.navigateTo(so,t,I("header.leader.allocateTo",e.fullName))}(n)}})},keyExtractor:function(e){return e.mrn.toString()},ItemSeparatorComponent:function(){return(0,Tt.jsx)(Gt,{size:nn.cardSpacing})},scrollEnabled:!1,style:fo({width:"100%",overflow:"visible",flexGrow:0},kt.inst.getOS()==mt.Web&&kt.inst.getScreenType()!=St.Mobile?{height:kt.inst.getScreenHeight()-145}:{})})]})})})};var po=(new N).addSection(new lt(I("tabBar.leader.viewNurses"),(function(){at.inst.navigateTo(ao,void 0,I("header.leader.viewNurses")),at.inst.setSidebarComponent(void 0,void 0)}),(function(){at.inst.clearScreens(),at.inst.setSidebarComponent((0,Tt.jsx)(ao,{}),I("header.leader.viewNurses"))}),"hospital-box","hospital-box-outline")).addSection(new lt(I("tabBar.leader.viewPatients"),(function(){at.inst.navigateTo(go,void 0,I("header.leader.viewPatients")),at.inst.setSidebarComponent(void 0,void 0)}),(function(){at.inst.clearScreens(),at.inst.setSidebarComponent((0,Tt.jsx)(go,{}),I("header.leader.viewPatients"))}),"account-injury","account-injury-outline")).addSection(new lt(I("tabBar.leader.account"),(function(){at.inst.navigateTo(ln,void 0,I("header.leader.account")),at.inst.setSidebarComponent(void 0,void 0)}),(function(){at.inst.clearScreens(),at.inst.navigateTo(ln,void 0,I("header.worker.account")),at.inst.setSidebarComponent(void 0,void 0)}),"account-circle","account-circle-outline"));const ho=function(){var e=c.useState(O.loginStatus.read()),t=(0,o.default)(e,2),n=t[0],r=t[1];switch((0,c.useEffect)((function(){var e=O.loginStatus.subscribe((function(){r(O.loginStatus.read())}));return function(){e()}}),[]),n){case j.LoggedOut:return(0,Tt.jsx)(di,{screen:new nt("",Oi)});case j.Worker:return(0,Tt.jsx)(ci,{leafInterface:Wr});case j.Leader:return(0,Tt.jsx)(ci,{leafInterface:po});case j.Admin:return(0,Tt.jsx)(ci,{leafInterface:Zi});default:throw new m(n)}};function vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yo(){var e,t=(0,a.useFonts)((e={},(0,i.default)(e,dt.GilroyExtraBold,n(7142)),(0,i.default)(e,dt.PoppinsMedium,n(4306)),(0,i.default)(e,dt.PoppinsSemiBold,n(5446)),(0,i.default)(e,dt.PoppinsBold,n(1104)),(0,i.default)(e,dt.PoppinsMediumItalic,n(1607)),(0,i.default)(e,dt.PoppinsSemiBoldItalic,n(8904)),(0,i.default)(e,dt.PoppinsBoldItalic,n(6980)),(0,i.default)(e,dt.CircularMedium,n(1890)),(0,i.default)(e,dt.CircularBold,n(2046)),(0,i.default)(e,dt.CircularBlack,n(2917)),(0,i.default)(e,dt.CircularMediumItalic,n(5477)),(0,i.default)(e,dt.CircularBoldItalic,n(3612)),(0,i.default)(e,dt.CircularBlackItalic,n(7975)),e)),d=(0,o.default)(t,1)[0],f=(0,c.useCallback)((0,r.default)((function*(){d&&(yield l.hideAsync())})),[d]);return d?(0,Tt.jsx)(u.default,{theme:bo,children:(0,Tt.jsx)(nr,{children:(0,Tt.jsx)(s.default,{onLayout:f,style:{flex:1},children:(0,Tt.jsx)(ho,{})})})}):null}l.preventAutoHideAsync();var bo=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vo(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d.DefaultTheme)},2917:(e,t,n)=>{e.exports=n.p+"static/media/CircularStd-Black.757b8ac8efa71be3fcd0.otf"},7975:(e,t,n)=>{e.exports=n.p+"static/media/CircularStd-BlackItalic.e1f3943738ef431efb3e.otf"},2046:(e,t,n)=>{e.exports=n.p+"static/media/CircularStd-Bold.5c4514a8399ec0064b9b.otf"},3612:(e,t,n)=>{e.exports=n.p+"static/media/CircularStd-BoldItalic.c1293725acde0dffc47e.otf"},1890:(e,t,n)=>{e.exports=n.p+"static/media/CircularStd-Medium.9ffafeddf192e8c8a111.otf"},5477:(e,t,n)=>{e.exports=n.p+"static/media/CircularStd-MediumItalic.55bf23ce572de9d28b4e.otf"},7142:(e,t,n)=>{e.exports=n.p+"static/media/Gilroy-ExtraBold.0094146a0505298ed06a.otf"},1104:(e,t,n)=>{e.exports=n.p+"static/media/Poppins-Bold.cdb29a5d7ccf57ff05a3.ttf"},6980:(e,t,n)=>{e.exports=n.p+"static/media/Poppins-BoldItalic.cfb635a5111b545f5598.ttf"},4306:(e,t,n)=>{e.exports=n.p+"static/media/Poppins-Medium.673ed42382ab264e0bf5.ttf"},1607:(e,t,n)=>{e.exports=n.p+"static/media/Poppins-MediumItalic.89e040c6a64d18f620dc.ttf"},5446:(e,t,n)=>{e.exports=n.p+"static/media/Poppins-SemiBold.ac8d04b620e54be9b0f0.ttf"},8904:(e,t,n)=>{e.exports=n.p+"static/media/Poppins-SemiBoldItalic.3524ffc3226f4578e5c5.ttf"},9980:(e,t,n)=>{e.exports=n.p+"static/media/test.a8d5774fe4ff9b0173e5.jpg"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,(()=>{var e=[];n.O=(t,r,i,o)=>{if(!r){var a=1/0;for(u=0;u<e.length;u++){for(var[r,i,o]=e[u],l=!0,c=0;c<r.length;c++)(!1&o||a>=o)&&Object.keys(n.O).every((e=>n.O[e](r[c])))?r.splice(c--,1):(l=!1,o<a&&(a=o));if(l){e.splice(u--,1);var s=i();void 0!==s&&(t=s)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,i,o]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var l=2&i&&r;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/Leaf/",(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var i,o,[a,l,c]=r,s=0;if(a.some((t=>0!==e[t]))){for(i in l)n.o(l,i)&&(n.m[i]=l[i]);if(c)var u=c(n)}for(t&&t(r);s<a.length;s++)o=a[s],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(u)},r=self.webpackChunkweb=self.webpackChunkweb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n.O(void 0,[114],(()=>n(9484)));r=n.O(r)})();
//# sourceMappingURL=main.a6c9560c.js.map